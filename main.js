!function(){"use strict";var e={855:function(e,t,n){e.exports=n.p+"images/spinner_svg.dc4086388e55820fbae1.svg"}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.p="",function(){console.log("test");class e{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._errorClass=e.errorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._submitButtonSelector=e.submitButtonSelector,this._form=t}_setFormListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_getElementTxt(e){return"url"===e.type?"".concat(e.type,"-input"):e.id}_showInputError(e){const t=this._form.querySelector(".".concat(this._getElementTxt(e),"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_removeInputError(e){const t=this._form.querySelector(".".concat(this._getElementTxt(e),"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._removeInputError(e):this._showInputError(e)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._removeInputError(e)})),this._form.reset(),this._toggleButtonState()}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}enableValidation(){this._setFormListeners(),this._form.addEventListener("submit",(e=>e.preventDefault()))}}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i(),t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));let n="";for(let i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n+=Date.now(),n+Date.now()}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;return Math.floor(Math.random()*(t-e+1))+e}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";e.textContent=t}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r{constructor(e,n,i,o,r,l,a){var c=this;let{name:u,link:_,_id:h,owner:m}=e,{likes:d,isOwner:p}=l;s(this,"_renderLikes",(()=>{this._placeLikeAmount.textContent=this._likes.length,this._isLiked()?this._placeLikeBtn.classList.add("places__like-btn__active"):this._placeLikeBtn.classList.remove("places__like-btn__active")})),s(this,"onUpdateLikes",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];c._likes=e,c._renderLikes()})),this._name=u,this._link=_,this._handleImageClick=n,this._getUserId=r,this._openRemoveItemPopup=i,this._cardSelector=a,this._likes=d||[],this._isOwner=p||!1,this._id=h||t(),this._handleLikedToggle=o,this._owner=m,this._isLiked=()=>{if(!this._likes.length)return;const e=this._getUserId();return this._likes.some((t=>t._id===e))||!1}}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".places__item").cloneNode(!0)}_handleToggleLikedBtn(e){e.stopPropagation(),this._handleLikedToggle(this._isLiked(),this,this._id)}_handleRemoveItem(e){e.stopPropagation(),this._openRemoveItemPopup(this._id,this._cardItem)}_setEventListeners(){this._cardItem.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)})),this._placeLikeBtn.addEventListener("click",(e=>{this._handleToggleLikedBtn(e)})),this._cardItem.querySelector(".places__remove-btn").addEventListener("click",(e=>{this._handleRemoveItem(e)}))}generateCard(){return this._cardItem=this._getTemplate(),this._placeImg=this._cardItem.querySelector(".places__img"),this._placeLikeBtn=this._cardItem.querySelector(".places__like-btn"),this._placeLikeAmount=this._cardItem.querySelector(".places__like-counter"),this._placeRemoveBtn=this._cardItem.querySelector(".places__remove-btn"),this._renderLikes(),"Loading..."!==this._name&&"images/spinner_svg.dc4086388e55820fbae1.svg"!==this._link&&this._setEventListeners(),this._isOwner||this._placeRemoveBtn.remove(),this._placeImg.style.backgroundImage="url(".concat(this._link,")"),this._placeImg.alt="a photo of ".concat(this._name),this._cardItem.querySelector(".places__name").textContent="".concat(this._name),this._cardItem}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a{constructor(e){l(this,"_handleEscClose",(e=>{"Escape"==e.key&&this.close()})),l(this,"_handleContextMenu",(e=>{e.preventDefault()})),this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("popup-box_visible"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup-box_visible"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup-box_visible")||e.target.classList.contains("popup-box__close-button"))&&this.close()}))}}class c extends a{constructor(e,t){var n,i;super(e),i=e=>{e.preventDefault(),this._handleSubmitFrom(this._returnInputValObj())},(n="_handleFormSubmit")in this?Object.defineProperty(this,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[n]=i,this._handleSubmitFrom=t,this._formElement=this._popupElement.querySelector(".popup-box__form"),this._formBtn=this._formElement.querySelector(".popup-box__submit-button"),this._inputList=[...this._formElement.querySelectorAll(".popup-box__input")],this._modifyElementText=o}handleLoading(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Saving...",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._formBtn.disabled=!t,this._modifyElementText(this._formBtn,e)}_returnInputValObj(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}close(){super.close(),this._formElement.reset()}setEventListeners(){this._formElement.addEventListener("submit",this._handleFormSubmit),super.setEventListeners()}}var u=n(855);const _={},h=document.querySelector(".profile__edit-btn"),m=document.querySelector(".profile__add-btn"),d=document.querySelector(".profile__avatar-cover"),p="Something went wrong, please try again later ",f=document.querySelector('input[name="name_input"]'),g=document.querySelector('input[name="about_me"]');function v(){_["form_change-profile-pic"].resetValidation(),U.open()}function b(){_["form_add-place"].resetValidation(),w.open()}function E(){_["form_profile-edit"].resetValidation(),q.open(),function(e){let{nameInfo:t,aboutMeInfo:n}=e;f.value=t,g.value=n}(B.getUserInfo())}function L(e,t){P.open(e,t)}function S(e,t){T.open(e,t)}function I(){return B.getUserId()}function k(e,t,n){e?R.removeItemLike(n).then((e=>{t.onUpdateLikes(e.likes)})).catch((e=>console.log("Error: ".concat(e)))):R.addItemLike(n).then((e=>{t.onUpdateLikes(e.likes)})).catch((e=>console.log("Error: ".concat(e))))}function y(e,n,i){e?(B.setUserInfo({name:"Loading...",about:"Loading...",_id:t()}),B.setPictureProfile(u),C.setNewItemlist([{name:"Loading...",link:u,owner:{_id:t()},likes:[]}])):(document.querySelector(".places__grid-container").innerHTML="",B.setUserInfo({name:i.name,about:i.about,_id:i._id}),B.setPictureProfile(i.avatar),C.setNewItemlist(n),h.addEventListener("click",E),m.addEventListener("click",b),d.addEventListener("click",v))}function x(e,t){C.addItem(function(e,t){return new r(e,L,S,k,I,t,"#places-item-template").generateCard()}(e,t))}const C=new class{constructor(e){let{renderer:t,containerSelector:n}=e;this._renderer=t,this._container=document.querySelector(n)}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}setNewItemlist(e){this._items=e,this.renderItems()}}({renderer:e=>{const{owner:t,likes:n}=e,i=I();x(e,{isOwner:t._id===i,likes:n})},containerSelector:".places__grid-container"}),q=new c(".popup-box_type_profile-edit",(function(e){let{name_input:t,about_me:n}=e;_["form_add-place"].resetValidation(),q.handleLoading(),R.setUserInfo({name:t,about:n}).then((e=>{q.handleLoading("Profile edited successfully!"),B.setUserInfo(e),setTimeout((()=>{q.close()}),1e3)})).catch((e=>{q.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{q.handleLoading("Save",!0)}),1800)}))}),"Save"),w=new c(".popup-box_type_add-item",(function(e){let{title_place:t,img_link:n}=e;w.handleLoading(),R.addNewCard({name:t,link:n}).then((e=>{w.handleLoading("Place added successfully!"),x(e,{isOwner:!0,likes:[]}),setTimeout((()=>{w.close()}),1e3)})).catch((e=>{w.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{w.handleLoading("Create",!0)}),1800)}))})),P=new class extends a{constructor(e){let{popupSelector:t,imgSelector:n,imgTitleSelector:i}=e;super(t),this._imgElement=this._popupElement.querySelector(n),this._titleElement=this._popupElement.querySelector(i)}_setPopupImg(){this._titleElement.textContent=this.title,this._imgElement.src=this._link,this._imgElement.alt="a pictrue of ".concat(this.title)}open(e,t){this.title=e,this._link=t,this._setPopupImg(),super.open()}}({popupSelector:".popup-box_type_img",imgSelector:".popup-box__img",imgTitleSelector:".popup-box__img-title"}),T=new class extends a{constructor(e){let{popupSelector:t,handleSubmitRemoveConfirm:n}=e;var i,s;super(t),s=e=>{e.preventDefault(),this._handleSubmitRemoveConfirm(this._id,this._element)},(i="_handleConfirmSubmit")in this?Object.defineProperty(this,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[i]=s,this._handleSubmitRemoveConfirm=n,this._submitBtnElement=this._popupElement.querySelector(".popup-box__submit-button"),this._modifyElementText=o}open(e,t){super.open(),this._element=t,this._id=e}handleLoading(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Saving...",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._submitBtnElement.disabled=!t,this._modifyElementText(this._submitBtnElement,e)}setEventListeners(){this._submitBtnElement.addEventListener("click",this._handleConfirmSubmit),super.setEventListeners()}}({popupSelector:".popup-box_type_confirm",handleSubmitRemoveConfirm:function(e,t){T.handleLoading(),R.onRemoveItem(e).then((()=>{T.handleLoading("Place removed successfully!"),t.remove(),setTimeout((()=>{T.close()}),1e3)})).catch((e=>{T.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{T.handleLoading("Yes",!0)}),1050)}))}}),B=new class{constructor(e){let{nameElm:t,jobElm:n,picElm:i}=e;this._nameElm=document.querySelector(t),this._jobElm=document.querySelector(n),this._picElm=document.querySelector(i)}setUserInfo(e){let{name:t,about:n,_id:i}=e;this._nameElm.textContent=t,this._jobElm.textContent=n,this._userId=i}getUserInfo(){return{nameInfo:this._nameElm.textContent,aboutMeInfo:this._jobElm.textContent}}getUserId(){return this._userId}setPictureProfile(e){this._picElm.style.backgroundImage='url("'.concat(e,'")')}}({nameElm:".profile__name",jobElm:".profile__about-me",picElm:".profile__avatar-cover"}),U=new c(".popup-box_type_change-profile-pic",(function(e){let{img_link:t}=e;U.handleLoading(),R.onUpdateProfilePic({avatar:t}).then((()=>{U.handleLoading("Profile Picture modified successfully!"),B.setPictureProfile(t),setTimeout((()=>{U.close()}),1e3)})).catch((e=>{U.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{U.handleLoading("Save",!0)}),1e3)}))})),R=new class{constructor(e){let{baseUrl:t,headers:n}=e;this.headers=n,this.baseUrl=t}_onHttpRequest(e,t,n){const i="".concat(this.baseUrl).concat(e);return fetch(i,{method:t,headers:this.headers,body:JSON.stringify(n)}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}getInitInfo(){return Promise.all([this._getInitialCards(),this._getUserInfo()])}_getUserInfo(){return this._onHttpRequest("users/me","GET")}_getInitialCards(){return this._onHttpRequest("cards","GET")}setUserInfo(e){let{name:t,about:n}=e;return this._onHttpRequest("users/me","PATCH",{name:t,about:n})}addNewCard(e){let{name:t,link:n}=e;return this._onHttpRequest("cards","POST",{name:t,link:n})}onRemoveItem(e){return this._onHttpRequest("cards/".concat(e),"DELETE")}addItemLike(e){return this._onHttpRequest("cards/likes/".concat(e),"PUT")}removeItemLike(e){return this._onHttpRequest("cards/likes/".concat(e),"DELETE")}onUpdateProfilePic(e){let{avatar:t}=e;return this._onHttpRequest("users/me/avatar","PATCH",{avatar:t})}}({baseUrl:"https://around.nomoreparties.co/v1/group-12/",headers:{authorization:"035a3e80-0d3f-421b-b4fa-7f406e49ad5f","Content-Type":"application/json"}});y(!0),R.getInitInfo().then((t=>{let[n,i]=t;var o;y(!1,n,i),o={formSelector:".popup-box__form",inputSelector:".popup-box__input",submitButtonSelector:".popup-box__submit-button",inactiveButtonClass:"popup-box__submit-button_inactive",inputErrorClass:".popup-box__input_type_error",errorClass:".popup-box__input-error_active"},Array.from(document.querySelectorAll(o.formSelector)).forEach((t=>{const n=new e(o,t),i=t.name;_[i]=n,n.enableValidation()})),q.setEventListeners(),w.setEventListeners(),P.setEventListeners(),T.setEventListeners(),U.setEventListeners()})).catch((e=>console.log("Error: ".concat(e))))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG9CQUNUcUMsRUFBWXJDLG9CQUNadUMsRUFBbUJ2QyxvQkFDbkJ5QixFQUFzQnpCLHVCQVJuQjhDLE9BQU9DLEdBQVF4SyxRQUFRQyxJQUFSLGlCQUFzQnVLLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL2NvbmZpbmcuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiY29uc3QgYXBpQ29uZmluZyA9IHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIwMzVhM2U4MC0wZDNmLTQyMWItYjRmYS03ZjQwNmU0OWFkNWZcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn07XHJcbmV4cG9ydCB7IGFwaUNvbmZpbmcgfTtcclxuY29uc29sZS5sb2coJ3Rlc3QnKSIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybSkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gIH1cclxuICBfc2V0Rm9ybUxpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX2dldEVsZW1lbnRUeHQoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCB0eHQgPVxyXG4gICAgICBpbnB1dEVsZW1lbnQudHlwZSA9PT0gXCJ1cmxcIlxyXG4gICAgICAgID8gYCR7aW5wdXRFbGVtZW50LnR5cGV9LWlucHV0YFxyXG4gICAgICAgIDogaW5wdXRFbGVtZW50LmlkO1xyXG4gICAgcmV0dXJuIHR4dDtcclxuICB9XHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7dGhpcy5fZ2V0RWxlbWVudFR4dChpbnB1dEVsZW1lbnQpfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIF9yZW1vdmVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7dGhpcy5fZ2V0RWxlbWVudFR4dChpbnB1dEVsZW1lbnQpfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fcmVtb3ZlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW1vdmVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRGb3JtTGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IGUucHJldmVudERlZmF1bHQoKSk7XHJcbiAgfVxyXG59XHJcbiIsImZ1bmN0aW9uIGdldFJhbmRvbVN0cmluZyhsZW5ndGggPSBnZXRSYW5kb21JbnQoKSkge1xyXG4gIGxldCBjaGFycyA9XHJcbiAgICBcIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWtsbW5vcHFyc3R1dnd4eXpcIi5zcGxpdChcIlwiKTtcclxuXHJcbiAgaWYgKCFsZW5ndGgpIHtcclxuICAgIGxlbmd0aCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCk7XHJcbiAgfVxyXG5cclxuICBsZXQgc3RyID0gXCJcIjtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICBzdHIgKz0gY2hhcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKV07XHJcbiAgfVxyXG4gIHN0ciArPSBEYXRlLm5vdygpO1xyXG4gIHJldHVybiBzdHIgKyBEYXRlLm5vdygpO1xyXG59XHJcbmZ1bmN0aW9uIGdldFJhbmRvbUludChtaW4gPSAxMDAsIG1heCA9IDE1MCkge1xyXG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xyXG59XHJcbmZ1bmN0aW9uIG1vZGlmeUVsZW1lbnRUZXh0KGVsZW1lbnQsIHR4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICBlbGVtZW50LnRleHRDb250ZW50ID0gdHh0O1xyXG59XHJcblxyXG5leHBvcnQgeyBnZXRSYW5kb21TdHJpbmcsIG1vZGlmeUVsZW1lbnRUZXh0IH07XHJcbiIsImltcG9ydCB7IGdldFJhbmRvbVN0cmluZyB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG5leHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgb3duZXIgfSxcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBvcGVuUmVtb3ZlSXRlbVBvcHVwLFxyXG4gICAgaGFuZGxlTGlrZWRUb2dnbGUsXHJcbiAgICBnZXRVc2VySWQsXHJcbiAgICB7IGxpa2VzLCBpc093bmVyIH0sXHJcbiAgICBjYXJkU2VsZWN0b3JcclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2dldFVzZXJJZCA9IGdldFVzZXJJZDtcclxuICAgIHRoaXMuX29wZW5SZW1vdmVJdGVtUG9wdXAgPSBvcGVuUmVtb3ZlSXRlbVBvcHVwO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcyB8fCBbXTtcclxuICAgIHRoaXMuX2lzT3duZXIgPSBpc093bmVyIHx8IGZhbHNlO1xyXG4gICAgdGhpcy5faWQgPSBfaWQgfHwgZ2V0UmFuZG9tU3RyaW5nKCk7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlZFRvZ2dsZSA9IGhhbmRsZUxpa2VkVG9nZ2xlO1xyXG4gICAgdGhpcy5fb3duZXIgPSBvd25lcjtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSAoKSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5fbGlrZXMubGVuZ3RoKSByZXR1cm47XHJcbiAgICAgIGNvbnN0IGlkID0gdGhpcy5fZ2V0VXNlcklkKCk7XHJcbiAgICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gaWQpIHx8IGZhbHNlO1xyXG4gICAgfTtcclxuICB9XHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgcGxhY2VJdGVtVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9jYXJkU2VsZWN0b3JcclxuICAgICkuY29udGVudDtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gcGxhY2VJdGVtVGVtcGxhdGVcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19pdGVtXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuICBfaGFuZGxlVG9nZ2xlTGlrZWRCdG4oZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VkVG9nZ2xlKHRoaXMuX2lzTGlrZWQoKSwgdGhpcywgdGhpcy5faWQpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVJlbW92ZUl0ZW0oZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuX29wZW5SZW1vdmVJdGVtUG9wdXAodGhpcy5faWQsIHRoaXMuX2NhcmRJdGVtKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3BsYWNlTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlVG9nZ2xlTGlrZWRCdG4oZSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRJdGVtXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fcmVtb3ZlLWJ0blwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlSXRlbShlKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIF9yZW5kZXJMaWtlcyA9ICgpID0+IHtcclxuICAgIHRoaXMuX3BsYWNlTGlrZUFtb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIGlmICh0aGlzLl9pc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5fcGxhY2VMaWtlQnRuLmNsYXNzTGlzdC5hZGQoXCJwbGFjZXNfX2xpa2UtYnRuX19hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9wbGFjZUxpa2VCdG4uY2xhc3NMaXN0LnJlbW92ZShcInBsYWNlc19fbGlrZS1idG5fX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9O1xyXG4gIG9uVXBkYXRlTGlrZXMgPSAobGlrZXMgPSBbXSkgPT4ge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgfTtcclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEl0ZW0gPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fcGxhY2VJbWcgPSB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19faW1nXCIpO1xyXG4gICAgdGhpcy5fcGxhY2VMaWtlQnRuID0gdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2xpa2UtYnRuXCIpO1xyXG4gICAgdGhpcy5fcGxhY2VMaWtlQW1vdW50ID0gdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucGxhY2VzX19saWtlLWNvdW50ZXJcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3BsYWNlUmVtb3ZlQnRuID0gdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX3JlbW92ZS1idG5cIik7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLl9uYW1lICE9PSBcIkxvYWRpbmcuLi5cIiAmJlxyXG4gICAgICB0aGlzLl9saW5rICE9PSBcImltYWdlcy9zcGlubmVyX3N2Zy5kYzQwODYzODhlNTU4MjBmYmFlMS5zdmdcIlxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuX2lzT3duZXIpIHtcclxuICAgICAgdGhpcy5fcGxhY2VSZW1vdmVCdG4ucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fcGxhY2VJbWcuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWA7XHJcbiAgICB0aGlzLl9wbGFjZUltZy5hbHQgPSBgYSBwaG90byBvZiAke3RoaXMuX25hbWV9YDtcclxuICAgIHRoaXMuX2NhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19uYW1lXCIpLnRleHRDb250ZW50ID0gYCR7dGhpcy5fbmFtZX1gO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRJdGVtO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBfaGFuZGxlQ29udGV4dE1lbnUgPSAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH07XHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXAtYm94X3Zpc2libGVcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXAtYm94X3Zpc2libGVcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cC1ib3hfdmlzaWJsZVwiKSB8fFxyXG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwLWJveF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgeyBtb2RpZnlFbGVtZW50VGV4dCB9IGZyb20gXCIuLi91dGlscy91dGlsc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGcm9tKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZyb20gPSBoYW5kbGVTdWJtaXRGcm9tO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1ib3hfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9mb3JtQnRuID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucG9wdXAtYm94X19zdWJtaXQtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwLWJveF9faW5wdXRcIiksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5fbW9kaWZ5RWxlbWVudFRleHQgPSBtb2RpZnlFbGVtZW50VGV4dDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVGb3JtU3VibWl0ID0gKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZyb20odGhpcy5fcmV0dXJuSW5wdXRWYWxPYmooKSk7XHJcbiAgfTtcclxuICBoYW5kbGVMb2FkaW5nKHR4dCA9IFwiU2F2aW5nLi4uXCIsIGlzRG9uZSA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLl9mb3JtQnRuLmRpc2FibGVkID0gIWlzRG9uZSA/IHRydWUgOiBmYWxzZTtcclxuICAgIHRoaXMuX21vZGlmeUVsZW1lbnRUZXh0KHRoaXMuX2Zvcm1CdG4sIHR4dCk7XHJcbiAgfVxyXG5cclxuICBfcmV0dXJuSW5wdXRWYWxPYmooKSB7XHJcbiAgICBjb25zdCB2YWxJbnB1dE9iaiA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdmFsSW5wdXRPYmpbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2YWxJbnB1dE9iajtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCZWVyc2hlYmEgVHVya2lzaCByYWlsd2F5IHN0YXRpb25cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy90aHVtYi9kL2RlLyVENyU5RSVENyVBQSVENyU5NyVENyU5RF8lRDclQUElRDclOTclRDclQTAlRDclQUFfJUQ3JTk0JUQ3JUE4JUQ3JTlCJUQ3JTkxJUQ3JUFBXyVENyU5NCVENyU5OCVENyU5NSVENyVBOCVENyVBNyVENyU5OSVENyVBQV8lRDclOTElRDclOTElRDclOTAlRDclQThfJUQ3JUE5JUQ3JTkxJUQ3JUEyLmpwZy8xMjgwcHgtJUQ3JTlFJUQ3JUFBJUQ3JTk3JUQ3JTlEXyVENyVBQSVENyU5NyVENyVBMCVENyVBQV8lRDclOTQlRDclQTglRDclOUIlRDclOTElRDclQUFfJUQ3JTk0JUQ3JTk4JUQ3JTk1JUQ3JUE4JUQ3JUE3JUQ3JTk5JUQ3JUFBXyVENyU5MSVENyU5MSVENyU5MCVENyVBOF8lRDclQTklRDclOTElRDclQTIuanBnXCIsXHJcbiAgfSxcclxuXTtcclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmNvbnN0IG9wZW5FZGl0VXNlclBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcclxuY29uc3Qgb3BlbkFkZFBsYWNlc1BvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG5jb25zdCBvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19hdmF0YXItY292ZXJcIlxyXG4pO1xyXG5cclxuY29uc3QgdHh0RXJyID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZywgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlciBcIjtcclxuXHJcbmV4cG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIG9wZW5FZGl0VXNlclBvcHVwQnRuLFxyXG4gIG9wZW5BZGRQbGFjZXNQb3B1cEJ0bixcclxuICBmb3JtVmFsaWRhdG9ycyxcclxuICBvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwQnRuLFxyXG4gIHR4dEVycixcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgYXBpQ29uZmluZyB9IGZyb20gXCIuLi8uLi9jb25maW5nLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xyXG5pbXBvcnQgc3Bpbm5lckdpZiBmcm9tIFwiLi4vaW1hZ2VzL3Byb2ZpbGUvc3Bpbm5lcl9zdmcuc3ZnXCI7XHJcbmltcG9ydCB7IGdldFJhbmRvbVN0cmluZyB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwQnRuLFxyXG4gIG9wZW5FZGl0VXNlclBvcHVwQnRuLFxyXG4gIG9wZW5BZGRQbGFjZXNQb3B1cEJ0bixcclxuICBmb3JtVmFsaWRhdG9ycyxcclxuICB0eHRFcnIsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgUG9wdXBDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybVwiO1xyXG5cclxuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cIm5hbWVfaW5wdXRcIl0nKTtcclxuY29uc3QgYWJvdXRNZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImFib3V0X21lXCJdJyk7XHJcblxyXG5jb25zdCBpbml0aWFsQnRuVHh0ID0ge1xyXG4gIGVkaXRQb3B1cDogXCJTYXZlXCIsXHJcbiAgYWRkUG9wdXA6IFwiQ3JlYXRlXCIsXHJcbiAgZGVsZXRlQ29uZmlybVBvcHVwOiBcIlllc1wiLFxyXG4gIGNoYW5nZVByb2ZpbGVQaWNQb3B1cDogXCJTYXZlXCIsXHJcbn07XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVQbGFjZUl0ZW0oaXRlbSwgY2FyZEluZm8pIHtcclxuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoXHJcbiAgICBpdGVtLFxyXG4gICAgb3BlbkltZ1BvcHVwLFxyXG4gICAgb3BlblJlbW92ZUl0ZW1Qb3B1cCxcclxuICAgIGhhbmRsZUxpa2VkVG9nZ2xlLFxyXG4gICAgZ2V0VXNlcklkLFxyXG4gICAgY2FyZEluZm8sXHJcbiAgICBcIiNwbGFjZXMtaXRlbS10ZW1wbGF0ZVwiXHJcbiAgKTtcclxuICByZXR1cm4gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncykge1xyXG4gIGNvbnN0IGZvcm1JdGVtcyA9IEFycmF5LmZyb20oXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmZvcm1TZWxlY3RvcilcclxuICApO1xyXG5cclxuICBmb3JtSXRlbXMuZm9yRWFjaCgoZm9ybSkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm0pO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtLm5hbWU7XHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSh7IG5hbWVJbmZvLCBhYm91dE1lSW5mbyB9KSB7XHJcbiAgbmFtZUlucHV0LnZhbHVlID0gbmFtZUluZm87XHJcbiAgYWJvdXRNZUlucHV0LnZhbHVlID0gYWJvdXRNZUluZm87XHJcbn1cclxuZnVuY3Rpb24gb3BlbkNoYW5nZVByb2ZpbGVQb3B1cCgpIHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImZvcm1fY2hhbmdlLXByb2ZpbGUtcGljXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5vcGVuKCk7XHJcbn1cclxuZnVuY3Rpb24gb3BlbkFkZFByb2ZpbGVQb3B1cCgpIHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImZvcm1fYWRkLXBsYWNlXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZFBvcHVwLm9wZW4oKTtcclxufVxyXG5mdW5jdGlvbiBvcGVuRWRpdFByb2ZpbGVQb3B1cCgpIHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImZvcm1fcHJvZmlsZS1lZGl0XCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGVkaXRQb3B1cC5vcGVuKCk7XHJcbiAgZmlsbFByb2ZpbGVGb3JtKHByb2ZpbGVVc2VyLmdldFVzZXJJbmZvKCkpO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5JbWdQb3B1cCh0aXRsZSwgbGluaykge1xyXG4gIG5ld0ltZ1BvcHVwLm9wZW4odGl0bGUsIGxpbmspO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5SZW1vdmVJdGVtUG9wdXAoaWQsIGNhcmRJdGVtKSB7XHJcbiAgZGVsZXRlQ29uZmlybVBvcHVwLm9wZW4oaWQsIGNhcmRJdGVtKTtcclxufVxyXG5mdW5jdGlvbiBnZXRVc2VySWQoKSB7XHJcbiAgcmV0dXJuIHByb2ZpbGVVc2VyLmdldFVzZXJJZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVTdWJtaXRBZGRJdGVtKHsgdGl0bGVfcGxhY2U6IG5hbWUsIGltZ19saW5rOiBsaW5rIH0pIHtcclxuICBhZGRQb3B1cC5oYW5kbGVMb2FkaW5nKCk7XHJcbiAgYXBpXHJcbiAgICAuYWRkTmV3Q2FyZCh7XHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGxpbmssXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBhZGRQb3B1cC5oYW5kbGVMb2FkaW5nKFwiUGxhY2UgYWRkZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcclxuICAgICAgY29uc3QgY2FyZEluZm8gPSB7XHJcbiAgICAgICAgaXNPd25lcjogdHJ1ZSxcclxuICAgICAgICBsaWtlczogW10sXHJcbiAgICAgIH07XHJcbiAgICAgIHJlbmRlckNhcmQocmVzLCBjYXJkSW5mbyk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGFkZFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGFkZFBvcHVwLmhhbmRsZUxvYWRpbmcodHh0RXJyKTtcclxuICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGFkZFBvcHVwLmhhbmRsZUxvYWRpbmcoaW5pdGlhbEJ0blR4dC5hZGRQb3B1cCwgdHJ1ZSk7XHJcbiAgICAgIH0sIDE4MDApO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybShpZCwgaXRlbSkge1xyXG4gIGRlbGV0ZUNvbmZpcm1Qb3B1cC5oYW5kbGVMb2FkaW5nKCk7XHJcbiAgYXBpXHJcbiAgICAub25SZW1vdmVJdGVtKGlkKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBkZWxldGVDb25maXJtUG9wdXAuaGFuZGxlTG9hZGluZyhcIlBsYWNlIHJlbW92ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcclxuICAgICAgaXRlbS5yZW1vdmUoKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlQ29uZmlybVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGRlbGV0ZUNvbmZpcm1Qb3B1cC5oYW5kbGVMb2FkaW5nKHR4dEVycik7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBkZWxldGVDb25maXJtUG9wdXAuaGFuZGxlTG9hZGluZyhcclxuICAgICAgICAgIGluaXRpYWxCdG5UeHQuZGVsZXRlQ29uZmlybVBvcHVwLFxyXG4gICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0sIDEwNTApO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlU3VibWl0RWRpdFByb2ZpbGUoeyBuYW1lX2lucHV0LCBhYm91dF9tZSB9KSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX2FkZC1wbGFjZVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0UG9wdXAuaGFuZGxlTG9hZGluZygpO1xyXG5cclxuICBhcGlcclxuICAgIC5zZXRVc2VySW5mbyh7IG5hbWU6IG5hbWVfaW5wdXQsIGFib3V0OiBhYm91dF9tZSB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBlZGl0UG9wdXAuaGFuZGxlTG9hZGluZyhcIlByb2ZpbGUgZWRpdGVkIHN1Y2Nlc3NmdWxseSFcIik7XHJcbiAgICAgIHByb2ZpbGVVc2VyLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBlZGl0UG9wdXAuaGFuZGxlTG9hZGluZyh0eHRFcnIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgZWRpdFBvcHVwLmhhbmRsZUxvYWRpbmcoaW5pdGlhbEJ0blR4dC5lZGl0UG9wdXAsIHRydWUpO1xyXG4gICAgICB9LCAxODAwKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdFByb2ZpbGVQaWMoeyBpbWdfbGluayB9KSB7XHJcbiAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLmhhbmRsZUxvYWRpbmcoKTtcclxuICBhcGlcclxuICAgIC5vblVwZGF0ZVByb2ZpbGVQaWMoeyBhdmF0YXI6IGltZ19saW5rIH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5oYW5kbGVMb2FkaW5nKFxyXG4gICAgICAgIFwiUHJvZmlsZSBQaWN0dXJlIG1vZGlmaWVkIHN1Y2Nlc3NmdWxseSFcIlxyXG4gICAgICApO1xyXG4gICAgICBwcm9maWxlVXNlci5zZXRQaWN0dXJlUHJvZmlsZShpbWdfbGluayk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjaGFuZ2VQcm9maWxlUGljUG9wdXAuaGFuZGxlTG9hZGluZyh0eHRFcnIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApO1xyXG4gICAgfSlcclxuXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5oYW5kbGVMb2FkaW5nKFxyXG4gICAgICAgICAgaW5pdGlhbEJ0blR4dC5jaGFuZ2VQcm9maWxlUGljUG9wdXAsXHJcbiAgICAgICAgICB0cnVlXHJcbiAgICAgICAgKTtcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlZFRvZ2dsZShpc0xpa2VkLCBpdGVtLCBpZCkge1xyXG4gIGlmICghaXNMaWtlZCkge1xyXG4gICAgYXBpXHJcbiAgICAgIC5hZGRJdGVtTGlrZShpZClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGl0ZW0ub25VcGRhdGVMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFwaVxyXG4gICAgICAucmVtb3ZlSXRlbUxpa2UoaWQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpdGVtLm9uVXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBzZXRMb2FkaW5nSW5pdChzdGF0dXMsIGNhcmRJdGVtc0FyciwgdXNlckluZm8pIHtcclxuICBpZiAoc3RhdHVzKSB7XHJcbiAgICBwcm9maWxlVXNlci5zZXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IFwiTG9hZGluZy4uLlwiLFxyXG4gICAgICBhYm91dDogXCJMb2FkaW5nLi4uXCIsXHJcbiAgICAgIF9pZDogZ2V0UmFuZG9tU3RyaW5nKCksXHJcbiAgICB9KTtcclxuICAgIHByb2ZpbGVVc2VyLnNldFBpY3R1cmVQcm9maWxlKHNwaW5uZXJHaWYpO1xyXG4gICAgY2FyZHNMaXN0LnNldE5ld0l0ZW1saXN0KFtcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6IFwiTG9hZGluZy4uLlwiLFxyXG4gICAgICAgIGxpbms6IHNwaW5uZXJHaWYsXHJcbiAgICAgICAgb3duZXI6IHsgX2lkOiBnZXRSYW5kb21TdHJpbmcoKSB9LFxyXG4gICAgICAgIGxpa2VzOiBbXSxcclxuICAgICAgfSxcclxuICAgIF0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fZ3JpZC1jb250YWluZXJcIikuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIHByb2ZpbGVVc2VyLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogdXNlckluZm8ubmFtZSxcclxuICAgICAgYWJvdXQ6IHVzZXJJbmZvLmFib3V0LFxyXG4gICAgICBfaWQ6IHVzZXJJbmZvLl9pZCxcclxuICAgIH0pO1xyXG4gICAgcHJvZmlsZVVzZXIuc2V0UGljdHVyZVByb2ZpbGUodXNlckluZm8uYXZhdGFyKTtcclxuICAgIGNhcmRzTGlzdC5zZXROZXdJdGVtbGlzdChjYXJkSXRlbXNBcnIpO1xyXG4gICAgb3BlbkVkaXRVc2VyUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5FZGl0UHJvZmlsZVBvcHVwKTtcclxuICAgIG9wZW5BZGRQbGFjZXNQb3B1cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkFkZFByb2ZpbGVQb3B1cCk7XHJcbiAgICBvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwKTtcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gb25Jbml0KCkge1xyXG4gIHNldExvYWRpbmdJbml0KHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmdldEluaXRJbmZvKClcclxuICAgIC50aGVuKChbY2FyZEl0ZW1zQXJyLCB1c2VySW5mb10pID0+IHtcclxuICAgICAgc2V0TG9hZGluZ0luaXQoZmFsc2UsIGNhcmRJdGVtc0FyciwgdXNlckluZm8pO1xyXG4gICAgICBlbmFibGVWYWxpZGF0aW9uKHtcclxuICAgICAgICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwLWJveF9fZm9ybVwiLFxyXG4gICAgICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwLWJveF9faW5wdXRcIixcclxuICAgICAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXAtYm94X19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgICAgICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cC1ib3hfX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIixcclxuICAgICAgICBpbnB1dEVycm9yQ2xhc3M6IFwiLnBvcHVwLWJveF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgICAgIGVycm9yQ2xhc3M6IFwiLnBvcHVwLWJveF9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBzZXRQb3B1cEV2ZW50KCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRQb3B1cEV2ZW50KCkge1xyXG4gIGVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIGFkZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgbmV3SW1nUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBkZWxldGVDb25maXJtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBjaGFuZ2VQcm9maWxlUGljUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxufVxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0sIGNhcmRJbmZvKSB7XHJcbiAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlUGxhY2VJdGVtKGl0ZW0sIGNhcmRJbmZvKSk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICByZW5kZXJlcjogKGRhdGEpID0+IHtcclxuICAgIGNvbnN0IHsgb3duZXIsIGxpa2VzIH0gPSBkYXRhO1xyXG4gICAgY29uc3QgaWQgPSBnZXRVc2VySWQoKTtcclxuICAgIGNvbnN0IGNhcmRJbmZvID0ge1xyXG4gICAgICBpc093bmVyOiBvd25lci5faWQgPT09IGlkLFxyXG4gICAgICBsaWtlcyxcclxuICAgIH07XHJcbiAgICByZW5kZXJDYXJkKGRhdGEsIGNhcmRJbmZvKTtcclxuICB9LFxyXG4gIGNvbnRhaW5lclNlbGVjdG9yOiBcIi5wbGFjZXNfX2dyaWQtY29udGFpbmVyXCIsXHJcbn0pO1xyXG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIi5wb3B1cC1ib3hfdHlwZV9wcm9maWxlLWVkaXRcIixcclxuICBoYW5kbGVTdWJtaXRFZGl0UHJvZmlsZSxcclxuICBcIlNhdmVcIlxyXG4pO1xyXG5cclxuY29uc3QgYWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIi5wb3B1cC1ib3hfdHlwZV9hZGQtaXRlbVwiLFxyXG4gIGhhbmRsZVN1Ym1pdEFkZEl0ZW1cclxuKTtcclxuY29uc3QgbmV3SW1nUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiLnBvcHVwLWJveF90eXBlX2ltZ1wiLFxyXG4gIGltZ1NlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2ltZ1wiLFxyXG4gIGltZ1RpdGxlU2VsZWN0b3I6IFwiLnBvcHVwLWJveF9faW1nLXRpdGxlXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgZGVsZXRlQ29uZmlybVBvcHVwID0gbmV3IFBvcHVwQ29uZmlybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXAtYm94X3R5cGVfY29uZmlybVwiLFxyXG4gIGhhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0sXHJcbn0pO1xyXG5jb25zdCBwcm9maWxlVXNlciA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZUVsbTogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGpvYkVsbTogXCIucHJvZmlsZV9fYWJvdXQtbWVcIixcclxuICBwaWNFbG06IFwiLnByb2ZpbGVfX2F2YXRhci1jb3ZlclwiLFxyXG59KTtcclxuY29uc3QgY2hhbmdlUHJvZmlsZVBpY1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXAtYm94X3R5cGVfY2hhbmdlLXByb2ZpbGUtcGljXCIsXHJcbiAgaGFuZGxlU3VibWl0UHJvZmlsZVBpY1xyXG4pO1xyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaUNvbmZpbmcpO1xyXG5vbkluaXQoKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciwgY29udGFpbmVyU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbCk7XHJcbiAgfVxyXG4gIHNldE5ld0l0ZW1saXN0KGl0ZW1zKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5yZW5kZXJJdGVtcygpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaW1nU2VsZWN0b3IsIGltZ1RpdGxlU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWdFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoaW1nU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdGl0bGVFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoaW1nVGl0bGVTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfc2V0UG9wdXBJbWcoKSB7XHJcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLnRpdGxlO1xyXG4gICAgdGhpcy5faW1nRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1nRWxlbWVudC5hbHQgPSBgYSBwaWN0cnVlIG9mICR7dGhpcy50aXRsZX1gO1xyXG4gIH1cclxuXHJcbiAgb3Blbih0aXRsZSwgbGluaykge1xyXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9zZXRQb3B1cEltZygpO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuaW1wb3J0IHsgbW9kaWZ5RWxlbWVudFRleHQgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybSB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0gPSBoYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cC1ib3hfX3N1Ym1pdC1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX21vZGlmeUVsZW1lbnRUZXh0ID0gbW9kaWZ5RWxlbWVudFRleHQ7XHJcbiAgfVxyXG4gIG9wZW4oaWQsIGVsZW1lbnQpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgdGhpcy5faWQgPSBpZDtcclxuICB9XHJcbiAgaGFuZGxlTG9hZGluZyh0eHQgPSBcIlNhdmluZy4uLlwiLCBpc0RvbmUgPSBmYWxzZSkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuRWxlbWVudC5kaXNhYmxlZCA9ICFpc0RvbmUgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB0aGlzLl9tb2RpZnlFbGVtZW50VGV4dCh0aGlzLl9zdWJtaXRCdG5FbGVtZW50LCB0eHQpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNvbmZpcm1TdWJtaXQgPSAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybSh0aGlzLl9pZCwgdGhpcy5fZWxlbWVudCk7XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG5FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDb25maXJtU3VibWl0KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVFbG0sIGpvYkVsbSwgcGljRWxtIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVFbG0pO1xyXG4gICAgdGhpcy5fam9iRWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JFbG0pO1xyXG4gICAgdGhpcy5fcGljRWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwaWNFbG0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgX2lkIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbG0udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iRWxtLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSBfaWQ7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZUluZm86IHRoaXMuX25hbWVFbG0udGV4dENvbnRlbnQsXHJcbiAgICAgIGFib3V0TWVJbmZvOiB0aGlzLl9qb2JFbG0udGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuICBnZXRVc2VySWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlcklkO1xyXG4gIH1cclxuICBzZXRQaWN0dXJlUHJvZmlsZShwaWNTcmMpIHtcclxuICAgIHRoaXMuX3BpY0VsbS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtwaWNTcmN9XCIpYDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcclxuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgfVxyXG4gIF9vbkh0dHBSZXF1ZXN0KHVybCwgbWV0aG9kLCBkYXRhKSB7XHJcbiAgICBjb25zdCBmdWxsVXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7dXJsfWA7XHJcbiAgICByZXR1cm4gZmV0Y2goZnVsbFVybCwge1xyXG4gICAgICBtZXRob2QsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGdldEluaXRJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLl9nZXRJbml0aWFsQ2FyZHMoKSwgdGhpcy5fZ2V0VXNlckluZm8oKV0pO1xyXG4gIH1cclxuICBfZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChcInVzZXJzL21lXCIsIFwiR0VUXCIpO1xyXG4gIH1cclxuICBfZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoXCJjYXJkc1wiLCBcIkdFVFwiKTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoXCJ1c2Vycy9tZVwiLCBcIlBBVENIXCIsIHsgbmFtZSwgYWJvdXQgfSk7XHJcbiAgfVxyXG4gIGFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KFwiY2FyZHNcIiwgXCJQT1NUXCIsIHsgbmFtZSwgbGluayB9KTtcclxuICB9XHJcbiAgb25SZW1vdmVJdGVtKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChgY2FyZHMvJHtpZH1gLCBcIkRFTEVURVwiKTtcclxuICB9XHJcbiAgYWRkSXRlbUxpa2UoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KGBjYXJkcy9saWtlcy8ke2lkfWAsIFwiUFVUXCIpO1xyXG4gIH1cclxuICByZW1vdmVJdGVtTGlrZShpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoYGNhcmRzL2xpa2VzLyR7aWR9YCwgXCJERUxFVEVcIik7XHJcbiAgfVxyXG4gIG9uVXBkYXRlUHJvZmlsZVBpYyh7IGF2YXRhciB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChcInVzZXJzL21lL2F2YXRhclwiLCBcIlBBVENIXCIsIHsgYXZhdGFyIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwIiwiY29uc29sZSIsImxvZyIsIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsInNldHRpbmdzIiwiZm9ybSIsInRoaXMiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2Zvcm0iLCJfc2V0Rm9ybUxpc3RlbmVycyIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2dldEVsZW1lbnRUeHQiLCJ0eXBlIiwiaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3JlbW92ZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJ2YWxpZGl0eSIsInZhbGlkIiwicmVzZXRWYWxpZGF0aW9uIiwicmVzZXQiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJzb21lIiwiaW5wdXQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZ2V0UmFuZG9tU3RyaW5nIiwibGVuZ3RoIiwiZ2V0UmFuZG9tSW50IiwiY2hhcnMiLCJzcGxpdCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInN0ciIsImkiLCJEYXRlIiwibm93IiwibWluIiwibWF4IiwibW9kaWZ5RWxlbWVudFRleHQiLCJlbGVtZW50IiwidHh0IiwiQ2FyZCIsImhhbmRsZUltYWdlQ2xpY2siLCJvcGVuUmVtb3ZlSXRlbVBvcHVwIiwiaGFuZGxlTGlrZWRUb2dnbGUiLCJnZXRVc2VySWQiLCJjYXJkU2VsZWN0b3IiLCJuYW1lIiwibGluayIsIl9pZCIsIm93bmVyIiwibGlrZXMiLCJpc093bmVyIiwiX3BsYWNlTGlrZUFtb3VudCIsIl9saWtlcyIsIl9pc0xpa2VkIiwiX3BsYWNlTGlrZUJ0biIsIl9yZW5kZXJMaWtlcyIsIl9uYW1lIiwiX2xpbmsiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9nZXRVc2VySWQiLCJfb3BlblJlbW92ZUl0ZW1Qb3B1cCIsIl9jYXJkU2VsZWN0b3IiLCJfaXNPd25lciIsIl9oYW5kbGVMaWtlZFRvZ2dsZSIsIl9vd25lciIsImxpa2UiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfaGFuZGxlVG9nZ2xlTGlrZWRCdG4iLCJzdG9wUHJvcGFnYXRpb24iLCJfaGFuZGxlUmVtb3ZlSXRlbSIsIl9jYXJkSXRlbSIsIl9zZXRFdmVudExpc3RlbmVycyIsImdlbmVyYXRlQ2FyZCIsIl9wbGFjZUltZyIsIl9wbGFjZVJlbW92ZUJ0biIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiYWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdEZyb20iLCJzdXBlciIsIl9oYW5kbGVTdWJtaXRGcm9tIiwiX3JldHVybklucHV0VmFsT2JqIiwiX2Zvcm1FbGVtZW50IiwiX2Zvcm1CdG4iLCJfbW9kaWZ5RWxlbWVudFRleHQiLCJoYW5kbGVMb2FkaW5nIiwiaXNEb25lIiwidmFsSW5wdXRPYmoiLCJpdGVtIiwidmFsdWUiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsImZvcm1WYWxpZGF0b3JzIiwib3BlbkVkaXRVc2VyUG9wdXBCdG4iLCJvcGVuQWRkUGxhY2VzUG9wdXBCdG4iLCJvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwQnRuIiwidHh0RXJyIiwibmFtZUlucHV0IiwiYWJvdXRNZUlucHV0Iiwib3BlbkNoYW5nZVByb2ZpbGVQb3B1cCIsImNoYW5nZVByb2ZpbGVQaWNQb3B1cCIsIm9wZW5BZGRQcm9maWxlUG9wdXAiLCJhZGRQb3B1cCIsIm9wZW5FZGl0UHJvZmlsZVBvcHVwIiwiZWRpdFBvcHVwIiwibmFtZUluZm8iLCJhYm91dE1lSW5mbyIsImZpbGxQcm9maWxlRm9ybSIsInByb2ZpbGVVc2VyIiwiZ2V0VXNlckluZm8iLCJvcGVuSW1nUG9wdXAiLCJ0aXRsZSIsIm5ld0ltZ1BvcHVwIiwiY2FyZEl0ZW0iLCJkZWxldGVDb25maXJtUG9wdXAiLCJpc0xpa2VkIiwiYXBpIiwicmVtb3ZlSXRlbUxpa2UiLCJ0aGVuIiwicmVzIiwib25VcGRhdGVMaWtlcyIsImNhdGNoIiwiZXJyIiwiYWRkSXRlbUxpa2UiLCJzZXRMb2FkaW5nSW5pdCIsInN0YXR1cyIsImNhcmRJdGVtc0FyciIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJhYm91dCIsInNldFBpY3R1cmVQcm9maWxlIiwic3Bpbm5lckdpZiIsImNhcmRzTGlzdCIsInNldE5ld0l0ZW1saXN0IiwiaW5uZXJIVE1MIiwiYXZhdGFyIiwicmVuZGVyQ2FyZCIsImNhcmRJbmZvIiwiYWRkSXRlbSIsImNyZWF0ZVBsYWNlSXRlbSIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJfaXRlbXMiLCJlbCIsInByZXBlbmQiLCJpdGVtcyIsImRhdGEiLCJuYW1lX2lucHV0IiwiYWJvdXRfbWUiLCJzZXRUaW1lb3V0IiwiZmluYWxseSIsInRpdGxlX3BsYWNlIiwiaW1nX2xpbmsiLCJhZGROZXdDYXJkIiwiaW1nU2VsZWN0b3IiLCJpbWdUaXRsZVNlbGVjdG9yIiwiX2ltZ0VsZW1lbnQiLCJfdGl0bGVFbGVtZW50IiwiX3NldFBvcHVwSW1nIiwic3JjIiwiaGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybSIsIl9oYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtIiwiX2VsZW1lbnQiLCJfc3VibWl0QnRuRWxlbWVudCIsIl9oYW5kbGVDb25maXJtU3VibWl0Iiwib25SZW1vdmVJdGVtIiwibmFtZUVsbSIsImpvYkVsbSIsInBpY0VsbSIsIl9uYW1lRWxtIiwiX2pvYkVsbSIsIl9waWNFbG0iLCJfdXNlcklkIiwicGljU3JjIiwib25VcGRhdGVQcm9maWxlUGljIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfb25IdHRwUmVxdWVzdCIsInVybCIsIm1ldGhvZCIsImZ1bGxVcmwiLCJmZXRjaCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImdldEluaXRJbmZvIiwiYWxsIiwiX2dldEluaXRpYWxDYXJkcyIsIl9nZXRVc2VySW5mbyIsImF1dGhvcml6YXRpb24iLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=