!function(){"use strict";var e={855:function(e,t,n){e.exports=n.p+"images/spinner_svg.dc4086388e55820fbae1.svg"}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.p="",function(){class e{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._errorClass=e.errorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._submitButtonSelector=e.submitButtonSelector,this._form=t}_setFormListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_getElementTxt(e){return"url"===e.type?"".concat(e.type,"-input"):e.id}_showInputError(e){const t=this._form.querySelector(".".concat(this._getElementTxt(e),"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_removeInputError(e){const t=this._form.querySelector(".".concat(this._getElementTxt(e),"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._removeInputError(e):this._showInputError(e)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._removeInputError(e)})),this._form.reset(),this._toggleButtonState()}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}enableValidation(){this._setFormListeners(),this._form.addEventListener("submit",(e=>e.preventDefault()))}}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i(),t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));let n="";for(let i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n+=Date.now(),n+Date.now()}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;return Math.floor(Math.random()*(t-e+1))+e}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";e.textContent=t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r{constructor(e,n,i,s,r,l,a){var c=this;let{name:u,link:_,_id:h,owner:m}=e,{likes:d,isOwner:p}=l;o(this,"_renderLikes",(()=>{this._placeLikeAmount.textContent=this._likes.length,this._isLiked?this._placeLikeBtn.classList.add("places__like-btn__active"):this._placeLikeBtn.classList.remove("places__like-btn__active")})),o(this,"onUpdateLikes",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;t||c._likes===[]||(c._likes=e),c._isLikedByCurrUser(),c._renderLikes()})),o(this,"_isLikedByCurrUser",(()=>{const e=this._getUserId();this._isLiked=this._likes.find((t=>t._id===e))||!1})),this._name=u,this._link=_,this._handleImageClick=n,this._getUserId=r,this._openRemoveItemPopup=i,this._cardSelector=a,this._likes=d||[],this._isOwner=p||!1,this._id=h||t(),this._handleLikedToggle=s,this._owner=m}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".places__item").cloneNode(!0)}_handleToggleLikedBtn(e){e.stopPropagation(),this._handleLikedToggle(this._isLiked,this,this._id)}_handleRemoveItem(e){e.stopPropagation(),this._openRemoveItemPopup(this._id,this._cardItem)}_setEventListeners(){this._cardItem.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)})),this._placeLikeBtn.addEventListener("click",(e=>{this._handleToggleLikedBtn(e)})),this._cardItem.querySelector(".places__remove-btn").addEventListener("click",(e=>{this._handleRemoveItem(e)}))}generateCard(){return this._cardItem=this._getTemplate(),this._placeImg=this._cardItem.querySelector(".places__img"),this._placeLikeBtn=this._cardItem.querySelector(".places__like-btn"),this._placeLikeAmount=this._cardItem.querySelector(".places__like-counter"),this._placeRemoveBtn=this._cardItem.querySelector(".places__remove-btn"),this.onUpdateLikes([],!0),"Loading..."!==this._name&&"images/spinner_svg.dc4086388e55820fbae1.svg"!==this._link&&this._setEventListeners(),this._isOwner||this._placeRemoveBtn.remove(),this._placeImg.style.backgroundImage="url(".concat(this._link,")"),this._placeImg.alt="a photo of ".concat(this._name),this._cardItem.querySelector(".places__name").textContent="".concat(this._name),this._cardItem}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a{constructor(e){l(this,"_handleEscClose",(e=>{"Escape"==e.key&&this.close()})),l(this,"_handleContextMenu",(e=>{e.preventDefault()})),this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("popup-box_visible"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup-box_visible"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup-box_visible")||e.target.classList.contains("popup-box__close-button"))&&this.close()}))}}class c extends a{constructor(e,t){var n,i;super(e),i=e=>{e.preventDefault(),this._handleSubmitFrom(this._returnInputValObj())},(n="_handleFormSubmit")in this?Object.defineProperty(this,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[n]=i,this._handleSubmitFrom=t,this._formElement=this._popupElement.querySelector(".popup-box__form"),this._formBtn=this._formElement.querySelector(".popup-box__submit-button"),this._inputList=[...this._formElement.querySelectorAll(".popup-box__input")],this._modifyElementText=s}handleLoading(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Saving...",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._formBtn.disabled=!t,this._modifyElementText(this._formBtn,e)}_returnInputValObj(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}close(){super.close(),this._formElement.reset()}setEventListeners(){this._formElement.addEventListener("submit",this._handleFormSubmit),super.setEventListeners()}}var u=n(855);const _={},h=document.querySelector(".profile__edit-btn"),m=document.querySelector(".profile__add-btn"),d=document.querySelector(".profile__avatar-cover"),p="Something went wrong, please try again later ",f=document.querySelector('input[name="name_input"]'),g=document.querySelector('input[name="about_me"]');function v(){_["form_change-profile-pic"].resetValidation(),U.open()}function b(){_["form_add-place"].resetValidation(),w.open()}function E(){_["form_profile-edit"].resetValidation(),q.open(),function(e){let{nameInfo:t,aboutMeInfo:n}=e;f.value=t,g.value=n}(B.getUserInfo())}function L(e,t){P.open(e,t)}function S(e,t){T.open(e,t)}function I(){return B.getUserId()}function k(e,t,n){e?R.removeItemLike(n).then((e=>{t.onUpdateLikes(e.likes)})).catch((e=>console.log("Error: ".concat(e)))):R.addItemLike(n).then((e=>{t.onUpdateLikes(e.likes)})).catch((e=>console.log("Error: ".concat(e))))}function y(e,n,i){e?(B.setUserInfo({name:"Loading...",about:"Loading...",_id:t()}),B.setPictureProfile(u),x.setNewItemlist([{name:"Loading...",link:u,owner:{_id:t()},likes:[]}])):(document.querySelector(".places__grid-container").innerHTML="",B.setUserInfo({name:i.name,about:i.about,_id:i._id}),B.setPictureProfile(i.avatar),x.setNewItemlist(n),h.addEventListener("click",E),m.addEventListener("click",b),d.addEventListener("click",v))}function C(e,t){x.addItem(function(e,t){return new r(e,L,S,k,I,t,"#places-item-template").generateCard()}(e,t))}const x=new class{constructor(e){let{renderer:t,containerSelector:n}=e;this._renderer=t,this._container=document.querySelector(n)}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}setNewItemlist(e){this._items=e,this.renderItems()}}({renderer:e=>{const{owner:t,likes:n}=e,i=I();C(e,{isOwner:t._id===i,likes:n})},containerSelector:".places__grid-container"}),q=new c(".popup-box_type_profile-edit",(function(e){let{name_input:t,about_me:n}=e;_["form_add-place"].resetValidation(),q.handleLoading(),R.setUserInfo({name:t,about:n}).then((e=>{q.handleLoading("Profile edited successfully!"),B.setUserInfo(e),setTimeout((()=>{q.close()}),1e3)})).catch((e=>{q.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{q.handleLoading("Save",!0)}),1800)}))}),"Save"),w=new c(".popup-box_type_add-item",(function(e){let{title_place:t,img_link:n}=e;w.handleLoading(),R.addNewCard({name:t,link:n}).then((e=>{w.handleLoading("Place added successfully!"),C(e,{isOwner:!0,likes:[]}),setTimeout((()=>{w.close()}),1e3)})).catch((e=>{w.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{w.handleLoading("Create",!0)}),1800)}))})),P=new class extends a{constructor(e){let{popupSelector:t,imgSelector:n,imgTitleSelector:i}=e;super(t),this._imgElement=this._popupElement.querySelector(n),this._titleElement=this._popupElement.querySelector(i)}_setPopupImg(){this._titleElement.textContent=this.title,this._imgElement.src=this._link,this._imgElement.alt="a pictrue of ".concat(this.title)}open(e,t){this.title=e,this._link=t,this._setPopupImg(),super.open()}}({popupSelector:".popup-box_type_img",imgSelector:".popup-box__img",imgTitleSelector:".popup-box__img-title"}),T=new class extends a{constructor(e){let{popupSelector:t,handleSubmitRemoveConfirm:n}=e;var i,o;super(t),o=e=>{e.preventDefault(),this._handleSubmitRemoveConfirm(this._id,this._element)},(i="_handleConfirmSubmit")in this?Object.defineProperty(this,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[i]=o,this._handleSubmitRemoveConfirm=n,this._submitBtnElement=this._popupElement.querySelector(".popup-box__submit-button"),this._modifyElementText=s}open(e,t){super.open(),this._element=t,this._id=e}handleLoading(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Saving...",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._submitBtnElement.disabled=!t,this._modifyElementText(this._submitBtnElement,e)}setEventListeners(){this._submitBtnElement.addEventListener("click",this._handleConfirmSubmit),super.setEventListeners()}}({popupSelector:".popup-box_type_confirm",handleSubmitRemoveConfirm:function(e,t){T.handleLoading(),R.onRemoveItem(e).then((()=>{T.handleLoading("Place removed successfully!"),t.remove(),setTimeout((()=>{T.close()}),1e3)})).catch((e=>{T.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{T.handleLoading("Yes",!0)}),1050)}))}}),B=new class{constructor(e){let{nameElm:t,jobElm:n,picElm:i}=e;this._nameElm=document.querySelector(t),this._jobElm=document.querySelector(n),this._picElm=document.querySelector(i)}setUserInfo(e){let{name:t,about:n,_id:i}=e;this._nameElm.textContent=t,this._jobElm.textContent=n,this._userId=i}getUserInfo(){return{nameInfo:this._nameElm.textContent,aboutMeInfo:this._jobElm.textContent}}getUserId(){return this._userId}setPictureProfile(e){this._picElm.style.backgroundImage='url("'.concat(e,'")')}}({nameElm:".profile__name",jobElm:".profile__about-me",picElm:".profile__avatar-cover"}),U=new c(".popup-box_type_change-profile-pic",(function(e){let{img_link:t}=e;U.handleLoading(),R.onUpdateProfilePic({avatar:t}).then((()=>{U.handleLoading("Profile Picture modified successfully!"),B.setPictureProfile(t),setTimeout((()=>{U.close()}),1e3)})).catch((e=>{U.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{U.handleLoading("Save",!0)}),1e3)}))})),R=new class{constructor(e){let{baseUrl:t,headers:n}=e;this.headers=n,this.baseUrl=t}_onHttpRequest(e,t,n){const i="".concat(this.baseUrl).concat(e);return fetch(i,{method:t,headers:this.headers,body:JSON.stringify(n)}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}getInitInfo(){return Promise.all([this._getInitialCards(),this._getUserInfo()])}_getUserInfo(){return this._onHttpRequest("users/me","GET")}_getInitialCards(){return this._onHttpRequest("cards","GET")}setUserInfo(e){let{name:t,about:n}=e;return this._onHttpRequest("users/me","PATCH",{name:t,about:n})}addNewCard(e){let{name:t,link:n}=e;return this._onHttpRequest("cards","POST",{name:t,link:n})}onRemoveItem(e){return this._onHttpRequest("cards/".concat(e),"DELETE")}addItemLike(e){return this._onHttpRequest("cards/likes/".concat(e),"PUT")}removeItemLike(e){return this._onHttpRequest("cards/likes/".concat(e),"DELETE")}onUpdateProfilePic(e){let{avatar:t}=e;return this._onHttpRequest("users/me/avatar","PATCH",{avatar:t})}}({baseUrl:"https://around.nomoreparties.co/v1/group-12/",headers:{authorization:"035a3e80-0d3f-421b-b4fa-7f406e49ad5f","Content-Type":"application/json"}});y(!0),R.getInitInfo().then((t=>{let[n,i]=t;var s;y(!1,n,i),s={formSelector:".popup-box__form",inputSelector:".popup-box__input",submitButtonSelector:".popup-box__submit-button",inactiveButtonClass:"popup-box__submit-button_inactive",inputErrorClass:".popup-box__input_type_error",errorClass:".popup-box__input-error_active"},Array.from(document.querySelectorAll(s.formSelector)).forEach((t=>{const n=new e(s,t),i=t.name;_[i]=n,n.enableValidation()})),q.setEventListeners(),w.setEventListeners(),P.setEventListeners(),T.setEventListeners(),U.setEventListeners()})).catch((e=>console.log("Error: ".concat(e))))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VjJCLEVBQVMzQixvQkFDVHFDLEVBQVlyQyxvQkFDWnVDLEVBQW1CdkMsb0JBQ25CeUIsRUFBc0J6Qix1QkFSbkI2QyxPQUFPQyxHQUFRQyxRQUFRQyxJQUFSLGlCQUFzQkYsTSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vY29uZmluZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm0pIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHNldHRpbmdzLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICB9XHJcbiAgX3NldEZvcm1MaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF9nZXRFbGVtZW50VHh0KGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgdHh0ID1cclxuICAgICAgaW5wdXRFbGVtZW50LnR5cGUgPT09IFwidXJsXCJcclxuICAgICAgICA/IGAke2lucHV0RWxlbWVudC50eXBlfS1pbnB1dGBcclxuICAgICAgICA6IGlucHV0RWxlbWVudC5pZDtcclxuICAgIHJldHVybiB0eHQ7XHJcbiAgfVxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke3RoaXMuX2dldEVsZW1lbnRUeHQoaW5wdXRFbGVtZW50KX0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuICBfcmVtb3ZlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke3RoaXMuX2dldEVsZW1lbnRUeHQoaW5wdXRFbGVtZW50KX0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3JlbW92ZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5fcmVtb3ZlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBjb25zdCBidG5Gb3JtRWxtID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWJveF9fc3VibWl0LWJ1dHRvblwiKTtcclxuICAgIC8vIGJ0bkZvcm1FbG0uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgLy8gYnRuRm9ybUVsbS5jbGFzc0xpc3QuYWRkKFwicG9wdXAtYm94X19zdWJtaXQtYnV0dG9uX2luYWN0aXZlXCIpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEZvcm1MaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICB9XHJcbn1cclxuIiwiZnVuY3Rpb24gZ2V0UmFuZG9tU3RyaW5nKGxlbmd0aCA9IGdldFJhbmRvbUludCgpKSB7XHJcbiAgbGV0IGNoYXJzID1cclxuICAgIFwiMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpa2xtbm9wcXJzdHV2d3h5elwiLnNwbGl0KFwiXCIpO1xyXG5cclxuICBpZiAoIWxlbmd0aCkge1xyXG4gICAgbGVuZ3RoID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKTtcclxuICB9XHJcblxyXG4gIGxldCBzdHIgPSBcIlwiO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgIHN0ciArPSBjaGFyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpXTtcclxuICB9XHJcbiAgc3RyICs9IERhdGUubm93KCk7XHJcbiAgcmV0dXJuIHN0ciArIERhdGUubm93KCk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbiA9IDEwMCwgbWF4ID0gMTUwKSB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcbn1cclxuZnVuY3Rpb24gbW9kaWZ5RWxlbWVudFRleHQoZWxlbWVudCwgdHh0ID0gXCJTYXZpbmcuLi5cIikge1xyXG4gIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0eHQ7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGdldFJhbmRvbVN0cmluZywgbW9kaWZ5RWxlbWVudFRleHQgfTtcclxuIiwiaW1wb3J0IHsgZ2V0UmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcbmV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgbmFtZSwgbGluaywgX2lkLCBvd25lciB9LFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIG9wZW5SZW1vdmVJdGVtUG9wdXAsXHJcbiAgICBoYW5kbGVMaWtlZFRvZ2dsZSxcclxuICAgIGdldFVzZXJJZCxcclxuICAgIHsgbGlrZXMsIGlzT3duZXIgfSxcclxuICAgIGNhcmRTZWxlY3RvclxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5fZ2V0VXNlcklkID0gZ2V0VXNlcklkO1xyXG4gICAgdGhpcy5fb3BlblJlbW92ZUl0ZW1Qb3B1cCA9IG9wZW5SZW1vdmVJdGVtUG9wdXA7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzIHx8IFtdO1xyXG4gICAgdGhpcy5faXNPd25lciA9IGlzT3duZXIgfHwgZmFsc2U7XHJcbiAgICB0aGlzLl9pZCA9IF9pZCB8fCBnZXRSYW5kb21TdHJpbmcoKTtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VkVG9nZ2xlID0gaGFuZGxlTGlrZWRUb2dnbGU7XHJcbiAgICB0aGlzLl9vd25lciA9IG93bmVyO1xyXG4gIH1cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBwbGFjZUl0ZW1UZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2NhcmRTZWxlY3RvclxyXG4gICAgKS5jb250ZW50O1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBwbGFjZUl0ZW1UZW1wbGF0ZVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2l0ZW1cIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG4gIF9oYW5kbGVUb2dnbGVMaWtlZEJ0bihlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZWRUb2dnbGUodGhpcy5faXNMaWtlZCwgdGhpcywgdGhpcy5faWQpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVJlbW92ZUl0ZW0oZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuX29wZW5SZW1vdmVJdGVtUG9wdXAodGhpcy5faWQsIHRoaXMuX2NhcmRJdGVtKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3BsYWNlTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlVG9nZ2xlTGlrZWRCdG4oZSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRJdGVtXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fcmVtb3ZlLWJ0blwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlSXRlbShlKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIF9yZW5kZXJMaWtlcyA9ICgpID0+IHtcclxuICAgIHRoaXMuX3BsYWNlTGlrZUFtb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2lzTGlrZWRcclxuICAgICAgPyB0aGlzLl9wbGFjZUxpa2VCdG4uY2xhc3NMaXN0LmFkZChcInBsYWNlc19fbGlrZS1idG5fX2FjdGl2ZVwiKVxyXG4gICAgICA6IHRoaXMuX3BsYWNlTGlrZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwicGxhY2VzX19saWtlLWJ0bl9fYWN0aXZlXCIpO1xyXG4gIH07XHJcbiAgb25VcGRhdGVMaWtlcyA9IChsaWtlcyA9IFtdLCBpc0luaXQpID0+IHtcclxuICAgIGlmICghaXNJbml0ICYmIHRoaXMuX2xpa2VzICE9PSBbXSkgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMuX2lzTGlrZWRCeUN1cnJVc2VyKCk7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gIH07XHJcbiAgX2lzTGlrZWRCeUN1cnJVc2VyID0gKCkgPT4ge1xyXG4gICAgY29uc3QgaWQgPSB0aGlzLl9nZXRVc2VySWQoKTtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSB0aGlzLl9saWtlcy5maW5kKChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gaWQpIHx8IGZhbHNlO1xyXG4gIH07XHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEl0ZW0gPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fcGxhY2VJbWcgPSB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19faW1nXCIpO1xyXG4gICAgdGhpcy5fcGxhY2VMaWtlQnRuID0gdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2xpa2UtYnRuXCIpO1xyXG4gICAgdGhpcy5fcGxhY2VMaWtlQW1vdW50ID0gdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucGxhY2VzX19saWtlLWNvdW50ZXJcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3BsYWNlUmVtb3ZlQnRuID0gdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX3JlbW92ZS1idG5cIik7XHJcbiAgICB0aGlzLm9uVXBkYXRlTGlrZXMoW10sIHRydWUpO1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLl9uYW1lICE9PSBcIkxvYWRpbmcuLi5cIiAmJlxyXG4gICAgICB0aGlzLl9saW5rICE9PSBcImltYWdlcy9zcGlubmVyX3N2Zy5kYzQwODYzODhlNTU4MjBmYmFlMS5zdmdcIlxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuX2lzT3duZXIpIHtcclxuICAgICAgdGhpcy5fcGxhY2VSZW1vdmVCdG4ucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fcGxhY2VJbWcuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWA7XHJcbiAgICB0aGlzLl9wbGFjZUltZy5hbHQgPSBgYSBwaG90byBvZiAke3RoaXMuX25hbWV9YDtcclxuICAgIHRoaXMuX2NhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19uYW1lXCIpLnRleHRDb250ZW50ID0gYCR7dGhpcy5fbmFtZX1gO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRJdGVtO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBfaGFuZGxlQ29udGV4dE1lbnUgPSAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH07XHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXAtYm94X3Zpc2libGVcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXAtYm94X3Zpc2libGVcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cC1ib3hfdmlzaWJsZVwiKSB8fFxyXG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwLWJveF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgeyBtb2RpZnlFbGVtZW50VGV4dCB9IGZyb20gXCIuLi91dGlscy91dGlsc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGcm9tKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZyb20gPSBoYW5kbGVTdWJtaXRGcm9tO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1ib3hfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9mb3JtQnRuID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucG9wdXAtYm94X19zdWJtaXQtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwLWJveF9faW5wdXRcIiksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5fbW9kaWZ5RWxlbWVudFRleHQgPSBtb2RpZnlFbGVtZW50VGV4dDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVGb3JtU3VibWl0ID0gKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZyb20odGhpcy5fcmV0dXJuSW5wdXRWYWxPYmooKSk7XHJcbiAgfTtcclxuICBoYW5kbGVMb2FkaW5nKHR4dCA9IFwiU2F2aW5nLi4uXCIsIGlzRG9uZSA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLl9mb3JtQnRuLmRpc2FibGVkID0gIWlzRG9uZSA/IHRydWUgOiBmYWxzZTtcclxuICAgIHRoaXMuX21vZGlmeUVsZW1lbnRUZXh0KHRoaXMuX2Zvcm1CdG4sIHR4dCk7XHJcbiAgfVxyXG5cclxuICBfcmV0dXJuSW5wdXRWYWxPYmooKSB7XHJcbiAgICBjb25zdCB2YWxJbnB1dE9iaiA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdmFsSW5wdXRPYmpbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2YWxJbnB1dE9iajtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCZWVyc2hlYmEgVHVya2lzaCByYWlsd2F5IHN0YXRpb25cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy90aHVtYi9kL2RlLyVENyU5RSVENyVBQSVENyU5NyVENyU5RF8lRDclQUElRDclOTclRDclQTAlRDclQUFfJUQ3JTk0JUQ3JUE4JUQ3JTlCJUQ3JTkxJUQ3JUFBXyVENyU5NCVENyU5OCVENyU5NSVENyVBOCVENyVBNyVENyU5OSVENyVBQV8lRDclOTElRDclOTElRDclOTAlRDclQThfJUQ3JUE5JUQ3JTkxJUQ3JUEyLmpwZy8xMjgwcHgtJUQ3JTlFJUQ3JUFBJUQ3JTk3JUQ3JTlEXyVENyVBQSVENyU5NyVENyVBMCVENyVBQV8lRDclOTQlRDclQTglRDclOUIlRDclOTElRDclQUFfJUQ3JTk0JUQ3JTk4JUQ3JTk1JUQ3JUE4JUQ3JUE3JUQ3JTk5JUQ3JUFBXyVENyU5MSVENyU5MSVENyU5MCVENyVBOF8lRDclQTklRDclOTElRDclQTIuanBnXCIsXHJcbiAgfSxcclxuXTtcclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmNvbnN0IG9wZW5FZGl0VXNlclBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcclxuY29uc3Qgb3BlbkFkZFBsYWNlc1BvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG5jb25zdCBvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19hdmF0YXItY292ZXJcIlxyXG4pO1xyXG5cclxuY29uc3QgdHh0RXJyID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZywgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlciBcIjtcclxuXHJcbmV4cG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIG9wZW5FZGl0VXNlclBvcHVwQnRuLFxyXG4gIG9wZW5BZGRQbGFjZXNQb3B1cEJ0bixcclxuICBmb3JtVmFsaWRhdG9ycyxcclxuICBvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwQnRuLFxyXG4gIHR4dEVycixcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgYXBpQ29uZmluZyB9IGZyb20gXCIuLi8uLi9jb25maW5nLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xyXG5pbXBvcnQgc3Bpbm5lckdpZiBmcm9tIFwiLi4vaW1hZ2VzL3Byb2ZpbGUvc3Bpbm5lcl9zdmcuc3ZnXCI7XHJcbmltcG9ydCB7IGdldFJhbmRvbVN0cmluZyB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwQnRuLFxyXG4gIG9wZW5FZGl0VXNlclBvcHVwQnRuLFxyXG4gIG9wZW5BZGRQbGFjZXNQb3B1cEJ0bixcclxuICBmb3JtVmFsaWRhdG9ycyxcclxuICB0eHRFcnIsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgUG9wdXBDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybVwiO1xyXG5cclxuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cIm5hbWVfaW5wdXRcIl0nKTtcclxuY29uc3QgYWJvdXRNZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImFib3V0X21lXCJdJyk7XHJcblxyXG5jb25zdCBpbml0aWFsQnRuVHh0ID0ge1xyXG4gIGVkaXRQb3B1cDogXCJTYXZlXCIsXHJcbiAgYWRkUG9wdXA6IFwiQ3JlYXRlXCIsXHJcbiAgZGVsZXRlQ29uZmlybVBvcHVwOiBcIlllc1wiLFxyXG4gIGNoYW5nZVByb2ZpbGVQaWNQb3B1cDogXCJTYXZlXCIsXHJcbn07XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVQbGFjZUl0ZW0oaXRlbSwgY2FyZEluZm8pIHtcclxuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoXHJcbiAgICBpdGVtLFxyXG4gICAgb3BlbkltZ1BvcHVwLFxyXG4gICAgb3BlblJlbW92ZUl0ZW1Qb3B1cCxcclxuICAgIGhhbmRsZUxpa2VkVG9nZ2xlLFxyXG4gICAgZ2V0VXNlcklkLFxyXG4gICAgY2FyZEluZm8sXHJcbiAgICBcIiNwbGFjZXMtaXRlbS10ZW1wbGF0ZVwiXHJcbiAgKTtcclxuICByZXR1cm4gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncykge1xyXG4gIGNvbnN0IGZvcm1JdGVtcyA9IEFycmF5LmZyb20oXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmZvcm1TZWxlY3RvcilcclxuICApO1xyXG5cclxuICBmb3JtSXRlbXMuZm9yRWFjaCgoZm9ybSkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm0pO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtLm5hbWU7XHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSh7IG5hbWVJbmZvLCBhYm91dE1lSW5mbyB9KSB7XHJcbiAgbmFtZUlucHV0LnZhbHVlID0gbmFtZUluZm87XHJcbiAgYWJvdXRNZUlucHV0LnZhbHVlID0gYWJvdXRNZUluZm87XHJcbn1cclxuZnVuY3Rpb24gb3BlbkNoYW5nZVByb2ZpbGVQb3B1cCgpIHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImZvcm1fY2hhbmdlLXByb2ZpbGUtcGljXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5vcGVuKCk7XHJcbn1cclxuZnVuY3Rpb24gb3BlbkFkZFByb2ZpbGVQb3B1cCgpIHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImZvcm1fYWRkLXBsYWNlXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZFBvcHVwLm9wZW4oKTtcclxufVxyXG5mdW5jdGlvbiBvcGVuRWRpdFByb2ZpbGVQb3B1cCgpIHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImZvcm1fcHJvZmlsZS1lZGl0XCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGVkaXRQb3B1cC5vcGVuKCk7XHJcbiAgZmlsbFByb2ZpbGVGb3JtKHByb2ZpbGVVc2VyLmdldFVzZXJJbmZvKCkpO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5JbWdQb3B1cCh0aXRsZSwgbGluaykge1xyXG4gIG5ld0ltZ1BvcHVwLm9wZW4odGl0bGUsIGxpbmspO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5SZW1vdmVJdGVtUG9wdXAoaWQsIGNhcmRJdGVtKSB7XHJcbiAgZGVsZXRlQ29uZmlybVBvcHVwLm9wZW4oaWQsIGNhcmRJdGVtKTtcclxufVxyXG5mdW5jdGlvbiBnZXRVc2VySWQoKSB7XHJcbiAgcmV0dXJuIHByb2ZpbGVVc2VyLmdldFVzZXJJZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVTdWJtaXRBZGRJdGVtKHsgdGl0bGVfcGxhY2U6IG5hbWUsIGltZ19saW5rOiBsaW5rIH0pIHtcclxuICBhZGRQb3B1cC5oYW5kbGVMb2FkaW5nKCk7XHJcbiAgYXBpXHJcbiAgICAuYWRkTmV3Q2FyZCh7XHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGxpbmssXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBhZGRQb3B1cC5oYW5kbGVMb2FkaW5nKFwiUGxhY2UgYWRkZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcclxuICAgICAgY29uc3QgY2FyZEluZm8gPSB7XHJcbiAgICAgICAgaXNPd25lcjogdHJ1ZSxcclxuICAgICAgICBsaWtlczogW10sXHJcbiAgICAgIH07XHJcbiAgICAgIHJlbmRlckNhcmQocmVzLCBjYXJkSW5mbyk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGFkZFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGFkZFBvcHVwLmhhbmRsZUxvYWRpbmcodHh0RXJyKTtcclxuICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGFkZFBvcHVwLmhhbmRsZUxvYWRpbmcoaW5pdGlhbEJ0blR4dC5hZGRQb3B1cCwgdHJ1ZSk7XHJcbiAgICAgIH0sIDE4MDApO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybShpZCwgaXRlbSkge1xyXG4gIGRlbGV0ZUNvbmZpcm1Qb3B1cC5oYW5kbGVMb2FkaW5nKCk7XHJcbiAgYXBpXHJcbiAgICAub25SZW1vdmVJdGVtKGlkKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBkZWxldGVDb25maXJtUG9wdXAuaGFuZGxlTG9hZGluZyhcIlBsYWNlIHJlbW92ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcclxuICAgICAgaXRlbS5yZW1vdmUoKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlQ29uZmlybVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGRlbGV0ZUNvbmZpcm1Qb3B1cC5oYW5kbGVMb2FkaW5nKHR4dEVycik7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBkZWxldGVDb25maXJtUG9wdXAuaGFuZGxlTG9hZGluZyhcclxuICAgICAgICAgIGluaXRpYWxCdG5UeHQuZGVsZXRlQ29uZmlybVBvcHVwLFxyXG4gICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0sIDEwNTApO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlU3VibWl0RWRpdFByb2ZpbGUoeyBuYW1lX2lucHV0LCBhYm91dF9tZSB9KSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX2FkZC1wbGFjZVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0UG9wdXAuaGFuZGxlTG9hZGluZygpO1xyXG5cclxuICBhcGlcclxuICAgIC5zZXRVc2VySW5mbyh7IG5hbWU6IG5hbWVfaW5wdXQsIGFib3V0OiBhYm91dF9tZSB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBlZGl0UG9wdXAuaGFuZGxlTG9hZGluZyhcIlByb2ZpbGUgZWRpdGVkIHN1Y2Nlc3NmdWxseSFcIik7XHJcbiAgICAgIHByb2ZpbGVVc2VyLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBlZGl0UG9wdXAuaGFuZGxlTG9hZGluZyh0eHRFcnIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgZWRpdFBvcHVwLmhhbmRsZUxvYWRpbmcoaW5pdGlhbEJ0blR4dC5lZGl0UG9wdXAsIHRydWUpO1xyXG4gICAgICB9LCAxODAwKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdFByb2ZpbGVQaWMoeyBpbWdfbGluayB9KSB7XHJcbiAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLmhhbmRsZUxvYWRpbmcoKTtcclxuICBhcGlcclxuICAgIC5vblVwZGF0ZVByb2ZpbGVQaWMoeyBhdmF0YXI6IGltZ19saW5rIH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5oYW5kbGVMb2FkaW5nKFxyXG4gICAgICAgIFwiUHJvZmlsZSBQaWN0dXJlIG1vZGlmaWVkIHN1Y2Nlc3NmdWxseSFcIlxyXG4gICAgICApO1xyXG4gICAgICBwcm9maWxlVXNlci5zZXRQaWN0dXJlUHJvZmlsZShpbWdfbGluayk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjaGFuZ2VQcm9maWxlUGljUG9wdXAuaGFuZGxlTG9hZGluZyh0eHRFcnIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApO1xyXG4gICAgfSlcclxuXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5oYW5kbGVMb2FkaW5nKFxyXG4gICAgICAgICAgaW5pdGlhbEJ0blR4dC5jaGFuZ2VQcm9maWxlUGljUG9wdXAsXHJcbiAgICAgICAgICB0cnVlXHJcbiAgICAgICAgKTtcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlZFRvZ2dsZShpc0xpa2VkLCBpdGVtLCBpZCkge1xyXG4gIGlmICghaXNMaWtlZCkge1xyXG4gICAgYXBpXHJcbiAgICAgIC5hZGRJdGVtTGlrZShpZClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGl0ZW0ub25VcGRhdGVMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFwaVxyXG4gICAgICAucmVtb3ZlSXRlbUxpa2UoaWQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpdGVtLm9uVXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBzZXRMb2FkaW5nSW5pdChzdGF0dXMsIGNhcmRJdGVtc0FyciwgdXNlckluZm8pIHtcclxuICBpZiAoc3RhdHVzKSB7XHJcbiAgICBwcm9maWxlVXNlci5zZXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IFwiTG9hZGluZy4uLlwiLFxyXG4gICAgICBhYm91dDogXCJMb2FkaW5nLi4uXCIsXHJcbiAgICAgIF9pZDogZ2V0UmFuZG9tU3RyaW5nKCksXHJcbiAgICB9KTtcclxuICAgIHByb2ZpbGVVc2VyLnNldFBpY3R1cmVQcm9maWxlKHNwaW5uZXJHaWYpO1xyXG4gICAgY2FyZHNMaXN0LnNldE5ld0l0ZW1saXN0KFtcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6IFwiTG9hZGluZy4uLlwiLFxyXG4gICAgICAgIGxpbms6IHNwaW5uZXJHaWYsXHJcbiAgICAgICAgb3duZXI6IHsgX2lkOiBnZXRSYW5kb21TdHJpbmcoKSB9LFxyXG4gICAgICAgIGxpa2VzOiBbXSxcclxuICAgICAgfSxcclxuICAgIF0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fZ3JpZC1jb250YWluZXJcIikuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIHByb2ZpbGVVc2VyLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogdXNlckluZm8ubmFtZSxcclxuICAgICAgYWJvdXQ6IHVzZXJJbmZvLmFib3V0LFxyXG4gICAgICBfaWQ6IHVzZXJJbmZvLl9pZCxcclxuICAgIH0pO1xyXG4gICAgcHJvZmlsZVVzZXIuc2V0UGljdHVyZVByb2ZpbGUodXNlckluZm8uYXZhdGFyKTtcclxuICAgIGNhcmRzTGlzdC5zZXROZXdJdGVtbGlzdChjYXJkSXRlbXNBcnIpO1xyXG4gICAgb3BlbkVkaXRVc2VyUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5FZGl0UHJvZmlsZVBvcHVwKTtcclxuICAgIG9wZW5BZGRQbGFjZXNQb3B1cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkFkZFByb2ZpbGVQb3B1cCk7XHJcbiAgICBvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwKTtcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gb25Jbml0KCkge1xyXG4gIHNldExvYWRpbmdJbml0KHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmdldEluaXRJbmZvKClcclxuICAgIC50aGVuKChbY2FyZEl0ZW1zQXJyLCB1c2VySW5mb10pID0+IHtcclxuICAgICAgc2V0TG9hZGluZ0luaXQoZmFsc2UsIGNhcmRJdGVtc0FyciwgdXNlckluZm8pO1xyXG4gICAgICBlbmFibGVWYWxpZGF0aW9uKHtcclxuICAgICAgICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwLWJveF9fZm9ybVwiLFxyXG4gICAgICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwLWJveF9faW5wdXRcIixcclxuICAgICAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXAtYm94X19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgICAgICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cC1ib3hfX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIixcclxuICAgICAgICBpbnB1dEVycm9yQ2xhc3M6IFwiLnBvcHVwLWJveF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgICAgIGVycm9yQ2xhc3M6IFwiLnBvcHVwLWJveF9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBzZXRQb3B1cEV2ZW50KCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRQb3B1cEV2ZW50KCkge1xyXG4gIGVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIGFkZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgbmV3SW1nUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBkZWxldGVDb25maXJtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBjaGFuZ2VQcm9maWxlUGljUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxufVxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0sIGNhcmRJbmZvKSB7XHJcbiAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlUGxhY2VJdGVtKGl0ZW0sIGNhcmRJbmZvKSk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICByZW5kZXJlcjogKGRhdGEpID0+IHtcclxuICAgIGNvbnN0IHsgb3duZXIsIGxpa2VzIH0gPSBkYXRhO1xyXG4gICAgY29uc3QgaWQgPSBnZXRVc2VySWQoKTtcclxuICAgIGNvbnN0IGNhcmRJbmZvID0ge1xyXG4gICAgICBpc093bmVyOiBvd25lci5faWQgPT09IGlkLFxyXG4gICAgICBsaWtlcyxcclxuICAgIH07XHJcbiAgICByZW5kZXJDYXJkKGRhdGEsIGNhcmRJbmZvKTtcclxuICB9LFxyXG4gIGNvbnRhaW5lclNlbGVjdG9yOiBcIi5wbGFjZXNfX2dyaWQtY29udGFpbmVyXCIsXHJcbn0pO1xyXG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIi5wb3B1cC1ib3hfdHlwZV9wcm9maWxlLWVkaXRcIixcclxuICBoYW5kbGVTdWJtaXRFZGl0UHJvZmlsZSxcclxuICBcIlNhdmVcIlxyXG4pO1xyXG5cclxuY29uc3QgYWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIi5wb3B1cC1ib3hfdHlwZV9hZGQtaXRlbVwiLFxyXG4gIGhhbmRsZVN1Ym1pdEFkZEl0ZW1cclxuKTtcclxuY29uc3QgbmV3SW1nUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiLnBvcHVwLWJveF90eXBlX2ltZ1wiLFxyXG4gIGltZ1NlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2ltZ1wiLFxyXG4gIGltZ1RpdGxlU2VsZWN0b3I6IFwiLnBvcHVwLWJveF9faW1nLXRpdGxlXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgZGVsZXRlQ29uZmlybVBvcHVwID0gbmV3IFBvcHVwQ29uZmlybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXAtYm94X3R5cGVfY29uZmlybVwiLFxyXG4gIGhhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0sXHJcbn0pO1xyXG5jb25zdCBwcm9maWxlVXNlciA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZUVsbTogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGpvYkVsbTogXCIucHJvZmlsZV9fYWJvdXQtbWVcIixcclxuICBwaWNFbG06IFwiLnByb2ZpbGVfX2F2YXRhci1jb3ZlclwiLFxyXG59KTtcclxuY29uc3QgY2hhbmdlUHJvZmlsZVBpY1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXAtYm94X3R5cGVfY2hhbmdlLXByb2ZpbGUtcGljXCIsXHJcbiAgaGFuZGxlU3VibWl0UHJvZmlsZVBpY1xyXG4pO1xyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaUNvbmZpbmcpO1xyXG5vbkluaXQoKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciwgY29udGFpbmVyU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbCk7XHJcbiAgfVxyXG4gIHNldE5ld0l0ZW1saXN0KGl0ZW1zKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5yZW5kZXJJdGVtcygpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaW1nU2VsZWN0b3IsIGltZ1RpdGxlU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWdFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoaW1nU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdGl0bGVFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoaW1nVGl0bGVTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfc2V0UG9wdXBJbWcoKSB7XHJcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLnRpdGxlO1xyXG4gICAgdGhpcy5faW1nRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1nRWxlbWVudC5hbHQgPSBgYSBwaWN0cnVlIG9mICR7dGhpcy50aXRsZX1gO1xyXG4gIH1cclxuXHJcbiAgb3Blbih0aXRsZSwgbGluaykge1xyXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9zZXRQb3B1cEltZygpO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuaW1wb3J0IHsgbW9kaWZ5RWxlbWVudFRleHQgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybSB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0gPSBoYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cC1ib3hfX3N1Ym1pdC1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX21vZGlmeUVsZW1lbnRUZXh0ID0gbW9kaWZ5RWxlbWVudFRleHQ7XHJcbiAgfVxyXG4gIG9wZW4oaWQsIGVsZW1lbnQpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgdGhpcy5faWQgPSBpZDtcclxuICB9XHJcbiAgaGFuZGxlTG9hZGluZyh0eHQgPSBcIlNhdmluZy4uLlwiLCBpc0RvbmUgPSBmYWxzZSkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuRWxlbWVudC5kaXNhYmxlZCA9ICFpc0RvbmUgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB0aGlzLl9tb2RpZnlFbGVtZW50VGV4dCh0aGlzLl9zdWJtaXRCdG5FbGVtZW50LCB0eHQpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNvbmZpcm1TdWJtaXQgPSAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybSh0aGlzLl9pZCwgdGhpcy5fZWxlbWVudCk7XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG5FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDb25maXJtU3VibWl0KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVFbG0sIGpvYkVsbSwgcGljRWxtIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVFbG0pO1xyXG4gICAgdGhpcy5fam9iRWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JFbG0pO1xyXG4gICAgdGhpcy5fcGljRWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwaWNFbG0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgX2lkIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbG0udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iRWxtLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSBfaWQ7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZUluZm86IHRoaXMuX25hbWVFbG0udGV4dENvbnRlbnQsXHJcbiAgICAgIGFib3V0TWVJbmZvOiB0aGlzLl9qb2JFbG0udGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuICBnZXRVc2VySWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlcklkO1xyXG4gIH1cclxuICBzZXRQaWN0dXJlUHJvZmlsZShwaWNTcmMpIHtcclxuICAgIHRoaXMuX3BpY0VsbS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtwaWNTcmN9XCIpYDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcclxuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgfVxyXG4gIF9vbkh0dHBSZXF1ZXN0KHVybCwgbWV0aG9kLCBkYXRhKSB7XHJcbiAgICBjb25zdCBmdWxsVXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7dXJsfWA7XHJcbiAgICByZXR1cm4gZmV0Y2goZnVsbFVybCwge1xyXG4gICAgICBtZXRob2QsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGdldEluaXRJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLl9nZXRJbml0aWFsQ2FyZHMoKSwgdGhpcy5fZ2V0VXNlckluZm8oKV0pO1xyXG4gIH1cclxuICBfZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChcInVzZXJzL21lXCIsIFwiR0VUXCIpO1xyXG4gIH1cclxuICBfZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoXCJjYXJkc1wiLCBcIkdFVFwiKTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoXCJ1c2Vycy9tZVwiLCBcIlBBVENIXCIsIHsgbmFtZSwgYWJvdXQgfSk7XHJcbiAgfVxyXG4gIGFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KFwiY2FyZHNcIiwgXCJQT1NUXCIsIHsgbmFtZSwgbGluayB9KTtcclxuICB9XHJcbiAgb25SZW1vdmVJdGVtKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChgY2FyZHMvJHtpZH1gLCBcIkRFTEVURVwiKTtcclxuICB9XHJcbiAgYWRkSXRlbUxpa2UoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KGBjYXJkcy9saWtlcy8ke2lkfWAsIFwiUFVUXCIpO1xyXG4gIH1cclxuICByZW1vdmVJdGVtTGlrZShpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoYGNhcmRzL2xpa2VzLyR7aWR9YCwgXCJERUxFVEVcIik7XHJcbiAgfVxyXG4gIG9uVXBkYXRlUHJvZmlsZVBpYyh7IGF2YXRhciB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChcInVzZXJzL21lL2F2YXRhclwiLCBcIlBBVENIXCIsIHsgYXZhdGFyIH0pO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBhcGlDb25maW5nID0ge1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9cIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjAzNWEzZTgwLTBkM2YtNDIxYi1iNGZhLTdmNDA2ZTQ5YWQ1ZlwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufTtcclxuZXhwb3J0IHsgYXBpQ29uZmluZyB9O1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwIiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwidGhpcyIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfZm9ybSIsIl9zZXRGb3JtTGlzdGVuZXJzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfZ2V0RWxlbWVudFR4dCIsInR5cGUiLCJpZCIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfcmVtb3ZlSW5wdXRFcnJvciIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJyZXNldFZhbGlkYXRpb24iLCJyZXNldCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsInNvbWUiLCJpbnB1dCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJnZXRSYW5kb21TdHJpbmciLCJsZW5ndGgiLCJnZXRSYW5kb21JbnQiLCJjaGFycyIsInNwbGl0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic3RyIiwiaSIsIkRhdGUiLCJub3ciLCJtaW4iLCJtYXgiLCJtb2RpZnlFbGVtZW50VGV4dCIsImVsZW1lbnQiLCJ0eHQiLCJDYXJkIiwiaGFuZGxlSW1hZ2VDbGljayIsIm9wZW5SZW1vdmVJdGVtUG9wdXAiLCJoYW5kbGVMaWtlZFRvZ2dsZSIsImdldFVzZXJJZCIsImNhcmRTZWxlY3RvciIsIm5hbWUiLCJsaW5rIiwiX2lkIiwib3duZXIiLCJsaWtlcyIsImlzT3duZXIiLCJfcGxhY2VMaWtlQW1vdW50IiwiX2xpa2VzIiwiX2lzTGlrZWQiLCJfcGxhY2VMaWtlQnRuIiwiaXNJbml0IiwiX2lzTGlrZWRCeUN1cnJVc2VyIiwiX3JlbmRlckxpa2VzIiwiX2dldFVzZXJJZCIsImZpbmQiLCJsaWtlIiwiX25hbWUiLCJfbGluayIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX29wZW5SZW1vdmVJdGVtUG9wdXAiLCJfY2FyZFNlbGVjdG9yIiwiX2lzT3duZXIiLCJfaGFuZGxlTGlrZWRUb2dnbGUiLCJfb3duZXIiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfaGFuZGxlVG9nZ2xlTGlrZWRCdG4iLCJzdG9wUHJvcGFnYXRpb24iLCJfaGFuZGxlUmVtb3ZlSXRlbSIsIl9jYXJkSXRlbSIsIl9zZXRFdmVudExpc3RlbmVycyIsImdlbmVyYXRlQ2FyZCIsIl9wbGFjZUltZyIsIl9wbGFjZVJlbW92ZUJ0biIsIm9uVXBkYXRlTGlrZXMiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImFsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImtleSIsImNsb3NlIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXRGcm9tIiwic3VwZXIiLCJfaGFuZGxlU3VibWl0RnJvbSIsIl9yZXR1cm5JbnB1dFZhbE9iaiIsIl9mb3JtRWxlbWVudCIsIl9mb3JtQnRuIiwiX21vZGlmeUVsZW1lbnRUZXh0IiwiaGFuZGxlTG9hZGluZyIsImlzRG9uZSIsInZhbElucHV0T2JqIiwiaXRlbSIsInZhbHVlIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJmb3JtVmFsaWRhdG9ycyIsIm9wZW5FZGl0VXNlclBvcHVwQnRuIiwib3BlbkFkZFBsYWNlc1BvcHVwQnRuIiwib3BlbkNoYW5nZVByb2ZpbGVQb3B1cEJ0biIsInR4dEVyciIsIm5hbWVJbnB1dCIsImFib3V0TWVJbnB1dCIsIm9wZW5DaGFuZ2VQcm9maWxlUG9wdXAiLCJjaGFuZ2VQcm9maWxlUGljUG9wdXAiLCJvcGVuQWRkUHJvZmlsZVBvcHVwIiwiYWRkUG9wdXAiLCJvcGVuRWRpdFByb2ZpbGVQb3B1cCIsImVkaXRQb3B1cCIsIm5hbWVJbmZvIiwiYWJvdXRNZUluZm8iLCJmaWxsUHJvZmlsZUZvcm0iLCJwcm9maWxlVXNlciIsImdldFVzZXJJbmZvIiwib3BlbkltZ1BvcHVwIiwidGl0bGUiLCJuZXdJbWdQb3B1cCIsImNhcmRJdGVtIiwiZGVsZXRlQ29uZmlybVBvcHVwIiwiaXNMaWtlZCIsImFwaSIsInJlbW92ZUl0ZW1MaWtlIiwidGhlbiIsInJlcyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImFkZEl0ZW1MaWtlIiwic2V0TG9hZGluZ0luaXQiLCJzdGF0dXMiLCJjYXJkSXRlbXNBcnIiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRQaWN0dXJlUHJvZmlsZSIsInNwaW5uZXJHaWYiLCJjYXJkc0xpc3QiLCJzZXROZXdJdGVtbGlzdCIsImlubmVySFRNTCIsImF2YXRhciIsInJlbmRlckNhcmQiLCJjYXJkSW5mbyIsImFkZEl0ZW0iLCJjcmVhdGVQbGFjZUl0ZW0iLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiX2l0ZW1zIiwiZWwiLCJwcmVwZW5kIiwiaXRlbXMiLCJkYXRhIiwibmFtZV9pbnB1dCIsImFib3V0X21lIiwic2V0VGltZW91dCIsImZpbmFsbHkiLCJ0aXRsZV9wbGFjZSIsImltZ19saW5rIiwiYWRkTmV3Q2FyZCIsImltZ1NlbGVjdG9yIiwiaW1nVGl0bGVTZWxlY3RvciIsIl9pbWdFbGVtZW50IiwiX3RpdGxlRWxlbWVudCIsIl9zZXRQb3B1cEltZyIsInNyYyIsImhhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0iLCJfaGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybSIsIl9lbGVtZW50IiwiX3N1Ym1pdEJ0bkVsZW1lbnQiLCJfaGFuZGxlQ29uZmlybVN1Ym1pdCIsIm9uUmVtb3ZlSXRlbSIsIm5hbWVFbG0iLCJqb2JFbG0iLCJwaWNFbG0iLCJfbmFtZUVsbSIsIl9qb2JFbG0iLCJfcGljRWxtIiwiX3VzZXJJZCIsInBpY1NyYyIsIm9uVXBkYXRlUHJvZmlsZVBpYyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX29uSHR0cFJlcXVlc3QiLCJ1cmwiLCJtZXRob2QiLCJmdWxsVXJsIiwiZmV0Y2giLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJnZXRJbml0SW5mbyIsImFsbCIsIl9nZXRJbml0aWFsQ2FyZHMiLCJfZ2V0VXNlckluZm8iLCJhdXRob3JpemF0aW9uIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiXSwic291cmNlUm9vdCI6IiJ9