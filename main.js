!function(){"use strict";var e={855:function(e,t,n){e.exports=n.p+"images/spinner_svg.dc4086388e55820fbae1.svg"}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.p="",function(){class e{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._errorClass=e.errorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._submitButtonSelector=e.submitButtonSelector,this._form=t}_setFormListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_getElementTxt(e){return"url"===e.type?"".concat(e.type,"-input"):e.id}_showInputError(e){const t=this._form.querySelector(".".concat(this._getElementTxt(e),"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_removeInputError(e){const t=this._form.querySelector(".".concat(this._getElementTxt(e),"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._removeInputError(e):this._showInputError(e)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._removeInputError(e)})),this._form.reset(),this._toggleButtonState()}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}enableValidation(){this._setFormListeners(),this._form.addEventListener("submit",(e=>e.preventDefault()))}}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i(),t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));let n="";for(let i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;return Math.floor(Math.random()*(t-e+1))+e}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";e.textContent=t}function o(e,t){setTimeout(e,t)}class r{constructor(e,n,i,s,o,r){const{name:l,link:a,_id:c}=e,{likes:u,isOwner:_,likedByCurrUser:h}=o;this._name=l,this._link=a,this._handleImageClick=n,this._openRemoveItemPopup=i,this._cardSelector=r,this._likes=u||[],this._isOwner=_||!1,this._isLikedByCurrUser=h||!1,this._id=c||t(),this._handleLikedToggle=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".places__item").cloneNode(!0)}_handleToggleLikedBtn(e){e.stopPropagation(),this._handleLikedToggle(this._isLikedByCurrUser,this,this._id)}onUpdateLikesAmount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._likes=e,console.log("this._likes:",this._likes),this._isLikedByCurrUser?this._placeLikeBtn.classList.remove("places__like-btn__active"):this._placeLikeBtn.classList.add("places__like-btn__active"),this._isLikedByCurrUser=!this._isLikedByCurrUser,this._placeLikeAmount.textContent=this._likes.length}_handleRemoveItem(e){e.stopPropagation(),this._openRemoveItemPopup(this._id,this._cardItem)}_setEventListeners(){this._cardItem.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)})),this._placeLikeBtn.addEventListener("click",(e=>{this._handleToggleLikedBtn(e)})),this._cardItem.querySelector(".places__remove-btn").addEventListener("click",(e=>{this._handleRemoveItem(e)}))}generateCard(){return this._cardItem=this._getTemplate(),this._placeImg=this._cardItem.querySelector(".places__img"),this._placeLikeBtn=this._cardItem.querySelector(".places__like-btn"),this._placeLikeAmount=this._cardItem.querySelector(".places__like-counter"),this._placeRemoveBtn=this._cardItem.querySelector(".places__remove-btn"),"Loading..."!==this._name&&"images/spinner_svg.dc4086388e55820fbae1.svg"!==this._link&&this._setEventListeners(),this._isOwner||this._placeRemoveBtn.remove(),this._isLikedByCurrUser&&this._placeLikeBtn.classList.add("places__like-btn__active"),this._placeImg.style.backgroundImage="url(".concat(this._link,")"),this._placeImg.alt="a photo of ".concat(this._name),this._cardItem.querySelector(".places__name").textContent="".concat(this._name),this._placeLikeAmount.textContent=this._likes.length,this._cardItem}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a{constructor(e){l(this,"_handleEscClose",(e=>{"Escape"==e.key&&this.close()})),l(this,"_handleContextMenu",(e=>{e.preventDefault()})),this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("popup-box_visible"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup-box_visible"),document.removeEventListener("keydown",this._handleEscClose)}handleLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.disabled=!n,this._elementTextModifying(e,t)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup-box_visible")||e.target.classList.contains("popup-box__close-button"))&&this.close()}))}}class c extends a{constructor(e,t,n){var i,o;super(e),o=e=>{e.preventDefault(),this._handleSubmitFrom(this._returnInputValObj(),this._formBtn,this._btnText)},(i="_handleFormSubmit")in this?Object.defineProperty(this,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[i]=o,this._handleSubmitFrom=t,this._formElement=this._popupElement.querySelector(".popup-box__form"),this._formBtn=this._formElement.querySelector(".popup-box__submit-button"),this._btnText=n,this._inputList=[...this._formElement.querySelectorAll(".popup-box__input")],this._elementTextModifying=s}_returnInputValObj(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}open(){super.open()}close(){super.close(),this._formElement.reset()}setEventListeners(){this._formElement.addEventListener("submit",this._handleFormSubmit),super.setEventListeners()}}var u=n(855);const _={},h=document.querySelector(".profile__edit-btn"),d=document.querySelector(".profile__add-btn"),m=document.querySelector(".profile__avatar-cover"),p="Something went wrong, please try again later ",f=document.querySelector('input[name="name_input"]'),g=document.querySelector('input[name="about_me"]');function v(){_["form_change-profile-pic"].resetValidation(),T.open()}function b(){_["form_add-place"].resetValidation(),B.open()}function E(){_["form_profile-edit"].resetValidation(),x.open(),function(e){let{nameInfo:t,aboutMeInfo:n}=e;f.value=t,g.value=n}(P.getUserInfo())}function L(e,t){q.open(e,t)}function k(e,t){w.open(e,t)}function y(e,t,n){e?U.removeItemLike(n).then((e=>{t.onUpdateLikesAmount(e.likes)})).catch((e=>console.log("Error: ".concat(e)))):U.addItemLike(n).then((e=>{t.onUpdateLikesAmount(e.likes)})).catch((e=>console.log("Error: ".concat(e))))}function S(e,n,i){e?(P.setUserInfo({name:"Loading...",about:"Loading...",_id:t()}),P.setPictureProfile(u),C.setNewItemlist([{name:"Loading...",link:u,owner:{_id:t()},likes:[]}])):(document.querySelector(".places__grid-container").innerHTML="",P.setUserInfo({name:i.name,about:i.about,_id:i._id}),P.setPictureProfile(i.avatar),C.setNewItemlist(n),h.addEventListener("click",E),d.addEventListener("click",b),m.addEventListener("click",v))}function I(e,t){C.addItem(function(e,t){return new r(e,L,k,y,t,"#places-item-template").generateCard()}(e,t))}const C=new class{constructor(e){let{renderer:t,containerSelector:n}=e;this._renderer=t,this._container=document.querySelector(n)}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}setNewItemlist(e){this._items=e,this.renderItems()}}({renderer:e=>{const{owner:t,likes:n}=e,i=P.getUserId();I(e,{isOwner:t._id===i,likedByCurrUser:n.find((e=>e._id===i)),likes:n})},containerSelector:".places__grid-container"}),x=new c(".popup-box_type_profile-edit",(function(e,t,n){let{name_input:i,about_me:s}=e;_["form_add-place"].resetValidation(),x.handleLoading(t),U.setUserInfo({name:i,about:s},t,n).then((e=>{x.handleLoading(t,"Profile edited successfully!"),P.setUserInfo(e),o((()=>{x.close()}),1e3)})).catch((e=>{x.handleLoading(t,p),console.log("Error: ".concat(e))})).finally((()=>{o((()=>{x.handleLoading(t,n)}),1800)}))}),"Save"),B=new c(".popup-box_type_add-item",(function(e,t,n){let{title_place:i,img_link:s}=e;B.handleLoading(t),U.addNewCard({name:i,link:s}).then((e=>{B.handleLoading(t,"Place added successfully!"),I(e,{isOwner:!0,likedByOwner:!1,likes:[]}),o((()=>{B.close()}),1e3)})).catch((e=>{B.handleLoading(t,p),console.log("Error: ".concat(e))})).finally((()=>{o((()=>{B.handleLoading(t,n,!0)}),1800)}))}),"Create"),q=new class extends a{constructor(e){let{popupSelector:t,imgSelector:n,imgTitleSelector:i}=e;super(t),this._imgElement=this._popupElement.querySelector(n),this._titleElement=this._popupElement.querySelector(i)}_setPopupImg(){this._titleElement.textContent=this.title,this._imgElement.src=this._link,this._imgElement.alt="a pictrue of ".concat(this.title)}open(e,t){this.title=e,this._link=t,this._setPopupImg(),super.open()}}({popupSelector:".popup-box_type_img",imgSelector:".popup-box__img",imgTitleSelector:".popup-box__img-title"}),w=new class extends a{constructor(e){let{popupSelector:t,handleSubmitRemoveConfirm:n,initialBtnTxt:i}=e;var o,r;super(t),r=e=>{e.preventDefault(),this._handleSubmitRemoveConfirm(this._id,this._element,this._submitBtnElement,this._initialBtnTxt)},(o="_handleConfirmSubmit")in this?Object.defineProperty(this,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[o]=r,this._handleSubmitRemoveConfirm=n,this._submitBtnElement=this._popupElement.querySelector(".popup-box__submit-button"),this._initialBtnTxt=i,this._elementTextModifying=s}open(e,t){super.open(),this._element=t,this._id=e}close(){super.close()}setEventListeners(){this._submitBtnElement.addEventListener("click",this._handleConfirmSubmit),super.setEventListeners()}}({popupSelector:".popup-box_type_confirm",handleSubmitRemoveConfirm:function(e,t,n,i){w.handleLoading(n),U.onRemoveItem(e).then((()=>{w.handleLoading(n,"Place removed successfully!"),t.remove(),o((()=>{w.close()}),1e3)})).catch((e=>{w.handleLoading(n,p),console.log("Error: ".concat(e))})).finally((()=>{o((()=>{w.handleLoading(n,i,!0)}),1050)}))},initialBtnTxt:"Yes"}),P=new class{constructor(e){let{nameElm:t,jobElm:n,picElm:i}=e;this._nameElm=document.querySelector(t),this._jobElm=document.querySelector(n),this._picElm=document.querySelector(i)}setUserInfo(e){let{name:t,about:n,_id:i}=e;this._nameElm.textContent=t,this._jobElm.textContent=n,this.userId=i}getUserInfo(){return{nameInfo:this._nameElm.textContent,aboutMeInfo:this._jobElm.textContent}}getUserId(){return this.userId}setPictureProfile(e){this._picElm.style.backgroundImage='url("'.concat(e,'")')}}({nameElm:".profile__name",jobElm:".profile__about-me",picElm:".profile__avatar-cover"}),T=new c(".popup-box_type_change-profile-pic",(function(e,t,n){let{img_link:i}=e;T.handleLoading(t),U.onUpdateProfilePic({avatar:i}).then((()=>{T.handleLoading(t,"Profile Picture modified successfully!"),P.setPictureProfile(i),o((()=>{T.close()}),1e3)})).catch((e=>{T.handleLoading(t,p),console.log("Error: ".concat(e))})).finally((()=>{o((()=>{T.handleLoading(t,n,!1)}),1e3)}))}),"Save"),U=new class{constructor(e){let{baseUrl:t,headers:n}=e;this.headers=n,this.baseUrl=t}_onHttpRequest(e,t,n){const i="".concat(this.baseUrl).concat(e);return fetch(i,{method:t,headers:this.headers,body:JSON.stringify(n)}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}getInitInfo(){return Promise.all([this._getInitialCards(),this._getUserInfo()])}_getUserInfo(){return this._onHttpRequest("users/me","GET")}_getInitialCards(){return this._onHttpRequest("cards","GET")}setUserInfo(e){let{name:t,about:n}=e;return this._onHttpRequest("users/me","PATCH",{name:t,about:n})}addNewCard(e){let{name:t,link:n}=e;return this._onHttpRequest("cards","POST",{name:t,link:n})}onRemoveItem(e){return this._onHttpRequest("cards/".concat(e),"DELETE")}addItemLike(e){return this._onHttpRequest("cards/likes/".concat(e),"PUT")}removeItemLike(e){return this._onHttpRequest("cards/likes/".concat(e),"DELETE")}onUpdateProfilePic(e){let{avatar:t}=e;return this._onHttpRequest("users/me/avatar","PATCH",{avatar:t})}}({baseUrl:"https://around.nomoreparties.co/v1/group-12/",headers:{authorization:"035a3e80-0d3f-421b-b4fa-7f406e49ad5f","Content-Type":"application/json"}});S(!0),U.getInitInfo().then((t=>{let[n,i]=t;var s;S(!1,n,i),s={formSelector:".popup-box__form",inputSelector:".popup-box__input",submitButtonSelector:".popup-box__submit-button",inactiveButtonClass:"popup-box__submit-button_inactive",inputErrorClass:".popup-box__input_type_error",errorClass:".popup-box__input-error_active"},Array.from(document.querySelectorAll(s.formSelector)).forEach((t=>{const n=new e(s,t),i=t.name;_[i]=n,n.enableValidation()})),x.setEventListeners(),B.setEventListeners(),q.setEventListeners(),w.setEventListeners(),T.setEventListeners()})).catch((e=>console.log("Error: ".concat(e))))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG9CQUFxQixvQ0FDckJFLGdCQUFpQiwrQkFDakJKLFdBQVksa0NBck1BVSxNQUFNQyxLQUN0QnlFLFNBQVN4RSxpQkFBaUJwQixFQUFTSSxlQUczQm9CLFNBQVN2QixJQUNqQixNQUFNc1AsRUFBWSxJQUFJelAsRUFBY0UsRUFBVUMsR0FDeEN1UCxFQUFXdlAsRUFBSzJFLEtBQ3RCK0QsRUFBZTZHLEdBQVlELEVBQzNCQSxFQUFVeE0sc0JBcU1ad0csRUFBVTVCLG9CQUNWMEIsRUFBUzFCLG9CQUNUb0MsRUFBWXBDLG9CQUNac0MsRUFBbUJ0QyxvQkFDbkJ3QixFQUFzQnhCLHVCQVJuQjRDLE9BQU9DLEdBQVF0RSxRQUFRQyxJQUFSLGlCQUFzQnFFLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL2NvbmZpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgfVxyXG4gIF9zZXRGb3JtTGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfZ2V0RWxlbWVudFR4dChpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHR4dCA9XHJcbiAgICAgIGlucHV0RWxlbWVudC50eXBlID09PSBcInVybFwiXHJcbiAgICAgICAgPyBgJHtpbnB1dEVsZW1lbnQudHlwZX0taW5wdXRgXHJcbiAgICAgICAgOiBpbnB1dEVsZW1lbnQuaWQ7XHJcbiAgICByZXR1cm4gdHh0O1xyXG4gIH1cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHt0aGlzLl9nZXRFbGVtZW50VHh0KGlucHV0RWxlbWVudCl9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgX3JlbW92ZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHt0aGlzLl9nZXRFbGVtZW50VHh0KGlucHV0RWxlbWVudCl9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9yZW1vdmVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2UgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbW92ZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgLy8gY29uc3QgYnRuRm9ybUVsbSA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1ib3hfX3N1Ym1pdC1idXR0b25cIik7XHJcbiAgICAvLyBidG5Gb3JtRWxtLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIC8vIGJ0bkZvcm1FbG0uY2xhc3NMaXN0LmFkZChcInBvcHVwLWJveF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRGb3JtTGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IGUucHJldmVudERlZmF1bHQoKSk7XHJcbiAgfVxyXG59XHJcbiIsImZ1bmN0aW9uIGdldFJhbmRvbVN0cmluZyhsZW5ndGggPSBnZXRSYW5kb21JbnQoKSkge1xyXG4gIGxldCBjaGFycyA9XHJcbiAgICBcIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWtsbW5vcHFyc3R1dnd4eXpcIi5zcGxpdChcIlwiKTtcclxuXHJcbiAgaWYgKCFsZW5ndGgpIHtcclxuICAgIGxlbmd0aCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCk7XHJcbiAgfVxyXG5cclxuICBsZXQgc3RyID0gXCJcIjtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICBzdHIgKz0gY2hhcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKV07XHJcbiAgfVxyXG4gIHJldHVybiBzdHI7XHJcbn1cclxuZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbiA9IDEwMCwgbWF4ID0gMTUwKSB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcbn1cclxuZnVuY3Rpb24gZWxlbWVudFRleHRNb2RpZnlpbmcoZWxlbWVudCwgdHh0ID0gXCJTYXZpbmcuLi5cIikge1xyXG4gIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0eHQ7XHJcbn1cclxuZnVuY3Rpb24gcnVuRnVuY1RpbWVPdXQoZnVuYywgdGltZSkge1xyXG4gIHNldFRpbWVvdXQoZnVuYywgdGltZSk7XHJcbn1cclxuZXhwb3J0IHsgZ2V0UmFuZG9tU3RyaW5nLCBlbGVtZW50VGV4dE1vZGlmeWluZywgcnVuRnVuY1RpbWVPdXQgfTtcclxuIiwiaW1wb3J0IHsgZ2V0UmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcbmV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgb3BlblJlbW92ZUl0ZW1Qb3B1cCxcclxuICAgIGhhbmRsZUxpa2VkVG9nZ2xlLFxyXG4gICAgY2FyZEluZm8sXHJcbiAgICBjYXJkU2VsZWN0b3JcclxuICApIHtcclxuICAgIGNvbnN0IHsgbmFtZSwgbGluaywgX2lkIH0gPSBkYXRhO1xyXG4gICAgY29uc3QgeyBsaWtlcywgaXNPd25lciwgbGlrZWRCeUN1cnJVc2VyIH0gPSBjYXJkSW5mbztcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX29wZW5SZW1vdmVJdGVtUG9wdXAgPSBvcGVuUmVtb3ZlSXRlbVBvcHVwO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcyB8fCBbXTtcclxuICAgIHRoaXMuX2lzT3duZXIgPSBpc093bmVyIHx8IGZhbHNlO1xyXG4gICAgdGhpcy5faXNMaWtlZEJ5Q3VyclVzZXIgPSBsaWtlZEJ5Q3VyclVzZXIgfHwgZmFsc2U7XHJcbiAgICB0aGlzLl9pZCA9IF9pZCB8fCBnZXRSYW5kb21TdHJpbmcoKTtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VkVG9nZ2xlID0gaGFuZGxlTGlrZWRUb2dnbGU7XHJcbiAgfVxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IHBsYWNlSXRlbVRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yXHJcbiAgICApLmNvbnRlbnQ7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IHBsYWNlSXRlbVRlbXBsYXRlXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19faXRlbVwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcbiAgX2hhbmRsZVRvZ2dsZUxpa2VkQnRuKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlZFRvZ2dsZSh0aGlzLl9pc0xpa2VkQnlDdXJyVXNlciwgdGhpcywgdGhpcy5faWQpO1xyXG4gIH1cclxuICBvblVwZGF0ZUxpa2VzQW1vdW50KGxpa2VzID0gW10pIHtcclxuICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XHJcbiAgICBjb25zb2xlLmxvZygndGhpcy5fbGlrZXM6JywgdGhpcy5fbGlrZXMpXHJcbiAgICB0aGlzLl9pc0xpa2VkQnlDdXJyVXNlclxyXG4gICAgICA/IHRoaXMuX3BsYWNlTGlrZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwicGxhY2VzX19saWtlLWJ0bl9fYWN0aXZlXCIpXHJcbiAgICAgIDogdGhpcy5fcGxhY2VMaWtlQnRuLmNsYXNzTGlzdC5hZGQoXCJwbGFjZXNfX2xpa2UtYnRuX19hY3RpdmVcIik7XHJcbiAgICB0aGlzLl9pc0xpa2VkQnlDdXJyVXNlciA9ICF0aGlzLl9pc0xpa2VkQnlDdXJyVXNlcjtcclxuICAgIHRoaXMuX3BsYWNlTGlrZUFtb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICB9XHJcbiAgX2hhbmRsZVJlbW92ZUl0ZW0oZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuX29wZW5SZW1vdmVJdGVtUG9wdXAodGhpcy5faWQsIHRoaXMuX2NhcmRJdGVtKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3BsYWNlTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlVG9nZ2xlTGlrZWRCdG4oZSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRJdGVtXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fcmVtb3ZlLWJ0blwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlSXRlbShlKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkSXRlbSA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9wbGFjZUltZyA9IHRoaXMuX2NhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19pbWdcIik7XHJcbiAgICB0aGlzLl9wbGFjZUxpa2VCdG4gPSB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fbGlrZS1idG5cIik7XHJcbiAgICB0aGlzLl9wbGFjZUxpa2VBbW91bnQgPSB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wbGFjZXNfX2xpa2UtY291bnRlclwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fcGxhY2VSZW1vdmVCdG4gPSB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fcmVtb3ZlLWJ0blwiKTtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5fbmFtZSAhPT0gXCJMb2FkaW5nLi4uXCIgJiZcclxuICAgICAgdGhpcy5fbGluayAhPT0gXCJpbWFnZXMvc3Bpbm5lcl9zdmcuZGM0MDg2Mzg4ZTU1ODIwZmJhZTEuc3ZnXCJcclxuICAgICkge1xyXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLl9pc093bmVyKSB7XHJcbiAgICAgIHRoaXMuX3BsYWNlUmVtb3ZlQnRuLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWRCeUN1cnJVc2VyKSB7XHJcbiAgICAgIHRoaXMuX3BsYWNlTGlrZUJ0bi5jbGFzc0xpc3QuYWRkKFwicGxhY2VzX19saWtlLWJ0bl9fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3BsYWNlSW1nLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9saW5rfSlgO1xyXG4gICAgdGhpcy5fcGxhY2VJbWcuYWx0ID0gYGEgcGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XHJcbiAgICB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fbmFtZVwiKS50ZXh0Q29udGVudCA9IGAke3RoaXMuX25hbWV9YDtcclxuICAgIHRoaXMuX3BsYWNlTGlrZUFtb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkSXRlbTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgX2hhbmRsZUNvbnRleHRNZW51ID0gKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9O1xyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwLWJveF92aXNpYmxlXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwLWJveF92aXNpYmxlXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBoYW5kbGVMb2FkaW5nKGJ0biwgdHh0ID0gXCJTYXZpbmcuLi5cIiwgaXNEb25lID0gZmFsc2UpIHtcclxuICAgIGJ0bi5kaXNhYmxlZCA9ICFpc0RvbmUgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB0aGlzLl9lbGVtZW50VGV4dE1vZGlmeWluZyhidG4sIHR4dCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cC1ib3hfdmlzaWJsZVwiKSB8fFxyXG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwLWJveF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgeyBlbGVtZW50VGV4dE1vZGlmeWluZyB9IGZyb20gXCIuLi91dGlscy91dGlsc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGcm9tLCBidG5UZXh0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZyb20gPSBoYW5kbGVTdWJtaXRGcm9tO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1ib3hfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9mb3JtQnRuID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucG9wdXAtYm94X19zdWJtaXQtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9idG5UZXh0ID0gYnRuVGV4dDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cC1ib3hfX2lucHV0XCIpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuX2VsZW1lbnRUZXh0TW9kaWZ5aW5nID0gZWxlbWVudFRleHRNb2RpZnlpbmc7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRm9ybVN1Ym1pdCA9IChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRGcm9tKFxyXG4gICAgICB0aGlzLl9yZXR1cm5JbnB1dFZhbE9iaigpLFxyXG4gICAgICB0aGlzLl9mb3JtQnRuLFxyXG4gICAgICB0aGlzLl9idG5UZXh0XHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIF9yZXR1cm5JbnB1dFZhbE9iaigpIHtcclxuICAgIGNvbnN0IHZhbElucHV0T2JqID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB2YWxJbnB1dE9ialtpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHZhbElucHV0T2JqO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmVlcnNoZWJhIFR1cmtpc2ggcmFpbHdheSBzdGF0aW9uXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vdXBsb2FkLndpa2ltZWRpYS5vcmcvd2lraXBlZGlhL2NvbW1vbnMvdGh1bWIvZC9kZS8lRDclOUUlRDclQUElRDclOTclRDclOURfJUQ3JUFBJUQ3JTk3JUQ3JUEwJUQ3JUFBXyVENyU5NCVENyVBOCVENyU5QiVENyU5MSVENyVBQV8lRDclOTQlRDclOTglRDclOTUlRDclQTglRDclQTclRDclOTklRDclQUFfJUQ3JTkxJUQ3JTkxJUQ3JTkwJUQ3JUE4XyVENyVBOSVENyU5MSVENyVBMi5qcGcvMTI4MHB4LSVENyU5RSVENyVBQSVENyU5NyVENyU5RF8lRDclQUElRDclOTclRDclQTAlRDclQUFfJUQ3JTk0JUQ3JUE4JUQ3JTlCJUQ3JTkxJUQ3JUFBXyVENyU5NCVENyU5OCVENyU5NSVENyVBOCVENyVBNyVENyU5OSVENyVBQV8lRDclOTElRDclOTElRDclOTAlRDclQThfJUQ3JUE5JUQ3JTkxJUQ3JUEyLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG5jb25zdCBvcGVuRWRpdFVzZXJQb3B1cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XHJcbmNvbnN0IG9wZW5BZGRQbGFjZXNQb3B1cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcclxuY29uc3Qgb3BlbkNoYW5nZVByb2ZpbGVQb3B1cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fYXZhdGFyLWNvdmVyXCJcclxuKTtcclxuXHJcbmNvbnN0IHR4dEVyciA9IFwiU29tZXRoaW5nIHdlbnQgd3JvbmcsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIgXCI7XHJcblxyXG5leHBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBvcGVuRWRpdFVzZXJQb3B1cEJ0bixcclxuICBvcGVuQWRkUGxhY2VzUG9wdXBCdG4sXHJcbiAgZm9ybVZhbGlkYXRvcnMsXHJcbiAgb3BlbkNoYW5nZVByb2ZpbGVQb3B1cEJ0bixcclxuICB0eHRFcnIsXHJcbn07XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGFwaUNvbmZpbmcgfSBmcm9tIFwiLi4vLi4vY29uZmluZy5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi91dGlscy9BcGkuanNcIjtcclxuaW1wb3J0IHNwaW5uZXJHaWYgZnJvbSBcIi4uL2ltYWdlcy9wcm9maWxlL3NwaW5uZXJfc3ZnLnN2Z1wiO1xyXG5pbXBvcnQge1xyXG4gIGdldFJhbmRvbVN0cmluZyxcclxuICBydW5GdW5jVGltZU91dCxcclxuICBlbGVtZW50VGV4dE1vZGlmeWluZyxcclxufSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgb3BlbkNoYW5nZVByb2ZpbGVQb3B1cEJ0bixcclxuICBvcGVuRWRpdFVzZXJQb3B1cEJ0bixcclxuICBvcGVuQWRkUGxhY2VzUG9wdXBCdG4sXHJcbiAgZm9ybVZhbGlkYXRvcnMsXHJcbiAgdHh0RXJyLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm1cIjtcclxuXHJcbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJuYW1lX2lucHV0XCJdJyk7XHJcbmNvbnN0IGFib3V0TWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJhYm91dF9tZVwiXScpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlUGxhY2VJdGVtKGl0ZW0sIGNhcmRJbmZvKSB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgaXRlbSxcclxuICAgIG9wZW5JbWdQb3B1cCxcclxuICAgIG9wZW5SZW1vdmVJdGVtUG9wdXAsXHJcbiAgICBoYW5kbGVMaWtlZFRvZ2dsZSxcclxuICAgIGNhcmRJbmZvLFxyXG4gICAgXCIjcGxhY2VzLWl0ZW0tdGVtcGxhdGVcIlxyXG4gICk7XHJcbiAgcmV0dXJuIG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpIHtcclxuICBjb25zdCBmb3JtSXRlbXMgPSBBcnJheS5mcm9tKFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5mb3JtU2VsZWN0b3IpXHJcbiAgKTtcclxuXHJcbiAgZm9ybUl0ZW1zLmZvckVhY2goKGZvcm0pID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtKTtcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybS5uYW1lO1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufVxyXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oeyBuYW1lSW5mbywgYWJvdXRNZUluZm8gfSkge1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWVJbmZvO1xyXG4gIGFib3V0TWVJbnB1dC52YWx1ZSA9IGFib3V0TWVJbmZvO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5DaGFuZ2VQcm9maWxlUG9wdXAoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX2NoYW5nZS1wcm9maWxlLXBpY1wiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBjaGFuZ2VQcm9maWxlUGljUG9wdXAub3BlbigpO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5BZGRQcm9maWxlUG9wdXAoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX2FkZC1wbGFjZVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRQb3B1cC5vcGVuKCk7XHJcbn1cclxuZnVuY3Rpb24gb3BlbkVkaXRQcm9maWxlUG9wdXAoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX3Byb2ZpbGUtZWRpdFwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0UG9wdXAub3BlbigpO1xyXG4gIGZpbGxQcm9maWxlRm9ybShwcm9maWxlVXNlci5nZXRVc2VySW5mbygpKTtcclxufVxyXG5mdW5jdGlvbiBvcGVuSW1nUG9wdXAodGl0bGUsIGxpbmspIHtcclxuICBuZXdJbWdQb3B1cC5vcGVuKHRpdGxlLCBsaW5rKTtcclxufVxyXG5mdW5jdGlvbiBvcGVuUmVtb3ZlSXRlbVBvcHVwKGlkLCBjYXJkSXRlbSkge1xyXG4gIGRlbGV0ZUNvbmZpcm1Qb3B1cC5vcGVuKGlkLCBjYXJkSXRlbSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEFkZEl0ZW0oXHJcbiAgeyB0aXRsZV9wbGFjZTogbmFtZSwgaW1nX2xpbms6IGxpbmsgfSxcclxuICBidG4sXHJcbiAgaW5pdGlhbEJ0blR4dFxyXG4pIHtcclxuICBhZGRQb3B1cC5oYW5kbGVMb2FkaW5nKGJ0bik7XHJcbiAgYXBpXHJcbiAgICAuYWRkTmV3Q2FyZCh7XHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGxpbmssXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBhZGRQb3B1cC5oYW5kbGVMb2FkaW5nKGJ0biwgXCJQbGFjZSBhZGRlZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgICBjb25zdCBjYXJkSW5mbyA9IHtcclxuICAgICAgICBpc093bmVyOiB0cnVlLFxyXG4gICAgICAgIGxpa2VkQnlPd25lcjogZmFsc2UsXHJcbiAgICAgICAgbGlrZXM6IFtdLFxyXG4gICAgICB9O1xyXG4gICAgICByZW5kZXJDYXJkKHJlcywgY2FyZEluZm8pO1xyXG4gICAgICBydW5GdW5jVGltZU91dCgoKSA9PiB7XHJcbiAgICAgICAgYWRkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgYWRkUG9wdXAuaGFuZGxlTG9hZGluZyhidG4sIHR4dEVycik7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBydW5GdW5jVGltZU91dCgoKSA9PiB7XHJcbiAgICAgICAgYWRkUG9wdXAuaGFuZGxlTG9hZGluZyhidG4sIGluaXRpYWxCdG5UeHQsIHRydWUpO1xyXG4gICAgICB9LCAxODAwKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0oaWQsIGVsZW1lbnQsIGJ0biwgaW5pdGlhbEJ0blR4dCkge1xyXG4gIGRlbGV0ZUNvbmZpcm1Qb3B1cC5oYW5kbGVMb2FkaW5nKGJ0bik7XHJcbiAgYXBpXHJcbiAgICAub25SZW1vdmVJdGVtKGlkKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBkZWxldGVDb25maXJtUG9wdXAuaGFuZGxlTG9hZGluZyhidG4sIFwiUGxhY2UgcmVtb3ZlZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgICBlbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICBydW5GdW5jVGltZU91dCgoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlQ29uZmlybVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGRlbGV0ZUNvbmZpcm1Qb3B1cC5oYW5kbGVMb2FkaW5nKGJ0biwgdHh0RXJyKTtcclxuICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHJ1bkZ1bmNUaW1lT3V0KCgpID0+IHtcclxuICAgICAgICBkZWxldGVDb25maXJtUG9wdXAuaGFuZGxlTG9hZGluZyhidG4sIGluaXRpYWxCdG5UeHQsIHRydWUpO1xyXG4gICAgICB9LCAxMDUwKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEVkaXRQcm9maWxlKHsgbmFtZV9pbnB1dCwgYWJvdXRfbWUgfSwgYnRuLCBpbml0aWFsQnRuVHh0KSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX2FkZC1wbGFjZVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0UG9wdXAuaGFuZGxlTG9hZGluZyhidG4pO1xyXG5cclxuICBhcGlcclxuICAgIC5zZXRVc2VySW5mbyh7IG5hbWU6IG5hbWVfaW5wdXQsIGFib3V0OiBhYm91dF9tZSB9LCBidG4sIGluaXRpYWxCdG5UeHQpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGVkaXRQb3B1cC5oYW5kbGVMb2FkaW5nKGJ0biwgXCJQcm9maWxlIGVkaXRlZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgICBwcm9maWxlVXNlci5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgICBydW5GdW5jVGltZU91dCgoKSA9PiB7XHJcbiAgICAgICAgZWRpdFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGVkaXRQb3B1cC5oYW5kbGVMb2FkaW5nKGJ0biwgdHh0RXJyKTtcclxuICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHJ1bkZ1bmNUaW1lT3V0KCgpID0+IHtcclxuICAgICAgICBlZGl0UG9wdXAuaGFuZGxlTG9hZGluZyhidG4sIGluaXRpYWxCdG5UeHQpO1xyXG4gICAgICB9LCAxODAwKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdFByb2ZpbGVQaWMoeyBpbWdfbGluayB9LCBidG4sIGluaXRpYWxCdG5UeHQpIHtcclxuICBjaGFuZ2VQcm9maWxlUGljUG9wdXAuaGFuZGxlTG9hZGluZyhidG4pO1xyXG5cclxuICBhcGlcclxuICAgIC5vblVwZGF0ZVByb2ZpbGVQaWMoeyBhdmF0YXI6IGltZ19saW5rIH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5oYW5kbGVMb2FkaW5nKFxyXG4gICAgICAgIGJ0bixcclxuICAgICAgICBcIlByb2ZpbGUgUGljdHVyZSBtb2RpZmllZCBzdWNjZXNzZnVsbHkhXCJcclxuICAgICAgKTtcclxuICAgICAgcHJvZmlsZVVzZXIuc2V0UGljdHVyZVByb2ZpbGUoaW1nX2xpbmspO1xyXG4gICAgICBydW5GdW5jVGltZU91dCgoKSA9PiB7XHJcbiAgICAgICAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5oYW5kbGVMb2FkaW5nKGJ0biwgdHh0RXJyKTtcclxuICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKTtcclxuICAgIH0pXHJcblxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBydW5GdW5jVGltZU91dCgoKSA9PiB7XHJcbiAgICAgICAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLmhhbmRsZUxvYWRpbmcoYnRuLCBpbml0aWFsQnRuVHh0LCBmYWxzZSk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlTGlrZWRUb2dnbGUoaXNMaWtlZCwgaXRlbSwgaWQpIHtcclxuICBpZiAoIWlzTGlrZWQpIHtcclxuICAgIGFwaVxyXG4gICAgICAuYWRkSXRlbUxpa2UoaWQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpdGVtLm9uVXBkYXRlTGlrZXNBbW91bnQocmVzLmxpa2VzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGlcclxuICAgICAgLnJlbW92ZUl0ZW1MaWtlKGlkKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaXRlbS5vblVwZGF0ZUxpa2VzQW1vdW50KHJlcy5saWtlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9hZGluZ0luaXQoc3RhdHVzLCBjYXJkSXRlbXNBcnIsIHVzZXJJbmZvKSB7XHJcbiAgaWYgKHN0YXR1cykge1xyXG4gICAgcHJvZmlsZVVzZXIuc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiBcIkxvYWRpbmcuLi5cIixcclxuICAgICAgYWJvdXQ6IFwiTG9hZGluZy4uLlwiLFxyXG4gICAgICBfaWQ6IGdldFJhbmRvbVN0cmluZygpLFxyXG4gICAgfSk7XHJcbiAgICBwcm9maWxlVXNlci5zZXRQaWN0dXJlUHJvZmlsZShzcGlubmVyR2lmKTtcclxuICAgIGNhcmRzTGlzdC5zZXROZXdJdGVtbGlzdChbXHJcbiAgICAgIHtcclxuICAgICAgICBuYW1lOiBcIkxvYWRpbmcuLi5cIixcclxuICAgICAgICBsaW5rOiBzcGlubmVyR2lmLFxyXG4gICAgICAgIG93bmVyOiB7IF9pZDogZ2V0UmFuZG9tU3RyaW5nKCkgfSxcclxuICAgICAgICBsaWtlczogW10sXHJcbiAgICAgIH0sXHJcbiAgICBdKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2dyaWQtY29udGFpbmVyXCIpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICBwcm9maWxlVXNlci5zZXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IHVzZXJJbmZvLm5hbWUsXHJcbiAgICAgIGFib3V0OiB1c2VySW5mby5hYm91dCxcclxuICAgICAgX2lkOiB1c2VySW5mby5faWQsXHJcbiAgICB9KTtcclxuICAgIHByb2ZpbGVVc2VyLnNldFBpY3R1cmVQcm9maWxlKHVzZXJJbmZvLmF2YXRhcik7XHJcbiAgICBjYXJkc0xpc3Quc2V0TmV3SXRlbWxpc3QoY2FyZEl0ZW1zQXJyKTtcclxuICAgIG9wZW5FZGl0VXNlclBvcHVwQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuRWRpdFByb2ZpbGVQb3B1cCk7XHJcbiAgICBvcGVuQWRkUGxhY2VzUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5BZGRQcm9maWxlUG9wdXApO1xyXG4gICAgb3BlbkNoYW5nZVByb2ZpbGVQb3B1cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkNoYW5nZVByb2ZpbGVQb3B1cCk7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIG9uSW5pdCgpIHtcclxuICBzZXRMb2FkaW5nSW5pdCh0cnVlKTtcclxuICBhcGlcclxuICAgIC5nZXRJbml0SW5mbygpXHJcbiAgICAudGhlbigoW2NhcmRJdGVtc0FyciwgdXNlckluZm9dKSA9PiB7XHJcbiAgICAgIHNldExvYWRpbmdJbml0KGZhbHNlLCBjYXJkSXRlbXNBcnIsIHVzZXJJbmZvKTtcclxuICAgICAgZW5hYmxlVmFsaWRhdGlvbih7XHJcbiAgICAgICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2Zvcm1cIixcclxuICAgICAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2lucHV0XCIsXHJcbiAgICAgICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwLWJveF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gICAgICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXAtYm94X19zdWJtaXQtYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgICAgICAgaW5wdXRFcnJvckNsYXNzOiBcIi5wb3B1cC1ib3hfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgICAgICBlcnJvckNsYXNzOiBcIi5wb3B1cC1ib3hfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG4gICAgICB9KTtcclxuICAgICAgc2V0UG9wdXBFdmVudCgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0UG9wdXBFdmVudCgpIHtcclxuICBlZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBhZGRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIG5ld0ltZ1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgZGVsZXRlQ29uZmlybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbn1cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtLCBjYXJkSW5mbykge1xyXG4gIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZVBsYWNlSXRlbShpdGVtLCBjYXJkSW5mbykpO1xyXG59XHJcblxyXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7XHJcbiAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XHJcbiAgICBjb25zdCB7IG93bmVyLCBsaWtlcyB9ID0gZGF0YTtcclxuICAgIGNvbnN0IGlkID0gcHJvZmlsZVVzZXIuZ2V0VXNlcklkKCk7XHJcbiAgICBjb25zdCBjYXJkSW5mbyA9IHtcclxuICAgICAgaXNPd25lcjogb3duZXIuX2lkID09PSBpZCxcclxuICAgICAgbGlrZWRCeUN1cnJVc2VyOiBsaWtlcy5maW5kKCh1c2VyKSA9PiB1c2VyLl9pZCA9PT0gaWQpLFxyXG4gICAgICBsaWtlcyxcclxuICAgIH07XHJcbiAgICByZW5kZXJDYXJkKGRhdGEsIGNhcmRJbmZvKTtcclxuICB9LFxyXG4gIGNvbnRhaW5lclNlbGVjdG9yOiBcIi5wbGFjZXNfX2dyaWQtY29udGFpbmVyXCIsXHJcbn0pO1xyXG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIi5wb3B1cC1ib3hfdHlwZV9wcm9maWxlLWVkaXRcIixcclxuICBoYW5kbGVTdWJtaXRFZGl0UHJvZmlsZSxcclxuICBcIlNhdmVcIlxyXG4pO1xyXG5jb25zdCBhZGRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnBvcHVwLWJveF90eXBlX2FkZC1pdGVtXCIsXHJcbiAgaGFuZGxlU3VibWl0QWRkSXRlbSxcclxuICBcIkNyZWF0ZVwiXHJcbik7XHJcbmNvbnN0IG5ld0ltZ1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfdHlwZV9pbWdcIixcclxuICBpbWdTZWxlY3RvcjogXCIucG9wdXAtYm94X19pbWdcIixcclxuICBpbWdUaXRsZVNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2ltZy10aXRsZVwiLFxyXG59KTtcclxuXHJcbmNvbnN0IGRlbGV0ZUNvbmZpcm1Qb3B1cCA9IG5ldyBQb3B1cENvbmZpcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiLnBvcHVwLWJveF90eXBlX2NvbmZpcm1cIixcclxuICBoYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtLFxyXG4gIGluaXRpYWxCdG5UeHQ6IFwiWWVzXCIsXHJcbn0pO1xyXG5jb25zdCBwcm9maWxlVXNlciA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZUVsbTogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGpvYkVsbTogXCIucHJvZmlsZV9fYWJvdXQtbWVcIixcclxuICBwaWNFbG06IFwiLnByb2ZpbGVfX2F2YXRhci1jb3ZlclwiLFxyXG59KTtcclxuY29uc3QgY2hhbmdlUHJvZmlsZVBpY1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXAtYm94X3R5cGVfY2hhbmdlLXByb2ZpbGUtcGljXCIsXHJcbiAgaGFuZGxlU3VibWl0UHJvZmlsZVBpYyxcclxuICBcIlNhdmVcIlxyXG4pO1xyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaUNvbmZpbmcpO1xyXG5vbkluaXQoKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciwgY29udGFpbmVyU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbCk7XHJcbiAgfVxyXG4gIHNldE5ld0l0ZW1saXN0KGl0ZW1zKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5yZW5kZXJJdGVtcygpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaW1nU2VsZWN0b3IsIGltZ1RpdGxlU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWdFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoaW1nU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdGl0bGVFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoaW1nVGl0bGVTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfc2V0UG9wdXBJbWcoKSB7XHJcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLnRpdGxlO1xyXG4gICAgdGhpcy5faW1nRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1nRWxlbWVudC5hbHQgPSBgYSBwaWN0cnVlIG9mICR7dGhpcy50aXRsZX1gO1xyXG4gIH1cclxuXHJcbiAgb3Blbih0aXRsZSwgbGluaykge1xyXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9zZXRQb3B1cEltZygpO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuaW1wb3J0IHsgZWxlbWVudFRleHRNb2RpZnlpbmcgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybSwgaW5pdGlhbEJ0blR4dCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0gPSBoYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cC1ib3hfX3N1Ym1pdC1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2luaXRpYWxCdG5UeHQgPSBpbml0aWFsQnRuVHh0O1xyXG4gICAgdGhpcy5fZWxlbWVudFRleHRNb2RpZnlpbmcgPSBlbGVtZW50VGV4dE1vZGlmeWluZztcclxuICB9XHJcbiAgb3BlbihpZCwgZWxlbWVudCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pZCA9IGlkO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlQ29uZmlybVN1Ym1pdCA9IChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtKFxyXG4gICAgICB0aGlzLl9pZCxcclxuICAgICAgdGhpcy5fZWxlbWVudCxcclxuICAgICAgdGhpcy5fc3VibWl0QnRuRWxlbWVudCxcclxuICAgICAgdGhpcy5faW5pdGlhbEJ0blR4dFxyXG4gICAgKTtcclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNvbmZpcm1TdWJtaXQpO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZUVsbSwgam9iRWxtLCBwaWNFbG0gfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZUVsbSk7XHJcbiAgICB0aGlzLl9qb2JFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYkVsbSk7XHJcbiAgICB0aGlzLl9waWNFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBpY0VsbSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBfaWQgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsbS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbG0udGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgIHRoaXMudXNlcklkID0gX2lkO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWVJbmZvOiB0aGlzLl9uYW1lRWxtLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dE1lSW5mbzogdGhpcy5fam9iRWxtLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgZ2V0VXNlcklkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudXNlcklkO1xyXG4gIH1cclxuICBzZXRQaWN0dXJlUHJvZmlsZShwaWNTcmMpIHtcclxuICAgIHRoaXMuX3BpY0VsbS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtwaWNTcmN9XCIpYDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcclxuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgfVxyXG4gIF9vbkh0dHBSZXF1ZXN0KHVybCwgbWV0aG9kLCBkYXRhKSB7XHJcbiAgICBjb25zdCBmdWxsVXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7dXJsfWA7XHJcbiAgICByZXR1cm4gZmV0Y2goZnVsbFVybCwge1xyXG4gICAgICBtZXRob2QsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGdldEluaXRJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLl9nZXRJbml0aWFsQ2FyZHMoKSwgdGhpcy5fZ2V0VXNlckluZm8oKV0pO1xyXG4gIH1cclxuICBfZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChcInVzZXJzL21lXCIsIFwiR0VUXCIpO1xyXG4gIH1cclxuICBfZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoXCJjYXJkc1wiLCBcIkdFVFwiKTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoXCJ1c2Vycy9tZVwiLCBcIlBBVENIXCIsIHsgbmFtZSwgYWJvdXQgfSk7XHJcbiAgfVxyXG4gIGFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KFwiY2FyZHNcIiwgXCJQT1NUXCIsIHsgbmFtZSwgbGluayB9KTtcclxuICB9XHJcbiAgb25SZW1vdmVJdGVtKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChgY2FyZHMvJHtpZH1gLCBcIkRFTEVURVwiKTtcclxuICB9XHJcbiAgYWRkSXRlbUxpa2UoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KGBjYXJkcy9saWtlcy8ke2lkfWAsIFwiUFVUXCIpO1xyXG4gIH1cclxuICByZW1vdmVJdGVtTGlrZShpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoYGNhcmRzL2xpa2VzLyR7aWR9YCwgXCJERUxFVEVcIik7XHJcbiAgfVxyXG4gIG9uVXBkYXRlUHJvZmlsZVBpYyh7IGF2YXRhciB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChcInVzZXJzL21lL2F2YXRhclwiLCBcIlBBVENIXCIsIHsgYXZhdGFyIH0pO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBhcGlDb25maW5nID0ge1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9cIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjAzNWEzZTgwLTBkM2YtNDIxYi1iNGZhLTdmNDA2ZTQ5YWQ1ZlwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufTtcclxuZXhwb3J0IHsgYXBpQ29uZmluZyB9O1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwIiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwidGhpcyIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfZm9ybSIsIl9zZXRGb3JtTGlzdGVuZXJzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfZ2V0RWxlbWVudFR4dCIsInR5cGUiLCJpZCIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfcmVtb3ZlSW5wdXRFcnJvciIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJyZXNldFZhbGlkYXRpb24iLCJyZXNldCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsInNvbWUiLCJpbnB1dCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJnZXRSYW5kb21TdHJpbmciLCJsZW5ndGgiLCJnZXRSYW5kb21JbnQiLCJjaGFycyIsInNwbGl0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic3RyIiwiaSIsIm1pbiIsIm1heCIsImVsZW1lbnRUZXh0TW9kaWZ5aW5nIiwiZWxlbWVudCIsInR4dCIsInJ1bkZ1bmNUaW1lT3V0IiwiZnVuYyIsInRpbWUiLCJzZXRUaW1lb3V0IiwiQ2FyZCIsImRhdGEiLCJoYW5kbGVJbWFnZUNsaWNrIiwib3BlblJlbW92ZUl0ZW1Qb3B1cCIsImhhbmRsZUxpa2VkVG9nZ2xlIiwiY2FyZEluZm8iLCJjYXJkU2VsZWN0b3IiLCJuYW1lIiwibGluayIsIl9pZCIsImxpa2VzIiwiaXNPd25lciIsImxpa2VkQnlDdXJyVXNlciIsIl9uYW1lIiwiX2xpbmsiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9vcGVuUmVtb3ZlSXRlbVBvcHVwIiwiX2NhcmRTZWxlY3RvciIsIl9saWtlcyIsIl9pc093bmVyIiwiX2lzTGlrZWRCeUN1cnJVc2VyIiwiX2hhbmRsZUxpa2VkVG9nZ2xlIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2hhbmRsZVRvZ2dsZUxpa2VkQnRuIiwic3RvcFByb3BhZ2F0aW9uIiwib25VcGRhdGVMaWtlc0Ftb3VudCIsImNvbnNvbGUiLCJsb2ciLCJfcGxhY2VMaWtlQnRuIiwiX3BsYWNlTGlrZUFtb3VudCIsIl9oYW5kbGVSZW1vdmVJdGVtIiwiX2NhcmRJdGVtIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZ2VuZXJhdGVDYXJkIiwiX3BsYWNlSW1nIiwiX3BsYWNlUmVtb3ZlQnRuIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJhbHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUxvYWRpbmciLCJidG4iLCJpc0RvbmUiLCJfZWxlbWVudFRleHRNb2RpZnlpbmciLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdEZyb20iLCJidG5UZXh0Iiwic3VwZXIiLCJfaGFuZGxlU3VibWl0RnJvbSIsIl9yZXR1cm5JbnB1dFZhbE9iaiIsIl9mb3JtQnRuIiwiX2J0blRleHQiLCJfZm9ybUVsZW1lbnQiLCJ2YWxJbnB1dE9iaiIsIml0ZW0iLCJ2YWx1ZSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiZm9ybVZhbGlkYXRvcnMiLCJvcGVuRWRpdFVzZXJQb3B1cEJ0biIsIm9wZW5BZGRQbGFjZXNQb3B1cEJ0biIsIm9wZW5DaGFuZ2VQcm9maWxlUG9wdXBCdG4iLCJ0eHRFcnIiLCJuYW1lSW5wdXQiLCJhYm91dE1lSW5wdXQiLCJvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwIiwiY2hhbmdlUHJvZmlsZVBpY1BvcHVwIiwib3BlbkFkZFByb2ZpbGVQb3B1cCIsImFkZFBvcHVwIiwib3BlbkVkaXRQcm9maWxlUG9wdXAiLCJlZGl0UG9wdXAiLCJuYW1lSW5mbyIsImFib3V0TWVJbmZvIiwiZmlsbFByb2ZpbGVGb3JtIiwicHJvZmlsZVVzZXIiLCJnZXRVc2VySW5mbyIsIm9wZW5JbWdQb3B1cCIsInRpdGxlIiwibmV3SW1nUG9wdXAiLCJjYXJkSXRlbSIsImRlbGV0ZUNvbmZpcm1Qb3B1cCIsImlzTGlrZWQiLCJhcGkiLCJyZW1vdmVJdGVtTGlrZSIsInRoZW4iLCJyZXMiLCJjYXRjaCIsImVyciIsImFkZEl0ZW1MaWtlIiwic2V0TG9hZGluZ0luaXQiLCJzdGF0dXMiLCJjYXJkSXRlbXNBcnIiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRQaWN0dXJlUHJvZmlsZSIsInNwaW5uZXJHaWYiLCJjYXJkc0xpc3QiLCJzZXROZXdJdGVtbGlzdCIsIm93bmVyIiwiaW5uZXJIVE1MIiwiYXZhdGFyIiwicmVuZGVyQ2FyZCIsImFkZEl0ZW0iLCJjcmVhdGVQbGFjZUl0ZW0iLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiX2l0ZW1zIiwiZWwiLCJwcmVwZW5kIiwiaXRlbXMiLCJnZXRVc2VySWQiLCJmaW5kIiwidXNlciIsImluaXRpYWxCdG5UeHQiLCJuYW1lX2lucHV0IiwiYWJvdXRfbWUiLCJmaW5hbGx5IiwidGl0bGVfcGxhY2UiLCJpbWdfbGluayIsImFkZE5ld0NhcmQiLCJsaWtlZEJ5T3duZXIiLCJpbWdTZWxlY3RvciIsImltZ1RpdGxlU2VsZWN0b3IiLCJfaW1nRWxlbWVudCIsIl90aXRsZUVsZW1lbnQiLCJfc2V0UG9wdXBJbWciLCJzcmMiLCJoYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtIiwiX2hhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0iLCJfZWxlbWVudCIsIl9zdWJtaXRCdG5FbGVtZW50IiwiX2luaXRpYWxCdG5UeHQiLCJfaGFuZGxlQ29uZmlybVN1Ym1pdCIsIm9uUmVtb3ZlSXRlbSIsIm5hbWVFbG0iLCJqb2JFbG0iLCJwaWNFbG0iLCJfbmFtZUVsbSIsIl9qb2JFbG0iLCJfcGljRWxtIiwidXNlcklkIiwicGljU3JjIiwib25VcGRhdGVQcm9maWxlUGljIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfb25IdHRwUmVxdWVzdCIsInVybCIsIm1ldGhvZCIsImZ1bGxVcmwiLCJmZXRjaCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImdldEluaXRJbmZvIiwiYWxsIiwiX2dldEluaXRpYWxDYXJkcyIsIl9nZXRVc2VySW5mbyIsImF1dGhvcml6YXRpb24iLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=