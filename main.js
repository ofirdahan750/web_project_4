!function(){"use strict";var t={855:function(t,e,s){t.exports=s.p+"images/spinner_svg.dc4086388e55820fbae1.svg"}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,s),o.exports}s.p="",function(){class t{constructor(t,e){this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._errorClass=t.errorClass,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._submitButtonSelector=t.submitButtonSelector,this._form=e}_setFormListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}_showInputError(t){const e=this._form.querySelector(".".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_removeInputError(t){const e=this._form.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}_checkInputValidity(t){t.validity.valid?this._removeInputError(t):this._showInputError(t)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{this._removeInputError(t)}));const t=this._form.querySelector(".popup-box__submit-button");t.disabled=!0,t.classList.add("popup-box__submit-button_inactive"),this._form.reset()}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}enableValidation(){this._setFormListeners(),this._form.addEventListener("submit",(t=>t.preventDefault()))}}class e{constructor(t,e,s){const{name:i,link:n}=t;this._name=i,this._link=n,this._handleImageClick=e,this._cardSelector=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".places__item").cloneNode(!0)}_handleToggleLikedBtn(t){t.stopPropagation(),this._placeLikeBtn.classList.toggle("places__like-btn__active")}_handleRemoveItem(t){t.stopPropagation(),this._cardItem.remove(),this._cardItem=null}_setEventListeners(){"Loading..."===this._name&&"images/spinner_svg.dc4086388e55820fbae1.svg"===this._link||(this._cardItem.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)})),this._placeLikeBtn.addEventListener("click",(t=>{this._handleToggleLikedBtn(t)})),this._cardItem.querySelector(".places__remove-btn").addEventListener("click",(t=>{this._handleRemoveItem(t)})))}generateCard(){return this._cardItem=this._getTemplate(),this._placeImg=this._cardItem.querySelector(".places__img"),this._placeLikeBtn=this._cardItem.querySelector(".places__like-btn"),this._setEventListeners(),this._placeImg.style.backgroundImage="url(".concat(this._link,")"),this._placeImg.alt="a photo of ".concat(this._name),this._cardItem.querySelector(".places__name").textContent="".concat(this._name),this._cardItem}}class i{constructor(t){var e,s;s=t=>{"Escape"==t.key&&this.close()},(e="_handleEscClose")in this?Object.defineProperty(this,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[e]=s,this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("popup-box_visible"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup-box_visible"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",(t=>{(t.target.classList.contains("popup-box_visible")||t.target.classList.contains("popup-box__close-button"))&&this.close()}))}}class n extends i{constructor(t,e){var s,i;super(t),i=t=>{t.preventDefault(),this._handleSubmitFrom(this._returnInputValObj()),this.close()},(s="_handleFormSubmit")in this?Object.defineProperty(this,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[s]=i,this._handleSubmitFrom=e,this._formElement=this._popupElement.querySelector(".popup-box__form"),this._inputList=[...this._formElement.querySelectorAll(".popup-box__input")]}_returnInputValObj(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}open(){super.open()}close(){super.close(),this._formElement.reset()}setEventListeners(){this._formElement.addEventListener("submit",this._handleFormSubmit),super.setEventListeners()}}var o=s(855);const r={},a=document.querySelector(".profile__edit-btn"),l=document.querySelector(".profile__add-btn"),c=document.querySelector('input[name="name_input"]'),u=document.querySelector('input[name="about_me"]');function _(t){return new e(t,h,"#places-item-template").generateCard()}function p(){r["form_add-place"].resetValidation(),E.open()}function m(){r["form_profile-edit"].resetValidation(),f.open();const{nameInfo:t,aboutMeInfo:e}=v.getUserInfo();c.value=t,u.value=e}function h(t,e){g.open(t,e)}function d(t,e,s){t?(v.setUserInfo({name:"Loading...",about:"Loading...",_id:null}),v.setPictureProfile(o),b.setNewItemlist([{name:"Loading...",link:o}])):(document.querySelector(".places__grid-container").innerHTML="",v.setUserInfo({name:s.name,about:s.about,_id:s._id}),v.setPictureProfile(s.avatar),b.setNewItemlist(e))}const b=new class{constructor(t,e){this._renderer=t,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>this._renderer(t)))}addItem(t){this._container.prepend(t)}setNewItemlist(t){this._items=t,this.renderItems()}}((function(t){b.addItem(_(t))}),".places__grid-container"),f=new n(".popup-box_type_profile-edit",(function(t){let{name_input:e,about_me:s}=t;r["form_add-place"].resetValidation(),I.setUserInfo({name:e,about:s}).then((t=>{v.setUserInfo(t)}))})),E=new n(".popup-box_type_add-item",(function(t){let{title_place:e,img_link:s}=t;b.addItem(_({name:e,link:s}))})),g=new class extends i{constructor(t){let{popupSelector:e,imgSelector:s,imgTitleSelector:i}=t;super(e),this._imgElement=this._popupElement.querySelector(s),this._titleElement=this._popupElement.querySelector(i)}_setPopupImg(){this._titleElement.textContent=this.title,this._imgElement.src=this._link,this._imgElement.alt="a pictrue of ".concat(this.title)}open(t,e){this.title=t,this._link=e,this._setPopupImg(),super.open()}}({popupSelector:".popup-box_type_img",imgSelector:".popup-box__img",imgTitleSelector:".popup-box__img-title"}),v=new class{constructor(t){let{nameElm:e,jobElm:s,picElm:i}=t;this._nameElm=document.querySelector(e),this._jobElm=document.querySelector(s),this._picElm=document.querySelector(i)}setUserInfo(t){let{name:e,about:s,_id:i}=t;this._nameElm.textContent=e,this._jobElm.textContent=s,this._userId=i}getUserInfo(){return{nameInfo:this._nameElm.textContent,aboutMeInfo:this._jobElm.textContent}}setPictureProfile(t){this._picElm.src=t}}({nameElm:".profile__name",jobElm:".profile__about-me",picElm:".profile__avatar"}),I=new class{constructor(t){let{baseUrl:e,headers:s}=t;this.headers=s,this.baseUrl=e}_onHttpRequest(t,e,s){const i="".concat(this.baseUrl).concat(t);return fetch(i,{method:e,headers:this.headers,body:JSON.stringify(s)}).then((t=>t.ok?t.json():Promise.reject("Error: ".concat(t.status))))}getInitInfo(){return Promise.all([this._getInitialCards(),this._getUserInfo()])}_getUserInfo(){return this._onHttpRequest("users/me","GET")}_getInitialCards(){return this._onHttpRequest("cards","GET")}setUserInfo(t){let{name:e,about:s}=t;return this._onHttpRequest("users/me","PATCH",{name:e,about:s})}addNewCard(t){let{name:e,link:s}=t;return this._onHttpRequest("cards","post",{name:e,link:s})}}({baseUrl:"https://around.nomoreparties.co/v1/group-12/",headers:{authorization:"035a3e80-0d3f-421b-b4fa-7f406e49ad5f","Content-Type":"application/json"}});d(!0),I.getInitInfo().then((e=>{let[s,i]=e;var n;d(!1,s,i),a.addEventListener("click",m),l.addEventListener("click",p),n={formSelector:".popup-box__form",inputSelector:".popup-box__input",submitButtonSelector:".popup-box__submit-button",inactiveButtonClass:"popup-box__submit-button_inactive",inputErrorClass:".popup-box__input_type_error",errorClass:".popup-box__input-error_active"},Array.from(document.querySelectorAll(n.formSelector)).forEach((e=>{const s=new t(n,e),i=e.name;r[i]=s,s.enableValidation()})),f.setEventListeners(),E.setEventListeners(),g.setEventListeners(),I.addNewCard({name:"catttttttttttttttttttttt",link:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Cat03.jpg/600px-Cat03.jpg"})})).catch((t=>{console.log(t)}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoia0hBQ0lBLEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLElBT1YsT0FIQUUsRUFBb0JMLEdBQVVJLEVBQVFBLEVBQU9ELFFBQVNKLEdBRy9DSyxFQUFPRCxRQ3JCZkosRUFBb0JPLEVBQUksRyxXQ0FqQixNQUFNQyxFQUNYQyxZQUFZQyxFQUFVQyxHQUNwQkMsS0FBS0MsY0FBZ0JILEVBQVNJLGFBQzlCRixLQUFLRyxlQUFpQkwsRUFBU00sY0FDL0JKLEtBQUtLLFlBQWNQLEVBQVNRLFdBQzVCTixLQUFLTyxxQkFBdUJULEVBQVNVLG9CQUNyQ1IsS0FBS1MsaUJBQW1CWCxFQUFTWSxnQkFDakNWLEtBQUtXLHNCQUF3QmIsRUFBU2MscUJBQ3RDWixLQUFLYSxNQUFRZCxFQUVmZSxvQkFDRWQsS0FBS2UsV0FBYUMsTUFBTUMsS0FDdEJqQixLQUFLYSxNQUFNSyxpQkFBaUJsQixLQUFLRyxpQkFFbkNILEtBQUttQixlQUFpQm5CLEtBQUthLE1BQU1PLGNBQWNwQixLQUFLVyx1QkFDcERYLEtBQUtxQixxQkFDTHJCLEtBQUtlLFdBQVdPLFNBQVNDLElBQ3ZCQSxFQUFhQyxpQkFBaUIsU0FBUyxLQUNyQ3hCLEtBQUt5QixvQkFBb0JGLEdBQ3pCdkIsS0FBS3FCLDJCQUlYSyxnQkFBZ0JILEdBQ2QsTUFBTUksRUFBZTNCLEtBQUthLE1BQU1PLGNBQVgsV0FBNkJHLEVBQWFLLEdBQTFDLFdBQ3JCTCxFQUFhTSxVQUFVQyxJQUFJOUIsS0FBS1Msa0JBQ2hDa0IsRUFBYUksWUFBY1IsRUFBYVMsa0JBQ3hDTCxFQUFhRSxVQUFVQyxJQUFJOUIsS0FBS0ssYUFHbEM0QixrQkFBa0JWLEdBQ2hCLE1BQU1JLEVBQWUzQixLQUFLYSxNQUFNTyxjQUFYLFdBQTZCRyxFQUFhSyxHQUExQyxXQUNyQkwsRUFBYU0sVUFBVUssT0FBT2xDLEtBQUtTLGtCQUNuQ2tCLEVBQWFJLFlBQWMsR0FDM0JKLEVBQWFFLFVBQVVLLE9BQU9sQyxLQUFLSyxhQUdyQ29CLG9CQUFvQkYsR0FDZEEsRUFBYVksU0FBU0MsTUFDeEJwQyxLQUFLaUMsa0JBQWtCVixHQUNsQnZCLEtBQUswQixnQkFBZ0JILEdBRzlCYyxrQkFDRXJDLEtBQUtxQixxQkFDTHJCLEtBQUtlLFdBQVdPLFNBQVNDLElBQ3ZCdkIsS0FBS2lDLGtCQUFrQlYsTUFFekIsTUFBTWUsRUFBYXRDLEtBQUthLE1BQU1PLGNBQWMsNkJBQzVDa0IsRUFBV0MsVUFBVyxFQUN0QkQsRUFBV1QsVUFBVUMsSUFBSSxxQ0FDekI5QixLQUFLYSxNQUFNMkIsUUFFYm5CLHFCQUNNckIsS0FBS3lDLG9CQUNQekMsS0FBS21CLGVBQWVVLFVBQVVDLElBQUk5QixLQUFLTyxzQkFDdkNQLEtBQUttQixlQUFlb0IsVUFBVyxJQUUvQnZDLEtBQUttQixlQUFlVSxVQUFVSyxPQUFPbEMsS0FBS08sc0JBQzFDUCxLQUFLbUIsZUFBZW9CLFVBQVcsR0FHbkNFLG1CQUNFLE9BQU96QyxLQUFLZSxXQUFXMkIsTUFBTUMsSUFDbkJBLEVBQU1SLFNBQVNDLFFBRzNCUSxtQkFDRTVDLEtBQUtjLG9CQUNMZCxLQUFLYSxNQUFNVyxpQkFBaUIsVUFBV3FCLEdBQU1BLEVBQUVDLG9CQ3JFNUMsTUFBTUMsRUFDWGxELFlBQVltRCxFQUFNQyxFQUFrQkMsR0FDbEMsTUFBTSxLQUFFQyxFQUFGLEtBQVFDLEdBQVNKLEVBQ3ZCaEQsS0FBS3FELE1BQVFGLEVBQ2JuRCxLQUFLc0QsTUFBUUYsRUFDYnBELEtBQUt1RCxrQkFBb0JOLEVBQ3pCakQsS0FBS3dELGNBQWdCTixFQUV2Qk8sZUFRRSxPQVAwQkMsU0FBU3RDLGNBQ2pDcEIsS0FBS3dELGVBQ0xHLFFBRUN2QyxjQUFjLGlCQUNkd0MsV0FBVSxHQUlmQyxzQkFBc0JoQixHQUNwQkEsRUFBRWlCLGtCQUNGOUQsS0FBSytELGNBQWNsQyxVQUFVbUMsT0FBTyw0QkFFdENDLGtCQUFrQnBCLEdBQ2hCQSxFQUFFaUIsa0JBQ0Y5RCxLQUFLa0UsVUFBVWhDLFNBQ2ZsQyxLQUFLa0UsVUFBWSxLQUduQkMscUJBRW1CLGVBQWZuRSxLQUFLcUQsT0FDVSxnREFBZnJELEtBQUtzRCxRQUdQdEQsS0FBS2tFLFVBQVUxQyxpQkFBaUIsU0FBUyxLQUN2Q3hCLEtBQUt1RCxrQkFBa0J2RCxLQUFLcUQsTUFBT3JELEtBQUtzRCxVQUUxQ3RELEtBQUsrRCxjQUFjdkMsaUJBQWlCLFNBQVVxQixJQUM1QzdDLEtBQUs2RCxzQkFBc0JoQixNQUU3QjdDLEtBQUtrRSxVQUNGOUMsY0FBYyx1QkFDZEksaUJBQWlCLFNBQVVxQixJQUMxQjdDLEtBQUtpRSxrQkFBa0JwQixPQUk3QnVCLGVBUUUsT0FQQXBFLEtBQUtrRSxVQUFZbEUsS0FBS3lELGVBQ3RCekQsS0FBS3FFLFVBQVlyRSxLQUFLa0UsVUFBVTlDLGNBQWMsZ0JBQzlDcEIsS0FBSytELGNBQWdCL0QsS0FBS2tFLFVBQVU5QyxjQUFjLHFCQUNsRHBCLEtBQUttRSxxQkFDTG5FLEtBQUtxRSxVQUFVQyxNQUFNQyxnQkFBckIsY0FBOEN2RSxLQUFLc0QsTUFBbkQsS0FDQXRELEtBQUtxRSxVQUFVRyxJQUFmLHFCQUFtQ3hFLEtBQUtxRCxPQUN4Q3JELEtBQUtrRSxVQUFVOUMsY0FBYyxpQkFBaUJXLFlBQTlDLFVBQStEL0IsS0FBS3FELE9BQzdEckQsS0FBS2tFLFdDdkRELE1BQU1PLEVBQ25CNUUsWUFBWTZFLEcsVUFJTzdCLElBQ0osVUFBVEEsRUFBRThCLEtBQ0ozRSxLQUFLNEUsVSxFQU5rQiwwQixzQkFBQSxLLHVEQUFBLEssS0FDekI1RSxLQUFLNkUsY0FBZ0JuQixTQUFTdEMsY0FBY3NELEdBUTlDSSxPQUNFOUUsS0FBSzZFLGNBQWNoRCxVQUFVQyxJQUFJLHFCQUNqQzRCLFNBQVNsQyxpQkFBaUIsVUFBV3hCLEtBQUsrRSxpQkFHNUNILFFBQ0U1RSxLQUFLNkUsY0FBY2hELFVBQVVLLE9BQU8scUJBQ3BDd0IsU0FBU3NCLG9CQUFvQixVQUFXaEYsS0FBSytFLGlCQUcvQ0Usb0JBQ0VqRixLQUFLNkUsY0FBY3JELGlCQUFpQixhQUFjcUIsS0FFOUNBLEVBQUVxQyxPQUFPckQsVUFBVXNELFNBQVMsc0JBQzVCdEMsRUFBRXFDLE9BQU9yRCxVQUFVc0QsU0FBUyw2QkFFNUJuRixLQUFLNEUsWUN4QkUsTUFBTVEsVUFBc0JYLEVBQ3pDNUUsWUFBWTZFLEVBQWVXLEcsUUFDekJDLE1BQU1aLEcsRUFRYTdCLElBQ25CQSxFQUFFQyxpQkFDRjlDLEtBQUt1RixrQkFBa0J2RixLQUFLd0Ysc0JBQzVCeEYsS0FBSzRFLFUsRUFac0MsNEIsc0JBQUEsSyx1REFBQSxLLEtBRTNDNUUsS0FBS3VGLGtCQUFvQkYsRUFDekJyRixLQUFLeUYsYUFBZXpGLEtBQUs2RSxjQUFjekQsY0FBYyxvQkFDckRwQixLQUFLZSxXQUFhLElBQ2JmLEtBQUt5RixhQUFhdkUsaUJBQWlCLHNCQVUxQ3NFLHFCQUNFLE1BQU1FLEVBQWMsR0FJcEIsT0FIQTFGLEtBQUtlLFdBQVdPLFNBQVNxRSxJQUN2QkQsRUFBWUMsRUFBS3hDLE1BQVF3QyxFQUFLQyxTQUV6QkYsRUFFVFosT0FDRVEsTUFBTVIsT0FFUkYsUUFDRVUsTUFBTVYsUUFDTjVFLEtBQUt5RixhQUFhakQsUUFFcEJ5QyxvQkFDRWpGLEtBQUt5RixhQUFhakUsaUJBQWlCLFNBQVV4QixLQUFLNkYsbUJBQ2xEUCxNQUFNTCxxQixhQ2xDVixNQStCTWEsRUFBaUIsR0FFakJDLEVBQXVCckMsU0FBU3RDLGNBQWMsc0JBQzlDNEUsRUFBd0J0QyxTQUFTdEMsY0FBYyxxQkFFL0M2RSxFQUFZdkMsU0FBU3RDLGNBQWMsNEJBQ25DOEUsRUFBZXhDLFNBQVN0QyxjQUFjLDBCQ2xCNUMsU0FBUytFLEVBQWdCUixHQUV2QixPQURnQixJQUFJNUMsRUFBSzRDLEVBQU1TLEVBQWMseUJBQzlCaEMsZUFnQmpCLFNBQVNpQyxJQUNQUCxFQUFlLGtCQUFrQnpELGtCQUNqQ2lFLEVBQVN4QixPQUVYLFNBQVN5QixJQUNQVCxFQUFlLHFCQUFxQnpELGtCQUNwQ21FLEVBQVUxQixPQUNWLE1BQU0sU0FBRTJCLEVBQUYsWUFBWUMsR0FBZ0JDLEVBQVlDLGNBQzlDWCxFQUFVTCxNQUFRYSxFQUNsQlAsRUFBYU4sTUFBUWMsRUFFdkIsU0FBU04sRUFBYVMsRUFBT3pELEdBQzNCMEQsRUFBWWhDLEtBQUsrQixFQUFPekQsR0FhMUIsU0FBUzJELEVBQWVDLEVBQVFDLEVBQWNDLEdBQ3hDRixHQUNGTCxFQUFZUSxZQUFZLENBQ3RCaEUsS0FBTSxhQUNOaUUsTUFBTyxhQUNQQyxJQUFLLE9BRVBWLEVBQVlXLGtCQUFrQkMsR0FDOUJDLEVBQVVDLGVBQWUsQ0FBQyxDQUFFdEUsS0FBTSxhQUFjQyxLQUFNbUUsT0FFdEQ3RCxTQUFTdEMsY0FBYywyQkFBMkJzRyxVQUFXLEdBQzdEZixFQUFZUSxZQUFZLENBQ3RCaEUsS0FBTStELEVBQVMvRCxLQUNmaUUsTUFBT0YsRUFBU0UsTUFDaEJDLElBQUtILEVBQVNHLE1BRWhCVixFQUFZVyxrQkFBa0JKLEVBQVNTLFFBQ3ZDSCxFQUFVQyxlQUFlUixJQXNDN0IsTUFBTU8sRUFBWSxJQ3JISCxNQUNiM0gsWUFBWStILEVBQVVDLEdBQ3BCN0gsS0FBSzhILFVBQVlGLEVBQ2pCNUgsS0FBSytILFdBQWFyRSxTQUFTdEMsY0FBY3lHLEdBRzNDRyxjQUNFaEksS0FBS2lJLE9BQU8zRyxTQUFTcUUsR0FBUzNGLEtBQUs4SCxVQUFVbkMsS0FHL0N1QyxRQUFRQyxHQUNObkksS0FBSytILFdBQVdLLFFBQVFELEdBRTFCVixlQUFlWSxHQUNickksS0FBS2lJLE9BQVNJLEVBQ2RySSxLQUFLZ0ksaUJEa0dULFNBQW9CckMsR0FDbEI2QixFQUFVVSxRQUFRL0IsRUFBZ0JSLE1BR00sMkJBQ3BDYSxFQUFZLElBQUlwQixFQUNwQixnQ0FqRUYsWUFBMkQsSUFBMUIsV0FBRWtELEVBQUYsU0FBY0MsR0FBWSxFQUN6RHpDLEVBQWUsa0JBQWtCekQsa0JBQ2pDbUcsRUFBSXJCLFlBQVksQ0FBRWhFLEtBQU1tRixFQUFZbEIsTUFBT21CLElBQVlFLE1BQU1DLElBQzNEL0IsRUFBWVEsWUFBWXVCLFNBaUV0QnBDLEVBQVcsSUFBSWxCLEVBQ25CLDRCQXhFRixZQUFvRSxJQUFyQ3VELFlBQWF4RixFQUFNeUYsU0FBVXhGLEdBQVEsRUFDbEVvRSxFQUFVVSxRQUFRL0IsRUFBZ0IsQ0FBRWhELEtBQUFBLEVBQU1DLEtBQUFBLFFBMEV0QzBELEVBQWMsSUU1SEwsY0FBNkJyQyxFQUMxQzVFLFlBQVksR0FBa0QsSUFBbEQsY0FBRTZFLEVBQUYsWUFBaUJtRSxFQUFqQixpQkFBOEJDLEdBQW9CLEVBQzVEeEQsTUFBTVosR0FDTjFFLEtBQUsrSSxZQUFjL0ksS0FBSzZFLGNBQWN6RCxjQUFjeUgsR0FDcEQ3SSxLQUFLZ0osY0FBZ0JoSixLQUFLNkUsY0FBY3pELGNBQWMwSCxHQUd4REcsZUFDRWpKLEtBQUtnSixjQUFjakgsWUFBYy9CLEtBQUs2RyxNQUN0QzdHLEtBQUsrSSxZQUFZRyxJQUFNbEosS0FBS3NELE1BQzVCdEQsS0FBSytJLFlBQVl2RSxJQUFqQix1QkFBdUN4RSxLQUFLNkcsT0FHOUMvQixLQUFLK0IsRUFBT3pELEdBQ1ZwRCxLQUFLNkcsTUFBUUEsRUFDYjdHLEtBQUtzRCxNQUFRRixFQUNicEQsS0FBS2lKLGVBQ0wzRCxNQUFNUixTRjJHNkIsQ0FDckNKLGNBQWUsc0JBQ2ZtRSxZQUFhLGtCQUNiQyxpQkFBa0IsMEJBRWRuQyxFQUFjLElHbklMLE1BQ2I5RyxZQUFZLEdBQTZCLElBQTdCLFFBQUVzSixFQUFGLE9BQVdDLEVBQVgsT0FBbUJDLEdBQVUsRUFDdkNySixLQUFLc0osU0FBVzVGLFNBQVN0QyxjQUFjK0gsR0FDdkNuSixLQUFLdUosUUFBVTdGLFNBQVN0QyxjQUFjZ0ksR0FDdENwSixLQUFLd0osUUFBVTlGLFNBQVN0QyxjQUFjaUksR0FJeENsQyxZQUFZLEdBQXNCLElBQXRCLEtBQUVoRSxFQUFGLE1BQVFpRSxFQUFSLElBQWVDLEdBQU8sRUFDaENySCxLQUFLc0osU0FBU3ZILFlBQWNvQixFQUM1Qm5ELEtBQUt1SixRQUFReEgsWUFBY3FGLEVBQzNCcEgsS0FBS3lKLFFBQVVwQyxFQUVqQlQsY0FDRSxNQUFPLENBQ0xILFNBQVV6RyxLQUFLc0osU0FBU3ZILFlBQ3hCMkUsWUFBYTFHLEtBQUt1SixRQUFReEgsYUFHOUJ1RixrQkFBa0JvQyxHQUNoQjFKLEtBQUt3SixRQUFRTixJQUFNUSxJSCtHVSxDQUMvQlAsUUFBUyxpQkFDVEMsT0FBUSxxQkFDUkMsT0FBUSxxQkFFSmIsRUFBTSxJSXhJRyxNQUNiM0ksWUFBWSxHQUFzQixJQUF0QixRQUFFOEosRUFBRixRQUFXQyxHQUFXLEVBQ2hDNUosS0FBSzRKLFFBQVVBLEVBQ2Y1SixLQUFLMkosUUFBVUEsRUFFakJFLGVBQWVDLEVBQUtDLEVBQVEvRyxHQUMxQixNQUFNZ0gsRUFBVSxHQUFILE9BQU1oSyxLQUFLMkosU0FBWCxPQUFxQkcsR0FDbEMsT0FBT0csTUFBTUQsRUFBUyxDQUNwQkQsT0FBQUEsRUFDQUgsUUFBUzVKLEtBQUs0SixRQUNkTSxLQUFNQyxLQUFLQyxVQUFVcEgsS0FDcEJ5RixNQUFNQyxHQUNIQSxFQUFJMkIsR0FDQzNCLEVBQUk0QixPQUVKQyxRQUFRQyxPQUFSLGlCQUF5QjlCLEVBQUkxQixXQUkxQ3lELGNBQ0UsT0FBT0YsUUFBUUcsSUFBSSxDQUFDMUssS0FBSzJLLG1CQUFvQjNLLEtBQUs0SyxpQkFFcERBLGVBQ0UsT0FBTzVLLEtBQUs2SixlQUFlLFdBQVksT0FFekNjLG1CQUNFLE9BQU8zSyxLQUFLNkosZUFBZSxRQUFTLE9BR3RDMUMsWUFBWSxHQUFjLElBQWQsS0FBQ2hFLEVBQUQsTUFBTWlFLEdBQVEsRUFDeEIsT0FBT3BILEtBQUs2SixlQUFlLFdBQVksUUFBUSxDQUFDMUcsS0FBQUEsRUFBS2lFLE1BQUFBLElBRXZEeUQsV0FBVyxHQUFhLElBQWIsS0FBQzFILEVBQUQsS0FBTUMsR0FBTyxFQUN0QixPQUFPcEQsS0FBSzZKLGVBQWUsUUFBUSxPQUFPLENBQUMxRyxLQUFBQSxFQUFLQyxLQUFBQSxNQ2pDakMsQ0FDakJ1RyxRQUFTLCtDQUNUQyxRQUFTLENBQ1RrQixjQUFlLHVDQUNiLGVBQWdCLHNCTCtFbEIvRCxHQUFlLEdBQ2Z5QixFQUNHaUMsY0FDQWhDLE1BQUssSUFBOEIsSUFBNUJ4QixFQUFjQyxHQUFjLEVBOUR4QyxJQUEwQnBILEVBK0RwQmlILEdBQWUsRUFBT0UsRUFBY0MsR0FDcENuQixFQUFxQnZFLGlCQUFpQixRQUFTK0UsR0FDL0NQLEVBQXNCeEUsaUJBQWlCLFFBQVM2RSxHQWpFNUJ2RyxFQWtFSCxDQUNmSSxhQUFjLG1CQUNkRSxjQUFlLG9CQUNmUSxxQkFBc0IsNEJBQ3RCSixvQkFBcUIsb0NBQ3JCRSxnQkFBaUIsK0JBQ2pCSixXQUFZLGtDQXZFQVUsTUFBTUMsS0FDdEJ5QyxTQUFTeEMsaUJBQWlCcEIsRUFBU0ksZUFHM0JvQixTQUFTdkIsSUFDakIsTUFBTWdMLEVBQVcsSUFBSW5MLEVBQWNFLEVBQVVDLEdBQ3ZDaUwsRUFBV2pMLEVBQUtvRCxLQUN0QjJDLEVBQWVrRixHQUFZRCxFQUMzQkEsRUFBU25JLHNCQTRFWDRELEVBQVV2QixvQkFDVnFCLEVBQVNyQixvQkFDVDZCLEVBQVk3QixvQkFaUnVELEVBQUlxQyxXQUFXLENBQ2IxSCxLQUFNLDJCQUNOQyxLQUFNLDJGQUdUNkgsT0FBT0MsSUFDTkMsUUFBUUMsSUFBSUYsTSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9jb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgfVxyXG4gIF9zZXRGb3JtTGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fcmVtb3ZlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW1vdmVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGJ0bkZvcm1FbG0gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtYm94X19zdWJtaXQtYnV0dG9uXCIpO1xyXG4gICAgYnRuRm9ybUVsbS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICBidG5Gb3JtRWxtLmNsYXNzTGlzdC5hZGQoXCJwb3B1cC1ib3hfX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIik7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEZvcm1MaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGhhbmRsZUltYWdlQ2xpY2ssIGNhcmRTZWxlY3Rvcikge1xyXG4gICAgY29uc3QgeyBuYW1lLCBsaW5rIH0gPSBkYXRhO1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gIH1cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBwbGFjZUl0ZW1UZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2NhcmRTZWxlY3RvclxyXG4gICAgKS5jb250ZW50O1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBwbGFjZUl0ZW1UZW1wbGF0ZVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2l0ZW1cIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG4gIF9oYW5kbGVUb2dnbGVMaWtlZEJ0bihlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5fcGxhY2VMaWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJwbGFjZXNfX2xpa2UtYnRuX19hY3RpdmVcIik7XHJcbiAgfVxyXG4gIF9oYW5kbGVSZW1vdmVJdGVtKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB0aGlzLl9jYXJkSXRlbS5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRJdGVtID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5fbmFtZSA9PT0gXCJMb2FkaW5nLi4uXCIgJiZcclxuICAgICAgdGhpcy5fbGluayA9PT0gXCJpbWFnZXMvc3Bpbm5lcl9zdmcuZGM0MDg2Mzg4ZTU1ODIwZmJhZTEuc3ZnXCJcclxuICAgIClcclxuICAgICAgcmV0dXJuO1xyXG4gICAgdGhpcy5fY2FyZEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fcGxhY2VMaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVUb2dnbGVMaWtlZEJ0bihlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEl0ZW1cclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19yZW1vdmUtYnRuXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVJdGVtKGUpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRJdGVtID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3BsYWNlSW1nID0gdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2ltZ1wiKTtcclxuICAgIHRoaXMuX3BsYWNlTGlrZUJ0biA9IHRoaXMuX2NhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19saWtlLWJ0blwiKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wbGFjZUltZy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5fbGlua30pYDtcclxuICAgIHRoaXMuX3BsYWNlSW1nLmFsdCA9IGBhIHBob3RvIG9mICR7dGhpcy5fbmFtZX1gO1xyXG4gICAgdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX25hbWVcIikudGV4dENvbnRlbnQgPSBgJHt0aGlzLl9uYW1lfWA7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEl0ZW07XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwLWJveF92aXNpYmxlXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwLWJveF92aXNpYmxlXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXAtYm94X3Zpc2libGVcIikgfHxcclxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cC1ib3hfX2Nsb3NlLWJ1dHRvblwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0RnJvbSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRGcm9tID0gaGFuZGxlU3VibWl0RnJvbTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtYm94X19mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwLWJveF9faW5wdXRcIiksXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUZvcm1TdWJtaXQgPSAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0RnJvbSh0aGlzLl9yZXR1cm5JbnB1dFZhbE9iaigpKTtcclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICB9O1xyXG5cclxuICBfcmV0dXJuSW5wdXRWYWxPYmooKSB7XHJcbiAgICBjb25zdCB2YWxJbnB1dE9iaiA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdmFsSW5wdXRPYmpbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2YWxJbnB1dE9iajtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQpO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJlZXJzaGViYSBUdXJraXNoIHJhaWx3YXkgc3RhdGlvblwiLFxyXG4gICAgbGluazogXCJodHRwczovL3VwbG9hZC53aWtpbWVkaWEub3JnL3dpa2lwZWRpYS9jb21tb25zL3RodW1iL2QvZGUvJUQ3JTlFJUQ3JUFBJUQ3JTk3JUQ3JTlEXyVENyVBQSVENyU5NyVENyVBMCVENyVBQV8lRDclOTQlRDclQTglRDclOUIlRDclOTElRDclQUFfJUQ3JTk0JUQ3JTk4JUQ3JTk1JUQ3JUE4JUQ3JUE3JUQ3JTk5JUQ3JUFBXyVENyU5MSVENyU5MSVENyU5MCVENyVBOF8lRDclQTklRDclOTElRDclQTIuanBnLzEyODBweC0lRDclOUUlRDclQUElRDclOTclRDclOURfJUQ3JUFBJUQ3JTk3JUQ3JUEwJUQ3JUFBXyVENyU5NCVENyVBOCVENyU5QiVENyU5MSVENyVBQV8lRDclOTQlRDclOTglRDclOTUlRDclQTglRDclQTclRDclOTklRDclQUFfJUQ3JTkxJUQ3JTkxJUQ3JTkwJUQ3JUE4XyVENyVBOSVENyU5MSVENyVBMi5qcGdcIixcclxuICB9LFxyXG4gIFxyXG5dO1xyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuY29uc3Qgb3BlbkVkaXRVc2VyUG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xyXG5jb25zdCBvcGVuQWRkUGxhY2VzUG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG5cIik7XHJcblxyXG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwibmFtZV9pbnB1dFwiXScpO1xyXG5jb25zdCBhYm91dE1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiYWJvdXRfbWVcIl0nKTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgYWJvdXRNZUlucHV0LFxyXG4gIG5hbWVJbnB1dCxcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgb3BlbkVkaXRVc2VyUG9wdXBCdG4sXHJcbiAgb3BlbkFkZFBsYWNlc1BvcHVwQnRuLFxyXG4gIGZvcm1WYWxpZGF0b3JzLFxyXG59O1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBhcGlDb25maW5nIH0gZnJvbSBcIi4uLy4uL2NvbmZpZy5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi91dGlscy9BcGkuanNcIjtcclxuaW1wb3J0IHNwaW5uZXJHaWYgZnJvbSBcIi4uL2ltYWdlcy9wcm9maWxlL3NwaW5uZXJfc3ZnLnN2Z1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBhYm91dE1lSW5wdXQsXHJcbiAgbmFtZUlucHV0LFxyXG4gIGluaXRpYWxDYXJkcyxcclxuICBvcGVuRWRpdFVzZXJQb3B1cEJ0bixcclxuICBvcGVuQWRkUGxhY2VzUG9wdXBCdG4sXHJcbiAgZm9ybVZhbGlkYXRvcnMsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5mdW5jdGlvbiBjcmVhdGVQbGFjZUl0ZW0oaXRlbSkge1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChpdGVtLCBvcGVuSW1nUG9wdXAsIFwiI3BsYWNlcy1pdGVtLXRlbXBsYXRlXCIpO1xyXG4gIHJldHVybiBuZXdDYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKSB7XHJcbiAgY29uc3QgZm9ybUl0ZW1zID0gQXJyYXkuZnJvbShcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKVxyXG4gICk7XHJcblxyXG4gIGZvcm1JdGVtcy5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgICBjb25zdCBuZXdWYWlsZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtKTtcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybS5uYW1lO1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gbmV3VmFpbGQ7XHJcbiAgICBuZXdWYWlsZC5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5BZGRQcm9maWxlUG9wdXAoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX2FkZC1wbGFjZVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBBZGRQb3B1cC5vcGVuKCk7XHJcbn1cclxuZnVuY3Rpb24gb3BlbkVkaXRQcm9maWxlUG9wdXAoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX3Byb2ZpbGUtZWRpdFwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBFZGl0UG9wdXAub3BlbigpO1xyXG4gIGNvbnN0IHsgbmFtZUluZm8sIGFib3V0TWVJbmZvIH0gPSBwcm9maWxlVXNlci5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWVJbmZvO1xyXG4gIGFib3V0TWVJbnB1dC52YWx1ZSA9IGFib3V0TWVJbmZvO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5JbWdQb3B1cCh0aXRsZSwgbGluaykge1xyXG4gIG5ld0ltZ1BvcHVwLm9wZW4odGl0bGUsIGxpbmspO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEFkZEl0ZW0oeyB0aXRsZV9wbGFjZTogbmFtZSwgaW1nX2xpbms6IGxpbmsgfSkge1xyXG4gIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZVBsYWNlSXRlbSh7IG5hbWUsIGxpbmsgfSkpO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEVkaXRQcm9maWxlKHsgbmFtZV9pbnB1dCwgYWJvdXRfbWUgfSkge1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiZm9ybV9hZGQtcGxhY2VcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYXBpLnNldFVzZXJJbmZvKHsgbmFtZTogbmFtZV9pbnB1dCwgYWJvdXQ6IGFib3V0X21lIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgcHJvZmlsZVVzZXIuc2V0VXNlckluZm8ocmVzKTtcclxuICAgIC8vIHByb2ZpbGVVc2VyLnNldFVzZXJJbmZvKClcclxuICB9KTtcclxuICAvLyBwcm9maWxlVXNlci5zZXRVc2VySW5mbyhuYW1lX2lucHV0LCBhYm91dF9tZSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9hZGluZ0luaXQoc3RhdHVzLCBjYXJkSXRlbXNBcnIsIHVzZXJJbmZvKSB7XHJcbiAgaWYgKHN0YXR1cykge1xyXG4gICAgcHJvZmlsZVVzZXIuc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiBcIkxvYWRpbmcuLi5cIixcclxuICAgICAgYWJvdXQ6IFwiTG9hZGluZy4uLlwiLFxyXG4gICAgICBfaWQ6IG51bGwsXHJcbiAgICB9KTtcclxuICAgIHByb2ZpbGVVc2VyLnNldFBpY3R1cmVQcm9maWxlKHNwaW5uZXJHaWYpO1xyXG4gICAgY2FyZHNMaXN0LnNldE5ld0l0ZW1saXN0KFt7IG5hbWU6IFwiTG9hZGluZy4uLlwiLCBsaW5rOiBzcGlubmVyR2lmIH1dKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlc19fZ3JpZC1jb250YWluZXInKS5pbm5lckhUTUwgPScnXHJcbiAgICBwcm9maWxlVXNlci5zZXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IHVzZXJJbmZvLm5hbWUsXHJcbiAgICAgIGFib3V0OiB1c2VySW5mby5hYm91dCxcclxuICAgICAgX2lkOiB1c2VySW5mby5faWQsXHJcbiAgICB9KTtcclxuICAgIHByb2ZpbGVVc2VyLnNldFBpY3R1cmVQcm9maWxlKHVzZXJJbmZvLmF2YXRhcik7XHJcbiAgICBjYXJkc0xpc3Quc2V0TmV3SXRlbWxpc3QoY2FyZEl0ZW1zQXJyKTtcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gb25Jbml0KCkge1xyXG4gIHNldExvYWRpbmdJbml0KHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmdldEluaXRJbmZvKClcclxuICAgIC50aGVuKChbY2FyZEl0ZW1zQXJyLCB1c2VySW5mb10pID0+IHtcclxuICAgICAgc2V0TG9hZGluZ0luaXQoZmFsc2UsIGNhcmRJdGVtc0FyciwgdXNlckluZm8pO1xyXG4gICAgICBvcGVuRWRpdFVzZXJQb3B1cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkVkaXRQcm9maWxlUG9wdXApO1xyXG4gICAgICBvcGVuQWRkUGxhY2VzUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5BZGRQcm9maWxlUG9wdXApO1xyXG4gICAgICBlbmFibGVWYWxpZGF0aW9uKHtcclxuICAgICAgICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwLWJveF9fZm9ybVwiLFxyXG4gICAgICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwLWJveF9faW5wdXRcIixcclxuICAgICAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXAtYm94X19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgICAgICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cC1ib3hfX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIixcclxuICAgICAgICBpbnB1dEVycm9yQ2xhc3M6IFwiLnBvcHVwLWJveF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgICAgIGVycm9yQ2xhc3M6IFwiLnBvcHVwLWJveF9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBzZXRQb3B1cEV2ZW50KCk7XHJcbiAgICAgIGFwaS5hZGROZXdDYXJkKHtcclxuICAgICAgICBuYW1lOiBcImNhdHR0dHR0dHR0dHR0dHR0dHR0dHR0dFwiLFxyXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy90aHVtYi8zLzNhL0NhdDAzLmpwZy82MDBweC1DYXQwMy5qcGdcIixcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFBvcHVwRXZlbnQoKSB7XHJcbiAgRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgQWRkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBuZXdJbWdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG59XHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoaXRlbSkge1xyXG4gIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZVBsYWNlSXRlbShpdGVtKSk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKHJlbmRlckNhcmQsIFwiLnBsYWNlc19fZ3JpZC1jb250YWluZXJcIik7XHJcbmNvbnN0IEVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnBvcHVwLWJveF90eXBlX3Byb2ZpbGUtZWRpdFwiLFxyXG4gIGhhbmRsZVN1Ym1pdEVkaXRQcm9maWxlXHJcbik7XHJcbmNvbnN0IEFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXAtYm94X3R5cGVfYWRkLWl0ZW1cIixcclxuICBoYW5kbGVTdWJtaXRBZGRJdGVtXHJcbik7XHJcbmNvbnN0IG5ld0ltZ1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfdHlwZV9pbWdcIixcclxuICBpbWdTZWxlY3RvcjogXCIucG9wdXAtYm94X19pbWdcIixcclxuICBpbWdUaXRsZVNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2ltZy10aXRsZVwiLFxyXG59KTtcclxuY29uc3QgcHJvZmlsZVVzZXIgPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVFbG06IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBqb2JFbG06IFwiLnByb2ZpbGVfX2Fib3V0LW1lXCIsXHJcbiAgcGljRWxtOiBcIi5wcm9maWxlX19hdmF0YXJcIixcclxufSk7XHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpQ29uZmluZyk7XHJcblxyXG5vbkluaXQoKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IocmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWwpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsKTtcclxuICB9XHJcbiAgc2V0TmV3SXRlbWxpc3QoaXRlbXMpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLnJlbmRlckl0ZW1zKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBpbWdTZWxlY3RvciwgaW1nVGl0bGVTZWxlY3RvciB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltZ0VsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihpbWdTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihpbWdUaXRsZVNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zZXRQb3B1cEltZygpIHtcclxuICAgIHRoaXMuX3RpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMudGl0bGU7XHJcbiAgICB0aGlzLl9pbWdFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWdFbGVtZW50LmFsdCA9IGBhIHBpY3RydWUgb2YgJHt0aGlzLnRpdGxlfWA7XHJcbiAgfVxyXG5cclxuICBvcGVuKHRpdGxlLCBsaW5rKSB7XHJcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX3NldFBvcHVwSW1nKCk7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVFbG0sIGpvYkVsbSwgcGljRWxtIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVFbG0pO1xyXG4gICAgdGhpcy5fam9iRWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JFbG0pO1xyXG4gICAgdGhpcy5fcGljRWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwaWNFbG0pO1xyXG4gICAgcGljRWxtO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgX2lkIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbG0udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iRWxtLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSBfaWQ7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZUluZm86IHRoaXMuX25hbWVFbG0udGV4dENvbnRlbnQsXHJcbiAgICAgIGFib3V0TWVJbmZvOiB0aGlzLl9qb2JFbG0udGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuICBzZXRQaWN0dXJlUHJvZmlsZShwaWNTcmMpIHtcclxuICAgIHRoaXMuX3BpY0VsbS5zcmMgPSBwaWNTcmM7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xyXG4gIH1cclxuICBfb25IdHRwUmVxdWVzdCh1cmwsIG1ldGhvZCwgZGF0YSkge1xyXG4gICAgY29uc3QgZnVsbFVybCA9IGAke3RoaXMuYmFzZVVybH0ke3VybH1gO1xyXG4gICAgcmV0dXJuIGZldGNoKGZ1bGxVcmwsIHtcclxuICAgICAgbWV0aG9kLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBnZXRJbml0SW5mbygpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5fZ2V0SW5pdGlhbENhcmRzKCksIHRoaXMuX2dldFVzZXJJbmZvKCldKTtcclxuICB9XHJcbiAgX2dldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoXCJ1c2Vycy9tZVwiLCBcIkdFVFwiKTtcclxuICB9XHJcbiAgX2dldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KFwiY2FyZHNcIiwgXCJHRVRcIik7XHJcbiAgfVxyXG4gXHJcbiAgc2V0VXNlckluZm8oe25hbWUsYWJvdXR9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChcInVzZXJzL21lXCIsIFwiUEFUQ0hcIix7bmFtZSxhYm91dH0pO1xyXG4gIH1cclxuICBhZGROZXdDYXJkKHtuYW1lLGxpbmt9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdCgnY2FyZHMnLCdwb3N0Jyx7bmFtZSxsaW5rfSlcclxuICB9XHJcbn1cclxuIiwiY29uc3QgYXBpQ29uZmluZyA9IHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gIGF1dGhvcml6YXRpb246IFwiMDM1YTNlODAtMGQzZi00MjFiLWI0ZmEtN2Y0MDZlNDlhZDVmXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gIH1cclxufTtcclxuZXhwb3J0IHsgYXBpQ29uZmluZyB9O1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwIiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwidGhpcyIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfZm9ybSIsIl9zZXRGb3JtTGlzdGVuZXJzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfcmVtb3ZlSW5wdXRFcnJvciIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJyZXNldFZhbGlkYXRpb24iLCJidG5Gb3JtRWxtIiwiZGlzYWJsZWQiLCJyZXNldCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiaW5wdXQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiQ2FyZCIsImRhdGEiLCJoYW5kbGVJbWFnZUNsaWNrIiwiY2FyZFNlbGVjdG9yIiwibmFtZSIsImxpbmsiLCJfbmFtZSIsIl9saW5rIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfY2FyZFNlbGVjdG9yIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2hhbmRsZVRvZ2dsZUxpa2VkQnRuIiwic3RvcFByb3BhZ2F0aW9uIiwiX3BsYWNlTGlrZUJ0biIsInRvZ2dsZSIsIl9oYW5kbGVSZW1vdmVJdGVtIiwiX2NhcmRJdGVtIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZ2VuZXJhdGVDYXJkIiwiX3BsYWNlSW1nIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJhbHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0RnJvbSIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdEZyb20iLCJfcmV0dXJuSW5wdXRWYWxPYmoiLCJfZm9ybUVsZW1lbnQiLCJ2YWxJbnB1dE9iaiIsIml0ZW0iLCJ2YWx1ZSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiZm9ybVZhbGlkYXRvcnMiLCJvcGVuRWRpdFVzZXJQb3B1cEJ0biIsIm9wZW5BZGRQbGFjZXNQb3B1cEJ0biIsIm5hbWVJbnB1dCIsImFib3V0TWVJbnB1dCIsImNyZWF0ZVBsYWNlSXRlbSIsIm9wZW5JbWdQb3B1cCIsIm9wZW5BZGRQcm9maWxlUG9wdXAiLCJBZGRQb3B1cCIsIm9wZW5FZGl0UHJvZmlsZVBvcHVwIiwiRWRpdFBvcHVwIiwibmFtZUluZm8iLCJhYm91dE1lSW5mbyIsInByb2ZpbGVVc2VyIiwiZ2V0VXNlckluZm8iLCJ0aXRsZSIsIm5ld0ltZ1BvcHVwIiwic2V0TG9hZGluZ0luaXQiLCJzdGF0dXMiLCJjYXJkSXRlbXNBcnIiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJfaWQiLCJzZXRQaWN0dXJlUHJvZmlsZSIsInNwaW5uZXJHaWYiLCJjYXJkc0xpc3QiLCJzZXROZXdJdGVtbGlzdCIsImlubmVySFRNTCIsImF2YXRhciIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJfaXRlbXMiLCJhZGRJdGVtIiwiZWwiLCJwcmVwZW5kIiwiaXRlbXMiLCJuYW1lX2lucHV0IiwiYWJvdXRfbWUiLCJhcGkiLCJ0aGVuIiwicmVzIiwidGl0bGVfcGxhY2UiLCJpbWdfbGluayIsImltZ1NlbGVjdG9yIiwiaW1nVGl0bGVTZWxlY3RvciIsIl9pbWdFbGVtZW50IiwiX3RpdGxlRWxlbWVudCIsIl9zZXRQb3B1cEltZyIsInNyYyIsIm5hbWVFbG0iLCJqb2JFbG0iLCJwaWNFbG0iLCJfbmFtZUVsbSIsIl9qb2JFbG0iLCJfcGljRWxtIiwiX3VzZXJJZCIsInBpY1NyYyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX29uSHR0cFJlcXVlc3QiLCJ1cmwiLCJtZXRob2QiLCJmdWxsVXJsIiwiZmV0Y2giLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJnZXRJbml0SW5mbyIsImFsbCIsIl9nZXRJbml0aWFsQ2FyZHMiLCJfZ2V0VXNlckluZm8iLCJhZGROZXdDYXJkIiwiYXV0aG9yaXphdGlvbiIsIm5ld1ZhaWxkIiwiZm9ybU5hbWUiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6IiJ9