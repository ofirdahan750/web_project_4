!function(){"use strict";class e{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._errorClass=e.errorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._submitButtonSelector=e.submitButtonSelector,this._form=t}_setFormListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_showInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_removeInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._removeInputError(e):this._showInputError(e)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._removeInputError(e)}));const e=this._form.querySelector(".popup-box__submit-button");e.disabled=!0,e.classList.add("popup-box__submit-button_inactive"),this._form.reset()}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}enableValidation(){this._setFormListeners(),this._form.addEventListener("submit",(e=>e.preventDefault()))}}class t{constructor(e,t,s){const{name:n,link:i}=e;this._name=n,this._link=i,this._handleImageClick=t,this._cardSelector=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".places__item").cloneNode(!0)}_handleToggleLikedBtn(e){e.stopPropagation(),this._placeLikeBtn.classList.toggle("places__like-btn__active")}_handleRemoveItem(e){e.stopPropagation(),this._cardItem.remove(),this._cardItem=null}_setEventListeners(){this._cardItem.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)})),this._placeLikeBtn.addEventListener("click",(e=>{this._handleToggleLikedBtn(e)})),this._cardItem.querySelector(".places__remove-btn").addEventListener("click",(e=>{this._handleRemoveItem(e)}))}generateCard(){return this._cardItem=this._getTemplate(),this._placeImg=this._cardItem.querySelector(".places__img"),this._placeLikeBtn=this._cardItem.querySelector(".places__like-btn"),this._setEventListeners(),this._placeImg.style.backgroundImage="url(".concat(this._link,")"),this._placeImg.alt="a photo of ".concat(this._name),this._cardItem.querySelector(".places__name").textContent="".concat(this._name),this._cardItem}}class s{constructor(e){var t,s;s=e=>{"Escape"==e.key&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("popup-box_visible"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup-box_visible"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup-box_visible")||e.target.classList.contains("popup-box__close-button"))&&this.close()}))}}class n extends s{constructor(e,t){var s,n;super(e),n=e=>{e.preventDefault(),this._handleSubmitFrom(this._returnInputValObj()),this.close()},(s="_handleFormSubmit")in this?Object.defineProperty(this,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[s]=n,this._handleSubmitFrom=t,this._formElement=this._popupElement.querySelector(".popup-box__form"),this._inputList=[...this._formElement.querySelectorAll(".popup-box__input")]}_returnInputValObj(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}open(){super.open()}close(){super.close(),this._formElement.reset()}setEventListeners(){this._formElement.addEventListener("submit",this._handleFormSubmit),super.setEventListeners()}}const i={},o=document.querySelector(".profile__edit-btn"),r=document.querySelector(".profile__add-btn"),l=document.querySelector('input[name="name_input"]'),a=document.querySelector('input[name="about_me"]');function c(e){return new t(e,_,"#places-item-template").generateCard()}function _(e,t){h.open(e,t)}const u=new class{constructor(e,t){let{items:s,renderer:n}=e;this._renderer=n,this._container=document.querySelector(t),this._items=s}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:function(e){u.addItem(c(e))}},".places__grid-container"),p=new n(".popup-box_type_profile-edit",(function(e){let{name_input:t,about_me:s}=e;i["form_add-place"].resetValidation(),d.setUserInfo(t,s)})),m=new n(".popup-box_type_add-item",(function(e){let{title_place:t,img_link:s}=e;u.addItem(c({name:t,link:s}))})),h=new class extends s{constructor(e){let{popupSelector:t,imgSelector:s,imgTitleSelector:n}=e;super(t),this._imgElement=this._popupElement.querySelector(s),this._titleElement=this._popupElement.querySelector(n)}_setPopupImg(){this._titleElement.textContent=this.title,this._imgElement.src=this._link,this._imgElement.alt="a pictrue of ".concat(this.title)}open(e,t){this.title=e,this._link=t,this._setPopupImg(),super.open()}}({popupSelector:".popup-box_type_img",imgSelector:".popup-box__img",imgTitleSelector:".popup-box__img-title"}),d=new class{constructor(e){let{nameElm:t,jobElm:s}=e;this._nameElm=document.querySelector(t),this._jobElm=document.querySelector(s)}setUserInfo(e,t){this._nameElm.textContent=e,this._jobElm.textContent=t}getUserInfo(){return{nameInfo:this._nameElm.textContent,aboutMeInfo:this._jobElm.textContent}}}({nameElm:".profile__name",jobElm:".profile__about-me"});var b;u.renderItems(),o.addEventListener("click",(function(){i["form_profile-edit"].resetValidation(),p.open();const{nameInfo:e,aboutMeInfo:t}=d.getUserInfo();l.value=e,a.value=t})),r.addEventListener("click",(function(){i["form_add-place"].resetValidation(),m.open()})),b={formSelector:".popup-box__form",inputSelector:".popup-box__input",submitButtonSelector:".popup-box__submit-button",inactiveButtonClass:"popup-box__submit-button_inactive",inputErrorClass:".popup-box__input_type_error",errorClass:".popup-box__input-error_active"},Array.from(document.querySelectorAll(b.formSelector)).forEach((t=>{const s=new e(b,t),n=t.name;i[n]=s,s.enableValidation()})),p.setEventListeners(),m.setEventListeners(),h.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDVHFCLEVBQVlyQixvQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgfVxyXG4gIF9zZXRGb3JtTGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fcmVtb3ZlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW1vdmVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGJ0bkZvcm1FbG0gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtYm94X19zdWJtaXQtYnV0dG9uXCIpO1xyXG4gICAgYnRuRm9ybUVsbS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICBidG5Gb3JtRWxtLmNsYXNzTGlzdC5hZGQoXCJwb3B1cC1ib3hfX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIik7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEZvcm1MaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICB9XHJcbn1cclxuIiwiXHJcbmV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBoYW5kbGVJbWFnZUNsaWNrLCBjYXJkU2VsZWN0b3IpIHtcclxuICAgIGNvbnN0IHsgbmFtZSwgbGluayB9ID0gZGF0YTtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICB9XHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgcGxhY2VJdGVtVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9jYXJkU2VsZWN0b3JcclxuICAgICkuY29udGVudDtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gcGxhY2VJdGVtVGVtcGxhdGVcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19pdGVtXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuICBfaGFuZGxlVG9nZ2xlTGlrZWRCdG4oZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuX3BsYWNlTGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwicGxhY2VzX19saWtlLWJ0bl9fYWN0aXZlXCIpO1xyXG4gIH1cclxuICBfaGFuZGxlUmVtb3ZlSXRlbShlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5fY2FyZEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkSXRlbSA9IG51bGw7IFxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fcGxhY2VMaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVUb2dnbGVMaWtlZEJ0bihlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEl0ZW1cclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19yZW1vdmUtYnRuXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVJdGVtKGUpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRJdGVtID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3BsYWNlSW1nID0gdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2ltZ1wiKTtcclxuICAgIHRoaXMuX3BsYWNlTGlrZUJ0biA9IHRoaXMuX2NhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19saWtlLWJ0blwiKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wbGFjZUltZy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5fbGlua30pYDtcclxuICAgIHRoaXMuX3BsYWNlSW1nLmFsdCA9IGBhIHBob3RvIG9mICR7dGhpcy5fbmFtZX1gO1xyXG4gICAgdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX25hbWVcIikudGV4dENvbnRlbnQgPSBgJHt0aGlzLl9uYW1lfWA7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEl0ZW07XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwLWJveF92aXNpYmxlXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwLWJveF92aXNpYmxlXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXAtYm94X3Zpc2libGVcIikgfHxcclxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cC1ib3hfX2Nsb3NlLWJ1dHRvblwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0RnJvbSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRGcm9tID0gaGFuZGxlU3VibWl0RnJvbTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtYm94X19mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwLWJveF9faW5wdXRcIiksXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUZvcm1TdWJtaXQgPSAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0RnJvbSh0aGlzLl9yZXR1cm5JbnB1dFZhbE9iaigpKTtcclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICB9O1xyXG5cclxuICBfcmV0dXJuSW5wdXRWYWxPYmooKSB7XHJcbiAgICBjb25zdCB2YWxJbnB1dE9iaiA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdmFsSW5wdXRPYmpbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2YWxJbnB1dE9iajtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQpO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmNvbnN0IG9wZW5FZGl0VXNlclBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcclxuY29uc3Qgb3BlbkFkZFBsYWNlc1BvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG5cclxuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cIm5hbWVfaW5wdXRcIl0nKTtcclxuY29uc3QgYWJvdXRNZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImFib3V0X21lXCJdJyk7XHJcblxyXG5leHBvcnQge1xyXG4gIGFib3V0TWVJbnB1dCxcclxuICBuYW1lSW5wdXQsXHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIG9wZW5FZGl0VXNlclBvcHVwQnRuLFxyXG4gIG9wZW5BZGRQbGFjZXNQb3B1cEJ0bixcclxuICBmb3JtVmFsaWRhdG9ycyxcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHtcclxuICBhYm91dE1lSW5wdXQsXHJcbiAgbmFtZUlucHV0LFxyXG4gIGluaXRpYWxDYXJkcyxcclxuICBvcGVuRWRpdFVzZXJQb3B1cEJ0bixcclxuICBvcGVuQWRkUGxhY2VzUG9wdXBCdG4sXHJcbiAgZm9ybVZhbGlkYXRvcnMsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5mdW5jdGlvbiBjcmVhdGVQbGFjZUl0ZW0oaXRlbSkge1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChpdGVtLCBvcGVuSW1nUG9wdXAsIFwiI3BsYWNlcy1pdGVtLXRlbXBsYXRlXCIpO1xyXG4gIHJldHVybiBuZXdDYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKSB7XHJcbiAgY29uc3QgZm9ybUl0ZW1zID0gQXJyYXkuZnJvbShcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKVxyXG4gICk7XHJcblxyXG4gIGZvcm1JdGVtcy5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgICBjb25zdCBuZXdWYWlsZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtKTtcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybS5uYW1lO1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gbmV3VmFpbGQ7XHJcbiAgICBuZXdWYWlsZC5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5BZGRQcm9maWxlUG9wdXAoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX2FkZC1wbGFjZVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBBZGRQb3B1cC5vcGVuKCk7XHJcbn1cclxuZnVuY3Rpb24gb3BlbkVkaXRQcm9maWxlUG9wdXAoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX3Byb2ZpbGUtZWRpdFwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBFZGl0UG9wdXAub3BlbigpO1xyXG4gIGNvbnN0IHsgbmFtZUluZm8sIGFib3V0TWVJbmZvIH0gPSBwcm9maWxlVXNlci5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWVJbmZvO1xyXG4gIGFib3V0TWVJbnB1dC52YWx1ZSA9IGFib3V0TWVJbmZvO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5JbWdQb3B1cCh0aXRsZSwgbGluaykge1xyXG4gIG5ld0ltZ1BvcHVwLm9wZW4odGl0bGUsIGxpbmspO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEFkZEl0ZW0oeyB0aXRsZV9wbGFjZTogbmFtZSwgaW1nX2xpbms6IGxpbmsgfSkge1xyXG4gIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZVBsYWNlSXRlbSh7IG5hbWUsIGxpbmsgfSkpO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEVkaXRQcm9maWxlKHsgbmFtZV9pbnB1dCwgYWJvdXRfbWUgfSkge1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiZm9ybV9hZGQtcGxhY2VcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgcHJvZmlsZVVzZXIuc2V0VXNlckluZm8obmFtZV9pbnB1dCwgYWJvdXRfbWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkluaXQoKSB7XHJcbiAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKCk7XHJcbiAgb3BlbkVkaXRVc2VyUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5FZGl0UHJvZmlsZVBvcHVwKTtcclxuICBvcGVuQWRkUGxhY2VzUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5BZGRQcm9maWxlUG9wdXApO1xyXG4gIGVuYWJsZVZhbGlkYXRpb24oe1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2Zvcm1cIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwLWJveF9faW5wdXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX3N1Ym1pdC1idXR0b25cIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXAtYm94X19zdWJtaXQtYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwiLnBvcHVwLWJveF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCIucG9wdXAtYm94X19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxuICB9KTtcclxuICBzZXRQb3B1cEV2ZW50KCk7XHJcbn1cclxuZnVuY3Rpb24gc2V0UG9wdXBFdmVudCgpIHtcclxuICBFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBBZGRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIG5ld0ltZ1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbn1cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtKSB7XHJcbiAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlUGxhY2VJdGVtKGl0ZW0pKTtcclxufVxyXG5cclxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxyXG4gIH0sXHJcbiAgXCIucGxhY2VzX19ncmlkLWNvbnRhaW5lclwiXHJcbik7XHJcbmNvbnN0IEVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnBvcHVwLWJveF90eXBlX3Byb2ZpbGUtZWRpdFwiLFxyXG4gIGhhbmRsZVN1Ym1pdEVkaXRQcm9maWxlXHJcbik7XHJcbmNvbnN0IEFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXAtYm94X3R5cGVfYWRkLWl0ZW1cIixcclxuICBoYW5kbGVTdWJtaXRBZGRJdGVtXHJcbik7XHJcbmNvbnN0IG5ld0ltZ1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfdHlwZV9pbWdcIixcclxuICBpbWdTZWxlY3RvcjogXCIucG9wdXAtYm94X19pbWdcIixcclxuICBpbWdUaXRsZVNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2ltZy10aXRsZVwiLFxyXG59KTtcclxuY29uc3QgcHJvZmlsZVVzZXIgPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVFbG06IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBqb2JFbG06IFwiLnByb2ZpbGVfX2Fib3V0LW1lXCIsXHJcbn0pO1xyXG5vbkluaXQoKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWwpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGltZ1NlbGVjdG9yLCBpbWdUaXRsZVNlbGVjdG9yIH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1nRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKGltZ1NlbGVjdG9yKTtcclxuICAgIHRoaXMuX3RpdGxlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKGltZ1RpdGxlU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX3NldFBvcHVwSW1nKCkge1xyXG4gICAgdGhpcy5fdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy50aXRsZTtcclxuICAgIHRoaXMuX2ltZ0VsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2ltZ0VsZW1lbnQuYWx0ID0gYGEgcGljdHJ1ZSBvZiAke3RoaXMudGl0bGV9YDtcclxuICB9XHJcblxyXG4gIG9wZW4odGl0bGUsIGxpbmspIHtcclxuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fc2V0UG9wdXBJbWcoKTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZUVsbSwgam9iRWxtIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVFbG0pO1xyXG4gICAgdGhpcy5fam9iRWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JFbG0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXRNZSkge1xyXG4gICAgdGhpcy5fbmFtZUVsbS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbG0udGV4dENvbnRlbnQgPSBhYm91dE1lO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWVJbmZvOiB0aGlzLl9uYW1lRWxtLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dE1lSW5mbzogdGhpcy5fam9iRWxtLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsInNldHRpbmdzIiwiZm9ybSIsInRoaXMiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2Zvcm0iLCJfc2V0Rm9ybUxpc3RlbmVycyIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3JlbW92ZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJ2YWxpZGl0eSIsInZhbGlkIiwicmVzZXRWYWxpZGF0aW9uIiwiYnRuRm9ybUVsbSIsImRpc2FibGVkIiwicmVzZXQiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsImlucHV0IiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIkNhcmQiLCJkYXRhIiwiaGFuZGxlSW1hZ2VDbGljayIsImNhcmRTZWxlY3RvciIsIm5hbWUiLCJsaW5rIiwiX25hbWUiLCJfbGluayIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRTZWxlY3RvciIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9oYW5kbGVUb2dnbGVMaWtlZEJ0biIsInN0b3BQcm9wYWdhdGlvbiIsIl9wbGFjZUxpa2VCdG4iLCJ0b2dnbGUiLCJfaGFuZGxlUmVtb3ZlSXRlbSIsIl9jYXJkSXRlbSIsIl9zZXRFdmVudExpc3RlbmVycyIsImdlbmVyYXRlQ2FyZCIsIl9wbGFjZUltZyIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiYWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdEZyb20iLCJzdXBlciIsIl9oYW5kbGVTdWJtaXRGcm9tIiwiX3JldHVybklucHV0VmFsT2JqIiwiX2Zvcm1FbGVtZW50IiwidmFsSW5wdXRPYmoiLCJpdGVtIiwidmFsdWUiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsImZvcm1WYWxpZGF0b3JzIiwib3BlbkVkaXRVc2VyUG9wdXBCdG4iLCJvcGVuQWRkUGxhY2VzUG9wdXBCdG4iLCJuYW1lSW5wdXQiLCJhYm91dE1lSW5wdXQiLCJjcmVhdGVQbGFjZUl0ZW0iLCJvcGVuSW1nUG9wdXAiLCJ0aXRsZSIsIm5ld0ltZ1BvcHVwIiwiY2FyZHNMaXN0IiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIl9pdGVtcyIsInJlbmRlckl0ZW1zIiwiYWRkSXRlbSIsImVsIiwicHJlcGVuZCIsIkVkaXRQb3B1cCIsIm5hbWVfaW5wdXQiLCJhYm91dF9tZSIsInByb2ZpbGVVc2VyIiwic2V0VXNlckluZm8iLCJBZGRQb3B1cCIsInRpdGxlX3BsYWNlIiwiaW1nX2xpbmsiLCJpbWdTZWxlY3RvciIsImltZ1RpdGxlU2VsZWN0b3IiLCJfaW1nRWxlbWVudCIsIl90aXRsZUVsZW1lbnQiLCJfc2V0UG9wdXBJbWciLCJzcmMiLCJuYW1lRWxtIiwiam9iRWxtIiwiX25hbWVFbG0iLCJfam9iRWxtIiwiYWJvdXRNZSIsImdldFVzZXJJbmZvIiwibmFtZUluZm8iLCJhYm91dE1lSW5mbyIsIm5ld1ZhaWxkIiwiZm9ybU5hbWUiXSwic291cmNlUm9vdCI6IiJ9