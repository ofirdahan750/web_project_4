!function(){"use strict";var e={855:function(e,t,n){e.exports=n.p+"images/spinner_svg.dc4086388e55820fbae1.svg"}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.p="",function(){console.log(5);class e{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._errorClass=e.errorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._submitButtonSelector=e.submitButtonSelector,this._form=t}_setFormListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_getElementTxt(e){return"url"===e.type?"".concat(e.type,"-input"):e.id}_showInputError(e){const t=this._form.querySelector(".".concat(this._getElementTxt(e),"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_removeInputError(e){const t=this._form.querySelector(".".concat(this._getElementTxt(e),"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._removeInputError(e):this._showInputError(e)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._removeInputError(e)})),this._form.reset(),this._toggleButtonState()}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}enableValidation(){this._setFormListeners(),this._form.addEventListener("submit",(e=>e.preventDefault()))}}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i(),t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));let n="";for(let i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n+=Date.now(),n+Date.now()}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;return Math.floor(Math.random()*(t-e+1))+e}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";e.textContent=t}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r{constructor(e,n,i,o,r,l,a){var c=this;let{name:u,link:_,_id:h,owner:m}=e,{likes:d,isOwner:p}=l;s(this,"_renderLikes",(()=>{this._placeLikeAmount.textContent=this._likes.length,this._isLiked()?this._placeLikeBtn.classList.add("places__like-btn__active"):this._placeLikeBtn.classList.remove("places__like-btn__active")})),s(this,"onUpdateLikes",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];c._likes=e,c._renderLikes()})),this._name=u,this._link=_,this._handleImageClick=n,this._getUserId=r,this._openRemoveItemPopup=i,this._cardSelector=a,this._likes=d||[],this._isOwner=p||!1,this._id=h||t(),this._handleLikedToggle=o,this._owner=m,this._isLiked=()=>{if(!this._likes.length)return;const e=this._getUserId();return this._likes.some((t=>t._id===e))||!1}}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".places__item").cloneNode(!0)}_handleToggleLikedBtn(e){e.stopPropagation(),this._handleLikedToggle(this._isLiked(),this,this._id)}_handleRemoveItem(e){e.stopPropagation(),this._openRemoveItemPopup(this._id,this._cardItem)}_setEventListeners(){this._cardItem.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)})),this._placeLikeBtn.addEventListener("click",(e=>{this._handleToggleLikedBtn(e)})),this._cardItem.querySelector(".places__remove-btn").addEventListener("click",(e=>{this._handleRemoveItem(e)}))}generateCard(){return this._cardItem=this._getTemplate(),this._placeImg=this._cardItem.querySelector(".places__img"),this._placeLikeBtn=this._cardItem.querySelector(".places__like-btn"),this._placeLikeAmount=this._cardItem.querySelector(".places__like-counter"),this._placeRemoveBtn=this._cardItem.querySelector(".places__remove-btn"),this._renderLikes(),"Loading..."!==this._name&&"images/spinner_svg.dc4086388e55820fbae1.svg"!==this._link&&this._setEventListeners(),this._isOwner||this._placeRemoveBtn.remove(),this._placeImg.style.backgroundImage="url(".concat(this._link,")"),this._placeImg.alt="a photo of ".concat(this._name),this._cardItem.querySelector(".places__name").textContent="".concat(this._name),this._cardItem}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a{constructor(e){l(this,"_handleEscClose",(e=>{"Escape"==e.key&&this.close()})),l(this,"_handleContextMenu",(e=>{e.preventDefault()})),this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("popup-box_visible"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup-box_visible"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup-box_visible")||e.target.classList.contains("popup-box__close-button"))&&this.close()}))}}class c extends a{constructor(e,t){var n,i;super(e),i=e=>{e.preventDefault(),this._handleSubmitFrom(this._returnInputValObj())},(n="_handleFormSubmit")in this?Object.defineProperty(this,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[n]=i,this._handleSubmitFrom=t,this._formElement=this._popupElement.querySelector(".popup-box__form"),this._formBtn=this._formElement.querySelector(".popup-box__submit-button"),this._inputList=[...this._formElement.querySelectorAll(".popup-box__input")],this._modifyElementText=o}handleLoading(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Saving...",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._formBtn.disabled=!t,this._modifyElementText(this._formBtn,e)}_returnInputValObj(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}close(){super.close(),this._formElement.reset()}setEventListeners(){this._formElement.addEventListener("submit",this._handleFormSubmit),super.setEventListeners()}}var u=n(855);const _={},h=document.querySelector(".profile__edit-btn"),m=document.querySelector(".profile__add-btn"),d=document.querySelector(".profile__avatar-cover"),p="Something went wrong, please try again later ",f=document.querySelector('input[name="name_input"]'),g=document.querySelector('input[name="about_me"]');function v(){_["form_change-profile-pic"].resetValidation(),U.open()}function b(){_["form_add-place"].resetValidation(),w.open()}function E(){_["form_profile-edit"].resetValidation(),q.open(),function(e){let{nameInfo:t,aboutMeInfo:n}=e;f.value=t,g.value=n}(B.getUserInfo())}function L(e,t){P.open(e,t)}function S(e,t){T.open(e,t)}function I(){return B.getUserId()}function k(e,t,n){e?R.removeItemLike(n).then((e=>{t.onUpdateLikes(e.likes)})).catch((e=>console.log("Error: ".concat(e)))):R.addItemLike(n).then((e=>{t.onUpdateLikes(e.likes)})).catch((e=>console.log("Error: ".concat(e))))}function y(e,n,i){e?(B.setUserInfo({name:"Loading...",about:"Loading...",_id:t()}),B.setPictureProfile(u),C.setNewItemlist([{name:"Loading...",link:u,owner:{_id:t()},likes:[]}])):(document.querySelector(".places__grid-container").innerHTML="",B.setUserInfo({name:i.name,about:i.about,_id:i._id}),B.setPictureProfile(i.avatar),C.setNewItemlist(n),h.addEventListener("click",E),m.addEventListener("click",b),d.addEventListener("click",v))}function x(e,t){C.addItem(function(e,t){return new r(e,L,S,k,I,t,"#places-item-template").generateCard()}(e,t))}const C=new class{constructor(e){let{renderer:t,containerSelector:n}=e;this._renderer=t,this._container=document.querySelector(n)}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}setNewItemlist(e){this._items=e,this.renderItems()}}({renderer:e=>{const{owner:t,likes:n}=e,i=I();x(e,{isOwner:t._id===i,likes:n})},containerSelector:".places__grid-container"}),q=new c(".popup-box_type_profile-edit",(function(e){let{name_input:t,about_me:n}=e;_["form_add-place"].resetValidation(),q.handleLoading(),R.setUserInfo({name:t,about:n}).then((e=>{q.handleLoading("Profile edited successfully!"),B.setUserInfo(e),setTimeout((()=>{q.close()}),1e3)})).catch((e=>{q.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{q.handleLoading("Save",!0)}),1800)}))}),"Save"),w=new c(".popup-box_type_add-item",(function(e){let{title_place:t,img_link:n}=e;w.handleLoading(),R.addNewCard({name:t,link:n}).then((e=>{w.handleLoading("Place added successfully!"),x(e,{isOwner:!0,likes:[]}),setTimeout((()=>{w.close()}),1e3)})).catch((e=>{w.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{w.handleLoading("Create",!0)}),1800)}))})),P=new class extends a{constructor(e){let{popupSelector:t,imgSelector:n,imgTitleSelector:i}=e;super(t),this._imgElement=this._popupElement.querySelector(n),this._titleElement=this._popupElement.querySelector(i)}_setPopupImg(){this._titleElement.textContent=this.title,this._imgElement.src=this._link,this._imgElement.alt="a pictrue of ".concat(this.title)}open(e,t){this.title=e,this._link=t,this._setPopupImg(),super.open()}}({popupSelector:".popup-box_type_img",imgSelector:".popup-box__img",imgTitleSelector:".popup-box__img-title"}),T=new class extends a{constructor(e){let{popupSelector:t,handleSubmitRemoveConfirm:n}=e;var i,s;super(t),s=e=>{e.preventDefault(),this._handleSubmitRemoveConfirm(this._id,this._element)},(i="_handleConfirmSubmit")in this?Object.defineProperty(this,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[i]=s,this._handleSubmitRemoveConfirm=n,this._submitBtnElement=this._popupElement.querySelector(".popup-box__submit-button"),this._modifyElementText=o}open(e,t){super.open(),this._element=t,this._id=e}handleLoading(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Saving...",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._submitBtnElement.disabled=!t,this._modifyElementText(this._submitBtnElement,e)}setEventListeners(){this._submitBtnElement.addEventListener("click",this._handleConfirmSubmit),super.setEventListeners()}}({popupSelector:".popup-box_type_confirm",handleSubmitRemoveConfirm:function(e,t){T.handleLoading(),R.onRemoveItem(e).then((()=>{T.handleLoading("Place removed successfully!"),t.remove(),setTimeout((()=>{T.close()}),1e3)})).catch((e=>{T.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{T.handleLoading("Yes",!0)}),1050)}))}}),B=new class{constructor(e){let{nameElm:t,jobElm:n,picElm:i}=e;this._nameElm=document.querySelector(t),this._jobElm=document.querySelector(n),this._picElm=document.querySelector(i)}setUserInfo(e){let{name:t,about:n,_id:i}=e;this._nameElm.textContent=t,this._jobElm.textContent=n,this._userId=i}getUserInfo(){return{nameInfo:this._nameElm.textContent,aboutMeInfo:this._jobElm.textContent}}getUserId(){return this._userId}setPictureProfile(e){this._picElm.style.backgroundImage='url("'.concat(e,'")')}}({nameElm:".profile__name",jobElm:".profile__about-me",picElm:".profile__avatar-cover"}),U=new c(".popup-box_type_change-profile-pic",(function(e){let{img_link:t}=e;U.handleLoading(),R.onUpdateProfilePic({avatar:t}).then((()=>{U.handleLoading("Profile Picture modified successfully!"),B.setPictureProfile(t),setTimeout((()=>{U.close()}),1e3)})).catch((e=>{U.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{U.handleLoading("Save",!0)}),1e3)}))})),R=new class{constructor(e){let{baseUrl:t,headers:n}=e;this.headers=n,this.baseUrl=t}_onHttpRequest(e,t,n){const i="".concat(this.baseUrl).concat(e);return fetch(i,{method:t,headers:this.headers,body:JSON.stringify(n)}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}getInitInfo(){return Promise.all([this._getInitialCards(),this._getUserInfo()])}_getUserInfo(){return this._onHttpRequest("users/me","GET")}_getInitialCards(){return this._onHttpRequest("cards","GET")}setUserInfo(e){let{name:t,about:n}=e;return this._onHttpRequest("users/me","PATCH",{name:t,about:n})}addNewCard(e){let{name:t,link:n}=e;return this._onHttpRequest("cards","POST",{name:t,link:n})}onRemoveItem(e){return this._onHttpRequest("cards/".concat(e),"DELETE")}addItemLike(e){return this._onHttpRequest("cards/likes/".concat(e),"PUT")}removeItemLike(e){return this._onHttpRequest("cards/likes/".concat(e),"DELETE")}onUpdateProfilePic(e){let{avatar:t}=e;return this._onHttpRequest("users/me/avatar","PATCH",{avatar:t})}}({baseUrl:"https://around.nomoreparties.co/v1/group-12/",headers:{authorization:"035a3e80-0d3f-421b-b4fa-7f406e49ad5f","Content-Type":"application/json"}});y(!0),R.getInitInfo().then((t=>{let[n,i]=t;var o;y(!1,n,i),o={formSelector:".popup-box__form",inputSelector:".popup-box__input",submitButtonSelector:".popup-box__submit-button",inactiveButtonClass:"popup-box__submit-button_inactive",inputErrorClass:".popup-box__input_type_error",errorClass:".popup-box__input-error_active"},Array.from(document.querySelectorAll(o.formSelector)).forEach((t=>{const n=new e(o,t),i=t.name;_[i]=n,n.enableValidation()})),q.setEventListeners(),w.setEventListeners(),P.setEventListeners(),T.setEventListeners(),U.setEventListeners()})).catch((e=>console.log("Error: ".concat(e))))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG9CQUNUcUMsRUFBWXJDLG9CQUNadUMsRUFBbUJ2QyxvQkFDbkJ5QixFQUFzQnpCLHVCQVJuQjhDLE9BQU9DLEdBQVF4SyxRQUFRQyxJQUFSLGlCQUFzQnVLLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL2NvbmZpbmcuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiY29uc3QgYXBpQ29uZmluZyA9IHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIwMzVhM2U4MC0wZDNmLTQyMWItYjRmYS03ZjQwNmU0OWFkNWZcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn07XHJcbmV4cG9ydCB7IGFwaUNvbmZpbmcgfTtcclxuY29uc3QgeCA9IDU7XHJcbmNvbnNvbGUubG9nKHgpO1xyXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm0pIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHNldHRpbmdzLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICB9XHJcbiAgX3NldEZvcm1MaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF9nZXRFbGVtZW50VHh0KGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgdHh0ID1cclxuICAgICAgaW5wdXRFbGVtZW50LnR5cGUgPT09IFwidXJsXCJcclxuICAgICAgICA/IGAke2lucHV0RWxlbWVudC50eXBlfS1pbnB1dGBcclxuICAgICAgICA6IGlucHV0RWxlbWVudC5pZDtcclxuICAgIHJldHVybiB0eHQ7XHJcbiAgfVxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke3RoaXMuX2dldEVsZW1lbnRUeHQoaW5wdXRFbGVtZW50KX0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuICBfcmVtb3ZlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke3RoaXMuX2dldEVsZW1lbnRUeHQoaW5wdXRFbGVtZW50KX0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3JlbW92ZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5fcmVtb3ZlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0Rm9ybUxpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xyXG4gIH1cclxufVxyXG4iLCJmdW5jdGlvbiBnZXRSYW5kb21TdHJpbmcobGVuZ3RoID0gZ2V0UmFuZG9tSW50KCkpIHtcclxuICBsZXQgY2hhcnMgPVxyXG4gICAgXCIwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlrbG1ub3BxcnN0dXZ3eHl6XCIuc3BsaXQoXCJcIik7XHJcblxyXG4gIGlmICghbGVuZ3RoKSB7XHJcbiAgICBsZW5ndGggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpO1xyXG4gIH1cclxuXHJcbiAgbGV0IHN0ciA9IFwiXCI7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgc3RyICs9IGNoYXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCldO1xyXG4gIH1cclxuICBzdHIgKz0gRGF0ZS5ub3coKTtcclxuICByZXR1cm4gc3RyICsgRGF0ZS5ub3coKTtcclxufVxyXG5mdW5jdGlvbiBnZXRSYW5kb21JbnQobWluID0gMTAwLCBtYXggPSAxNTApIHtcclxuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxufVxyXG5mdW5jdGlvbiBtb2RpZnlFbGVtZW50VGV4dChlbGVtZW50LCB0eHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgZWxlbWVudC50ZXh0Q29udGVudCA9IHR4dDtcclxufVxyXG5cclxuZXhwb3J0IHsgZ2V0UmFuZG9tU3RyaW5nLCBtb2RpZnlFbGVtZW50VGV4dCB9O1xyXG4iLCJpbXBvcnQgeyBnZXRSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIG93bmVyIH0sXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgb3BlblJlbW92ZUl0ZW1Qb3B1cCxcclxuICAgIGhhbmRsZUxpa2VkVG9nZ2xlLFxyXG4gICAgZ2V0VXNlcklkLFxyXG4gICAgeyBsaWtlcywgaXNPd25lciB9LFxyXG4gICAgY2FyZFNlbGVjdG9yXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9nZXRVc2VySWQgPSBnZXRVc2VySWQ7XHJcbiAgICB0aGlzLl9vcGVuUmVtb3ZlSXRlbVBvcHVwID0gb3BlblJlbW92ZUl0ZW1Qb3B1cDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2xpa2VzID0gbGlrZXMgfHwgW107XHJcbiAgICB0aGlzLl9pc093bmVyID0gaXNPd25lciB8fCBmYWxzZTtcclxuICAgIHRoaXMuX2lkID0gX2lkIHx8IGdldFJhbmRvbVN0cmluZygpO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZWRUb2dnbGUgPSBoYW5kbGVMaWtlZFRvZ2dsZTtcclxuICAgIHRoaXMuX293bmVyID0gb3duZXI7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gKCkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuX2xpa2VzLmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgICBjb25zdCBpZCA9IHRoaXMuX2dldFVzZXJJZCgpO1xyXG4gICAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IGlkKSB8fCBmYWxzZTtcclxuICAgIH07XHJcbiAgfVxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IHBsYWNlSXRlbVRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yXHJcbiAgICApLmNvbnRlbnQ7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IHBsYWNlSXRlbVRlbXBsYXRlXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19faXRlbVwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcbiAgX2hhbmRsZVRvZ2dsZUxpa2VkQnRuKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlZFRvZ2dsZSh0aGlzLl9pc0xpa2VkKCksIHRoaXMsIHRoaXMuX2lkKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVSZW1vdmVJdGVtKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB0aGlzLl9vcGVuUmVtb3ZlSXRlbVBvcHVwKHRoaXMuX2lkLCB0aGlzLl9jYXJkSXRlbSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkSXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9wbGFjZUxpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVRvZ2dsZUxpa2VkQnRuKGUpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkSXRlbVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX3JlbW92ZS1idG5cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUl0ZW0oZSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBfcmVuZGVyTGlrZXMgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9wbGFjZUxpa2VBbW91bnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMuX3BsYWNlTGlrZUJ0bi5jbGFzc0xpc3QuYWRkKFwicGxhY2VzX19saWtlLWJ0bl9fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fcGxhY2VMaWtlQnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJwbGFjZXNfX2xpa2UtYnRuX19hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuICBvblVwZGF0ZUxpa2VzID0gKGxpa2VzID0gW10pID0+IHtcclxuICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gIH07XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRJdGVtID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3BsYWNlSW1nID0gdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2ltZ1wiKTtcclxuICAgIHRoaXMuX3BsYWNlTGlrZUJ0biA9IHRoaXMuX2NhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19saWtlLWJ0blwiKTtcclxuICAgIHRoaXMuX3BsYWNlTGlrZUFtb3VudCA9IHRoaXMuX2NhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnBsYWNlc19fbGlrZS1jb3VudGVyXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9wbGFjZVJlbW92ZUJ0biA9IHRoaXMuX2NhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19yZW1vdmUtYnRuXCIpO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5fbmFtZSAhPT0gXCJMb2FkaW5nLi4uXCIgJiZcclxuICAgICAgdGhpcy5fbGluayAhPT0gXCJpbWFnZXMvc3Bpbm5lcl9zdmcuZGM0MDg2Mzg4ZTU1ODIwZmJhZTEuc3ZnXCJcclxuICAgICkge1xyXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLl9pc093bmVyKSB7XHJcbiAgICAgIHRoaXMuX3BsYWNlUmVtb3ZlQnRuLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3BsYWNlSW1nLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9saW5rfSlgO1xyXG4gICAgdGhpcy5fcGxhY2VJbWcuYWx0ID0gYGEgcGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XHJcbiAgICB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fbmFtZVwiKS50ZXh0Q29udGVudCA9IGAke3RoaXMuX25hbWV9YDtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkSXRlbTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgX2hhbmRsZUNvbnRleHRNZW51ID0gKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9O1xyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwLWJveF92aXNpYmxlXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwLWJveF92aXNpYmxlXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXAtYm94X3Zpc2libGVcIikgfHxcclxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cC1ib3hfX2Nsb3NlLWJ1dHRvblwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuaW1wb3J0IHsgbW9kaWZ5RWxlbWVudFRleHQgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0RnJvbSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRGcm9tID0gaGFuZGxlU3VibWl0RnJvbTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtYm94X19mb3JtXCIpO1xyXG4gICAgdGhpcy5fZm9ybUJ0biA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnBvcHVwLWJveF9fc3VibWl0LWJ1dHRvblwiXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cC1ib3hfX2lucHV0XCIpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuX21vZGlmeUVsZW1lbnRUZXh0ID0gbW9kaWZ5RWxlbWVudFRleHQ7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRm9ybVN1Ym1pdCA9IChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRGcm9tKHRoaXMuX3JldHVybklucHV0VmFsT2JqKCkpO1xyXG4gIH07XHJcbiAgaGFuZGxlTG9hZGluZyh0eHQgPSBcIlNhdmluZy4uLlwiLCBpc0RvbmUgPSBmYWxzZSkge1xyXG4gICAgdGhpcy5fZm9ybUJ0bi5kaXNhYmxlZCA9ICFpc0RvbmUgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB0aGlzLl9tb2RpZnlFbGVtZW50VGV4dCh0aGlzLl9mb3JtQnRuLCB0eHQpO1xyXG4gIH1cclxuXHJcbiAgX3JldHVybklucHV0VmFsT2JqKCkge1xyXG4gICAgY29uc3QgdmFsSW5wdXRPYmogPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHZhbElucHV0T2JqW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdmFsSW5wdXRPYmo7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmVlcnNoZWJhIFR1cmtpc2ggcmFpbHdheSBzdGF0aW9uXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vdXBsb2FkLndpa2ltZWRpYS5vcmcvd2lraXBlZGlhL2NvbW1vbnMvdGh1bWIvZC9kZS8lRDclOUUlRDclQUElRDclOTclRDclOURfJUQ3JUFBJUQ3JTk3JUQ3JUEwJUQ3JUFBXyVENyU5NCVENyVBOCVENyU5QiVENyU5MSVENyVBQV8lRDclOTQlRDclOTglRDclOTUlRDclQTglRDclQTclRDclOTklRDclQUFfJUQ3JTkxJUQ3JTkxJUQ3JTkwJUQ3JUE4XyVENyVBOSVENyU5MSVENyVBMi5qcGcvMTI4MHB4LSVENyU5RSVENyVBQSVENyU5NyVENyU5RF8lRDclQUElRDclOTclRDclQTAlRDclQUFfJUQ3JTk0JUQ3JUE4JUQ3JTlCJUQ3JTkxJUQ3JUFBXyVENyU5NCVENyU5OCVENyU5NSVENyVBOCVENyVBNyVENyU5OSVENyVBQV8lRDclOTElRDclOTElRDclOTAlRDclQThfJUQ3JUE5JUQ3JTkxJUQ3JUEyLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG5jb25zdCBvcGVuRWRpdFVzZXJQb3B1cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XHJcbmNvbnN0IG9wZW5BZGRQbGFjZXNQb3B1cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcclxuY29uc3Qgb3BlbkNoYW5nZVByb2ZpbGVQb3B1cEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fYXZhdGFyLWNvdmVyXCJcclxuKTtcclxuXHJcbmNvbnN0IHR4dEVyciA9IFwiU29tZXRoaW5nIHdlbnQgd3JvbmcsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIgXCI7XHJcblxyXG5leHBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBvcGVuRWRpdFVzZXJQb3B1cEJ0bixcclxuICBvcGVuQWRkUGxhY2VzUG9wdXBCdG4sXHJcbiAgZm9ybVZhbGlkYXRvcnMsXHJcbiAgb3BlbkNoYW5nZVByb2ZpbGVQb3B1cEJ0bixcclxuICB0eHRFcnIsXHJcbn07XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGFwaUNvbmZpbmcgfSBmcm9tIFwiLi4vLi4vY29uZmluZy5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi91dGlscy9BcGkuanNcIjtcclxuaW1wb3J0IHNwaW5uZXJHaWYgZnJvbSBcIi4uL2ltYWdlcy9wcm9maWxlL3NwaW5uZXJfc3ZnLnN2Z1wiO1xyXG5pbXBvcnQgeyBnZXRSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgb3BlbkNoYW5nZVByb2ZpbGVQb3B1cEJ0bixcclxuICBvcGVuRWRpdFVzZXJQb3B1cEJ0bixcclxuICBvcGVuQWRkUGxhY2VzUG9wdXBCdG4sXHJcbiAgZm9ybVZhbGlkYXRvcnMsXHJcbiAgdHh0RXJyLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm1cIjtcclxuXHJcbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJuYW1lX2lucHV0XCJdJyk7XHJcbmNvbnN0IGFib3V0TWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJhYm91dF9tZVwiXScpO1xyXG5cclxuY29uc3QgaW5pdGlhbEJ0blR4dCA9IHtcclxuICBlZGl0UG9wdXA6IFwiU2F2ZVwiLFxyXG4gIGFkZFBvcHVwOiBcIkNyZWF0ZVwiLFxyXG4gIGRlbGV0ZUNvbmZpcm1Qb3B1cDogXCJZZXNcIixcclxuICBjaGFuZ2VQcm9maWxlUGljUG9wdXA6IFwiU2F2ZVwiLFxyXG59O1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlUGxhY2VJdGVtKGl0ZW0sIGNhcmRJbmZvKSB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgaXRlbSxcclxuICAgIG9wZW5JbWdQb3B1cCxcclxuICAgIG9wZW5SZW1vdmVJdGVtUG9wdXAsXHJcbiAgICBoYW5kbGVMaWtlZFRvZ2dsZSxcclxuICAgIGdldFVzZXJJZCxcclxuICAgIGNhcmRJbmZvLFxyXG4gICAgXCIjcGxhY2VzLWl0ZW0tdGVtcGxhdGVcIlxyXG4gICk7XHJcbiAgcmV0dXJuIG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpIHtcclxuICBjb25zdCBmb3JtSXRlbXMgPSBBcnJheS5mcm9tKFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5mb3JtU2VsZWN0b3IpXHJcbiAgKTtcclxuXHJcbiAgZm9ybUl0ZW1zLmZvckVhY2goKGZvcm0pID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtKTtcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybS5uYW1lO1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufVxyXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oeyBuYW1lSW5mbywgYWJvdXRNZUluZm8gfSkge1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWVJbmZvO1xyXG4gIGFib3V0TWVJbnB1dC52YWx1ZSA9IGFib3V0TWVJbmZvO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5DaGFuZ2VQcm9maWxlUG9wdXAoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX2NoYW5nZS1wcm9maWxlLXBpY1wiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBjaGFuZ2VQcm9maWxlUGljUG9wdXAub3BlbigpO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5BZGRQcm9maWxlUG9wdXAoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX2FkZC1wbGFjZVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRQb3B1cC5vcGVuKCk7XHJcbn1cclxuZnVuY3Rpb24gb3BlbkVkaXRQcm9maWxlUG9wdXAoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtX3Byb2ZpbGUtZWRpdFwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0UG9wdXAub3BlbigpO1xyXG4gIGZpbGxQcm9maWxlRm9ybShwcm9maWxlVXNlci5nZXRVc2VySW5mbygpKTtcclxufVxyXG5mdW5jdGlvbiBvcGVuSW1nUG9wdXAodGl0bGUsIGxpbmspIHtcclxuICBuZXdJbWdQb3B1cC5vcGVuKHRpdGxlLCBsaW5rKTtcclxufVxyXG5mdW5jdGlvbiBvcGVuUmVtb3ZlSXRlbVBvcHVwKGlkLCBjYXJkSXRlbSkge1xyXG4gIGRlbGV0ZUNvbmZpcm1Qb3B1cC5vcGVuKGlkLCBjYXJkSXRlbSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0VXNlcklkKCkge1xyXG4gIHJldHVybiBwcm9maWxlVXNlci5nZXRVc2VySWQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlU3VibWl0QWRkSXRlbSh7IHRpdGxlX3BsYWNlOiBuYW1lLCBpbWdfbGluazogbGluayB9KSB7XHJcbiAgYWRkUG9wdXAuaGFuZGxlTG9hZGluZygpO1xyXG4gIGFwaVxyXG4gICAgLmFkZE5ld0NhcmQoe1xyXG4gICAgICBuYW1lLFxyXG4gICAgICBsaW5rLFxyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgYWRkUG9wdXAuaGFuZGxlTG9hZGluZyhcIlBsYWNlIGFkZGVkIHN1Y2Nlc3NmdWxseSFcIik7XHJcbiAgICAgIGNvbnN0IGNhcmRJbmZvID0ge1xyXG4gICAgICAgIGlzT3duZXI6IHRydWUsXHJcbiAgICAgICAgbGlrZXM6IFtdLFxyXG4gICAgICB9O1xyXG4gICAgICByZW5kZXJDYXJkKHJlcywgY2FyZEluZm8pO1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBhZGRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBhZGRQb3B1cC5oYW5kbGVMb2FkaW5nKHR4dEVycik7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBhZGRQb3B1cC5oYW5kbGVMb2FkaW5nKGluaXRpYWxCdG5UeHQuYWRkUG9wdXAsIHRydWUpO1xyXG4gICAgICB9LCAxODAwKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0oaWQsIGl0ZW0pIHtcclxuICBkZWxldGVDb25maXJtUG9wdXAuaGFuZGxlTG9hZGluZygpO1xyXG4gIGFwaVxyXG4gICAgLm9uUmVtb3ZlSXRlbShpZClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgZGVsZXRlQ29uZmlybVBvcHVwLmhhbmRsZUxvYWRpbmcoXCJQbGFjZSByZW1vdmVkIHN1Y2Nlc3NmdWxseSFcIik7XHJcbiAgICAgIGl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGRlbGV0ZUNvbmZpcm1Qb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBkZWxldGVDb25maXJtUG9wdXAuaGFuZGxlTG9hZGluZyh0eHRFcnIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlQ29uZmlybVBvcHVwLmhhbmRsZUxvYWRpbmcoXHJcbiAgICAgICAgICBpbml0aWFsQnRuVHh0LmRlbGV0ZUNvbmZpcm1Qb3B1cCxcclxuICAgICAgICAgIHRydWVcclxuICAgICAgICApO1xyXG4gICAgICB9LCAxMDUwKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEVkaXRQcm9maWxlKHsgbmFtZV9pbnB1dCwgYWJvdXRfbWUgfSkge1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiZm9ybV9hZGQtcGxhY2VcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZWRpdFBvcHVwLmhhbmRsZUxvYWRpbmcoKTtcclxuXHJcbiAgYXBpXHJcbiAgICAuc2V0VXNlckluZm8oeyBuYW1lOiBuYW1lX2lucHV0LCBhYm91dDogYWJvdXRfbWUgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgZWRpdFBvcHVwLmhhbmRsZUxvYWRpbmcoXCJQcm9maWxlIGVkaXRlZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgICBwcm9maWxlVXNlci5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBlZGl0UG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgZWRpdFBvcHVwLmhhbmRsZUxvYWRpbmcodHh0RXJyKTtcclxuICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGVkaXRQb3B1cC5oYW5kbGVMb2FkaW5nKGluaXRpYWxCdG5UeHQuZWRpdFBvcHVwLCB0cnVlKTtcclxuICAgICAgfSwgMTgwMCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVTdWJtaXRQcm9maWxlUGljKHsgaW1nX2xpbmsgfSkge1xyXG4gIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5oYW5kbGVMb2FkaW5nKCk7XHJcbiAgYXBpXHJcbiAgICAub25VcGRhdGVQcm9maWxlUGljKHsgYXZhdGFyOiBpbWdfbGluayB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjaGFuZ2VQcm9maWxlUGljUG9wdXAuaGFuZGxlTG9hZGluZyhcclxuICAgICAgICBcIlByb2ZpbGUgUGljdHVyZSBtb2RpZmllZCBzdWNjZXNzZnVsbHkhXCJcclxuICAgICAgKTtcclxuICAgICAgcHJvZmlsZVVzZXIuc2V0UGljdHVyZVByb2ZpbGUoaW1nX2xpbmspO1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBjaGFuZ2VQcm9maWxlUGljUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLmhhbmRsZUxvYWRpbmcodHh0RXJyKTtcclxuICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKTtcclxuICAgIH0pXHJcblxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBjaGFuZ2VQcm9maWxlUGljUG9wdXAuaGFuZGxlTG9hZGluZyhcclxuICAgICAgICAgIGluaXRpYWxCdG5UeHQuY2hhbmdlUHJvZmlsZVBpY1BvcHVwLFxyXG4gICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlTGlrZWRUb2dnbGUoaXNMaWtlZCwgaXRlbSwgaWQpIHtcclxuICBpZiAoIWlzTGlrZWQpIHtcclxuICAgIGFwaVxyXG4gICAgICAuYWRkSXRlbUxpa2UoaWQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpdGVtLm9uVXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGlcclxuICAgICAgLnJlbW92ZUl0ZW1MaWtlKGlkKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaXRlbS5vblVwZGF0ZUxpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9hZGluZ0luaXQoc3RhdHVzLCBjYXJkSXRlbXNBcnIsIHVzZXJJbmZvKSB7XHJcbiAgaWYgKHN0YXR1cykge1xyXG4gICAgcHJvZmlsZVVzZXIuc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiBcIkxvYWRpbmcuLi5cIixcclxuICAgICAgYWJvdXQ6IFwiTG9hZGluZy4uLlwiLFxyXG4gICAgICBfaWQ6IGdldFJhbmRvbVN0cmluZygpLFxyXG4gICAgfSk7XHJcbiAgICBwcm9maWxlVXNlci5zZXRQaWN0dXJlUHJvZmlsZShzcGlubmVyR2lmKTtcclxuICAgIGNhcmRzTGlzdC5zZXROZXdJdGVtbGlzdChbXHJcbiAgICAgIHtcclxuICAgICAgICBuYW1lOiBcIkxvYWRpbmcuLi5cIixcclxuICAgICAgICBsaW5rOiBzcGlubmVyR2lmLFxyXG4gICAgICAgIG93bmVyOiB7IF9pZDogZ2V0UmFuZG9tU3RyaW5nKCkgfSxcclxuICAgICAgICBsaWtlczogW10sXHJcbiAgICAgIH0sXHJcbiAgICBdKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2dyaWQtY29udGFpbmVyXCIpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICBwcm9maWxlVXNlci5zZXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IHVzZXJJbmZvLm5hbWUsXHJcbiAgICAgIGFib3V0OiB1c2VySW5mby5hYm91dCxcclxuICAgICAgX2lkOiB1c2VySW5mby5faWQsXHJcbiAgICB9KTtcclxuICAgIHByb2ZpbGVVc2VyLnNldFBpY3R1cmVQcm9maWxlKHVzZXJJbmZvLmF2YXRhcik7XHJcbiAgICBjYXJkc0xpc3Quc2V0TmV3SXRlbWxpc3QoY2FyZEl0ZW1zQXJyKTtcclxuICAgIG9wZW5FZGl0VXNlclBvcHVwQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuRWRpdFByb2ZpbGVQb3B1cCk7XHJcbiAgICBvcGVuQWRkUGxhY2VzUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5BZGRQcm9maWxlUG9wdXApO1xyXG4gICAgb3BlbkNoYW5nZVByb2ZpbGVQb3B1cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkNoYW5nZVByb2ZpbGVQb3B1cCk7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIG9uSW5pdCgpIHtcclxuICBzZXRMb2FkaW5nSW5pdCh0cnVlKTtcclxuICBhcGlcclxuICAgIC5nZXRJbml0SW5mbygpXHJcbiAgICAudGhlbigoW2NhcmRJdGVtc0FyciwgdXNlckluZm9dKSA9PiB7XHJcbiAgICAgIHNldExvYWRpbmdJbml0KGZhbHNlLCBjYXJkSXRlbXNBcnIsIHVzZXJJbmZvKTtcclxuICAgICAgZW5hYmxlVmFsaWRhdGlvbih7XHJcbiAgICAgICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2Zvcm1cIixcclxuICAgICAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2lucHV0XCIsXHJcbiAgICAgICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwLWJveF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gICAgICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXAtYm94X19zdWJtaXQtYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgICAgICAgaW5wdXRFcnJvckNsYXNzOiBcIi5wb3B1cC1ib3hfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgICAgICBlcnJvckNsYXNzOiBcIi5wb3B1cC1ib3hfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG4gICAgICB9KTtcclxuICAgICAgc2V0UG9wdXBFdmVudCgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0UG9wdXBFdmVudCgpIHtcclxuICBlZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBhZGRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIG5ld0ltZ1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgZGVsZXRlQ29uZmlybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbn1cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtLCBjYXJkSW5mbykge1xyXG4gIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZVBsYWNlSXRlbShpdGVtLCBjYXJkSW5mbykpO1xyXG59XHJcblxyXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7XHJcbiAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XHJcbiAgICBjb25zdCB7IG93bmVyLCBsaWtlcyB9ID0gZGF0YTtcclxuICAgIGNvbnN0IGlkID0gZ2V0VXNlcklkKCk7XHJcbiAgICBjb25zdCBjYXJkSW5mbyA9IHtcclxuICAgICAgaXNPd25lcjogb3duZXIuX2lkID09PSBpZCxcclxuICAgICAgbGlrZXMsXHJcbiAgICB9O1xyXG4gICAgcmVuZGVyQ2FyZChkYXRhLCBjYXJkSW5mbyk7XHJcbiAgfSxcclxuICBjb250YWluZXJTZWxlY3RvcjogXCIucGxhY2VzX19ncmlkLWNvbnRhaW5lclwiLFxyXG59KTtcclxuY29uc3QgZWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXAtYm94X3R5cGVfcHJvZmlsZS1lZGl0XCIsXHJcbiAgaGFuZGxlU3VibWl0RWRpdFByb2ZpbGUsXHJcbiAgXCJTYXZlXCJcclxuKTtcclxuXHJcbmNvbnN0IGFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXAtYm94X3R5cGVfYWRkLWl0ZW1cIixcclxuICBoYW5kbGVTdWJtaXRBZGRJdGVtXHJcbik7XHJcbmNvbnN0IG5ld0ltZ1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfdHlwZV9pbWdcIixcclxuICBpbWdTZWxlY3RvcjogXCIucG9wdXAtYm94X19pbWdcIixcclxuICBpbWdUaXRsZVNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2ltZy10aXRsZVwiLFxyXG59KTtcclxuXHJcbmNvbnN0IGRlbGV0ZUNvbmZpcm1Qb3B1cCA9IG5ldyBQb3B1cENvbmZpcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiLnBvcHVwLWJveF90eXBlX2NvbmZpcm1cIixcclxuICBoYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtLFxyXG59KTtcclxuY29uc3QgcHJvZmlsZVVzZXIgPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVFbG06IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBqb2JFbG06IFwiLnByb2ZpbGVfX2Fib3V0LW1lXCIsXHJcbiAgcGljRWxtOiBcIi5wcm9maWxlX19hdmF0YXItY292ZXJcIixcclxufSk7XHJcbmNvbnN0IGNoYW5nZVByb2ZpbGVQaWNQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnBvcHVwLWJveF90eXBlX2NoYW5nZS1wcm9maWxlLXBpY1wiLFxyXG4gIGhhbmRsZVN1Ym1pdFByb2ZpbGVQaWNcclxuKTtcclxuY29uc3QgYXBpID0gbmV3IEFwaShhcGlDb25maW5nKTtcclxub25Jbml0KCk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWwpO1xyXG4gIH1cclxuICBzZXROZXdJdGVtbGlzdChpdGVtcykge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMucmVuZGVySXRlbXMoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGltZ1NlbGVjdG9yLCBpbWdUaXRsZVNlbGVjdG9yIH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1nRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKGltZ1NlbGVjdG9yKTtcclxuICAgIHRoaXMuX3RpdGxlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKGltZ1RpdGxlU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX3NldFBvcHVwSW1nKCkge1xyXG4gICAgdGhpcy5fdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy50aXRsZTtcclxuICAgIHRoaXMuX2ltZ0VsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2ltZ0VsZW1lbnQuYWx0ID0gYGEgcGljdHJ1ZSBvZiAke3RoaXMudGl0bGV9YDtcclxuICB9XHJcblxyXG4gIG9wZW4odGl0bGUsIGxpbmspIHtcclxuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fc2V0UG9wdXBJbWcoKTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmltcG9ydCB7IG1vZGlmeUVsZW1lbnRUZXh0IH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0gfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtID0gaGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucG9wdXAtYm94X19zdWJtaXQtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9tb2RpZnlFbGVtZW50VGV4dCA9IG1vZGlmeUVsZW1lbnRUZXh0O1xyXG4gIH1cclxuICBvcGVuKGlkLCBlbGVtZW50KSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcclxuICAgIHRoaXMuX2lkID0gaWQ7XHJcbiAgfVxyXG4gIGhhbmRsZUxvYWRpbmcodHh0ID0gXCJTYXZpbmcuLi5cIiwgaXNEb25lID0gZmFsc2UpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bkVsZW1lbnQuZGlzYWJsZWQgPSAhaXNEb25lID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgdGhpcy5fbW9kaWZ5RWxlbWVudFRleHQodGhpcy5fc3VibWl0QnRuRWxlbWVudCwgdHh0KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVDb25maXJtU3VibWl0ID0gKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0odGhpcy5faWQsIHRoaXMuX2VsZW1lbnQpO1xyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ29uZmlybVN1Ym1pdCk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lRWxtLCBqb2JFbG0sIHBpY0VsbSB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lRWxtKTtcclxuICAgIHRoaXMuX2pvYkVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iRWxtKTtcclxuICAgIHRoaXMuX3BpY0VsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGljRWxtKTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQsIF9pZCB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxtLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYkVsbS50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gICAgdGhpcy5fdXNlcklkID0gX2lkO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWVJbmZvOiB0aGlzLl9uYW1lRWxtLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dE1lSW5mbzogdGhpcy5fam9iRWxtLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgZ2V0VXNlcklkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3VzZXJJZDtcclxuICB9XHJcbiAgc2V0UGljdHVyZVByb2ZpbGUocGljU3JjKSB7XHJcbiAgICB0aGlzLl9waWNFbG0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybChcIiR7cGljU3JjfVwiKWA7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xyXG4gIH1cclxuICBfb25IdHRwUmVxdWVzdCh1cmwsIG1ldGhvZCwgZGF0YSkge1xyXG4gICAgY29uc3QgZnVsbFVybCA9IGAke3RoaXMuYmFzZVVybH0ke3VybH1gO1xyXG4gICAgcmV0dXJuIGZldGNoKGZ1bGxVcmwsIHtcclxuICAgICAgbWV0aG9kLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBnZXRJbml0SW5mbygpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5fZ2V0SW5pdGlhbENhcmRzKCksIHRoaXMuX2dldFVzZXJJbmZvKCldKTtcclxuICB9XHJcbiAgX2dldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoXCJ1c2Vycy9tZVwiLCBcIkdFVFwiKTtcclxuICB9XHJcbiAgX2dldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KFwiY2FyZHNcIiwgXCJHRVRcIik7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KFwidXNlcnMvbWVcIiwgXCJQQVRDSFwiLCB7IG5hbWUsIGFib3V0IH0pO1xyXG4gIH1cclxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChcImNhcmRzXCIsIFwiUE9TVFwiLCB7IG5hbWUsIGxpbmsgfSk7XHJcbiAgfVxyXG4gIG9uUmVtb3ZlSXRlbShpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoYGNhcmRzLyR7aWR9YCwgXCJERUxFVEVcIik7XHJcbiAgfVxyXG4gIGFkZEl0ZW1MaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChgY2FyZHMvbGlrZXMvJHtpZH1gLCBcIlBVVFwiKTtcclxuICB9XHJcbiAgcmVtb3ZlSXRlbUxpa2UoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KGBjYXJkcy9saWtlcy8ke2lkfWAsIFwiREVMRVRFXCIpO1xyXG4gIH1cclxuICBvblVwZGF0ZVByb2ZpbGVQaWMoeyBhdmF0YXIgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoXCJ1c2Vycy9tZS9hdmF0YXJcIiwgXCJQQVRDSFwiLCB7IGF2YXRhciB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwicCIsImNvbnNvbGUiLCJsb2ciLCJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm0iLCJ0aGlzIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9mb3JtIiwiX3NldEZvcm1MaXN0ZW5lcnMiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9nZXRFbGVtZW50VHh0IiwidHlwZSIsImlkIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9yZW1vdmVJbnB1dEVycm9yIiwicmVtb3ZlIiwidmFsaWRpdHkiLCJ2YWxpZCIsInJlc2V0VmFsaWRhdGlvbiIsInJlc2V0IiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwic29tZSIsImlucHV0IiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImdldFJhbmRvbVN0cmluZyIsImxlbmd0aCIsImdldFJhbmRvbUludCIsImNoYXJzIiwic3BsaXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzdHIiLCJpIiwiRGF0ZSIsIm5vdyIsIm1pbiIsIm1heCIsIm1vZGlmeUVsZW1lbnRUZXh0IiwiZWxlbWVudCIsInR4dCIsIkNhcmQiLCJoYW5kbGVJbWFnZUNsaWNrIiwib3BlblJlbW92ZUl0ZW1Qb3B1cCIsImhhbmRsZUxpa2VkVG9nZ2xlIiwiZ2V0VXNlcklkIiwiY2FyZFNlbGVjdG9yIiwibmFtZSIsImxpbmsiLCJfaWQiLCJvd25lciIsImxpa2VzIiwiaXNPd25lciIsIl9wbGFjZUxpa2VBbW91bnQiLCJfbGlrZXMiLCJfaXNMaWtlZCIsIl9wbGFjZUxpa2VCdG4iLCJfcmVuZGVyTGlrZXMiLCJfbmFtZSIsIl9saW5rIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfZ2V0VXNlcklkIiwiX29wZW5SZW1vdmVJdGVtUG9wdXAiLCJfY2FyZFNlbGVjdG9yIiwiX2lzT3duZXIiLCJfaGFuZGxlTGlrZWRUb2dnbGUiLCJfb3duZXIiLCJsaWtlIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2hhbmRsZVRvZ2dsZUxpa2VkQnRuIiwic3RvcFByb3BhZ2F0aW9uIiwiX2hhbmRsZVJlbW92ZUl0ZW0iLCJfY2FyZEl0ZW0iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJnZW5lcmF0ZUNhcmQiLCJfcGxhY2VJbWciLCJfcGxhY2VSZW1vdmVCdG4iLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImFsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImtleSIsImNsb3NlIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXRGcm9tIiwic3VwZXIiLCJfaGFuZGxlU3VibWl0RnJvbSIsIl9yZXR1cm5JbnB1dFZhbE9iaiIsIl9mb3JtRWxlbWVudCIsIl9mb3JtQnRuIiwiX21vZGlmeUVsZW1lbnRUZXh0IiwiaGFuZGxlTG9hZGluZyIsImlzRG9uZSIsInZhbElucHV0T2JqIiwiaXRlbSIsInZhbHVlIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJmb3JtVmFsaWRhdG9ycyIsIm9wZW5FZGl0VXNlclBvcHVwQnRuIiwib3BlbkFkZFBsYWNlc1BvcHVwQnRuIiwib3BlbkNoYW5nZVByb2ZpbGVQb3B1cEJ0biIsInR4dEVyciIsIm5hbWVJbnB1dCIsImFib3V0TWVJbnB1dCIsIm9wZW5DaGFuZ2VQcm9maWxlUG9wdXAiLCJjaGFuZ2VQcm9maWxlUGljUG9wdXAiLCJvcGVuQWRkUHJvZmlsZVBvcHVwIiwiYWRkUG9wdXAiLCJvcGVuRWRpdFByb2ZpbGVQb3B1cCIsImVkaXRQb3B1cCIsIm5hbWVJbmZvIiwiYWJvdXRNZUluZm8iLCJmaWxsUHJvZmlsZUZvcm0iLCJwcm9maWxlVXNlciIsImdldFVzZXJJbmZvIiwib3BlbkltZ1BvcHVwIiwidGl0bGUiLCJuZXdJbWdQb3B1cCIsImNhcmRJdGVtIiwiZGVsZXRlQ29uZmlybVBvcHVwIiwiaXNMaWtlZCIsImFwaSIsInJlbW92ZUl0ZW1MaWtlIiwidGhlbiIsInJlcyIsIm9uVXBkYXRlTGlrZXMiLCJjYXRjaCIsImVyciIsImFkZEl0ZW1MaWtlIiwic2V0TG9hZGluZ0luaXQiLCJzdGF0dXMiLCJjYXJkSXRlbXNBcnIiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRQaWN0dXJlUHJvZmlsZSIsInNwaW5uZXJHaWYiLCJjYXJkc0xpc3QiLCJzZXROZXdJdGVtbGlzdCIsImlubmVySFRNTCIsImF2YXRhciIsInJlbmRlckNhcmQiLCJjYXJkSW5mbyIsImFkZEl0ZW0iLCJjcmVhdGVQbGFjZUl0ZW0iLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiX2l0ZW1zIiwiZWwiLCJwcmVwZW5kIiwiaXRlbXMiLCJkYXRhIiwibmFtZV9pbnB1dCIsImFib3V0X21lIiwic2V0VGltZW91dCIsImZpbmFsbHkiLCJ0aXRsZV9wbGFjZSIsImltZ19saW5rIiwiYWRkTmV3Q2FyZCIsImltZ1NlbGVjdG9yIiwiaW1nVGl0bGVTZWxlY3RvciIsIl9pbWdFbGVtZW50IiwiX3RpdGxlRWxlbWVudCIsIl9zZXRQb3B1cEltZyIsInNyYyIsImhhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0iLCJfaGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybSIsIl9lbGVtZW50IiwiX3N1Ym1pdEJ0bkVsZW1lbnQiLCJfaGFuZGxlQ29uZmlybVN1Ym1pdCIsIm9uUmVtb3ZlSXRlbSIsIm5hbWVFbG0iLCJqb2JFbG0iLCJwaWNFbG0iLCJfbmFtZUVsbSIsIl9qb2JFbG0iLCJfcGljRWxtIiwiX3VzZXJJZCIsInBpY1NyYyIsIm9uVXBkYXRlUHJvZmlsZVBpYyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX29uSHR0cFJlcXVlc3QiLCJ1cmwiLCJtZXRob2QiLCJmdWxsVXJsIiwiZmV0Y2giLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJnZXRJbml0SW5mbyIsImFsbCIsIl9nZXRJbml0aWFsQ2FyZHMiLCJfZ2V0VXNlckluZm8iLCJhdXRob3JpemF0aW9uIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiXSwic291cmNlUm9vdCI6IiJ9