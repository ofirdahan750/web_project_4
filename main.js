!function(){"use strict";var e={855:function(e,t,n){e.exports=n.p+"images/spinner_svg.dc4086388e55820fbae1.svg"}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.p="",function(){console.log(55);class e{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._errorClass=e.errorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._submitButtonSelector=e.submitButtonSelector,this._form=t}_setFormListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_getElementTxt(e){return"url"===e.type?"".concat(e.type,"-input"):e.id}_showInputError(e){const t=this._form.querySelector(".".concat(this._getElementTxt(e),"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_removeInputError(e){const t=this._form.querySelector(".".concat(this._getElementTxt(e),"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._removeInputError(e):this._showInputError(e)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._removeInputError(e)})),this._form.reset(),this._toggleButtonState()}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}enableValidation(){this._setFormListeners(),this._form.addEventListener("submit",(e=>e.preventDefault()))}}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i(),t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));let n="";for(let i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n+=Date.now(),n+Date.now()}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;return Math.floor(Math.random()*(t-e+1))+e}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";e.textContent=t}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r{constructor(e,n,i,o,r,l,a){var c=this;let{name:u,link:_,_id:h,owner:m}=e,{likes:d,isOwner:p}=l;s(this,"_renderLikes",(()=>{this._placeLikeAmount.textContent=this._likes.length,this._isLiked()?this._placeLikeBtn.classList.add("places__like-btn__active"):this._placeLikeBtn.classList.remove("places__like-btn__active")})),s(this,"onUpdateLikes",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];c._likes=e,c._renderLikes()})),this._name=u,this._link=_,this._handleImageClick=n,this._getUserId=r,this._openRemoveItemPopup=i,this._cardSelector=a,this._likes=d||[],this._isOwner=p||!1,this._id=h||t(),this._handleLikedToggle=o,this._owner=m,this._isLiked=()=>{if(!this._likes.length)return;const e=this._getUserId();return this._likes.some((t=>t._id===e))||!1}}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".places__item").cloneNode(!0)}_handleToggleLikedBtn(e){e.stopPropagation(),this._handleLikedToggle(this._isLiked(),this,this._id)}_handleRemoveItem(e){e.stopPropagation(),this._openRemoveItemPopup(this._id,this._cardItem)}_setEventListeners(){this._cardItem.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)})),this._placeLikeBtn.addEventListener("click",(e=>{this._handleToggleLikedBtn(e)})),this._cardItem.querySelector(".places__remove-btn").addEventListener("click",(e=>{this._handleRemoveItem(e)}))}generateCard(){return this._cardItem=this._getTemplate(),this._placeImg=this._cardItem.querySelector(".places__img"),this._placeLikeBtn=this._cardItem.querySelector(".places__like-btn"),this._placeLikeAmount=this._cardItem.querySelector(".places__like-counter"),this._placeRemoveBtn=this._cardItem.querySelector(".places__remove-btn"),this._renderLikes(),"Loading..."!==this._name&&"images/spinner_svg.dc4086388e55820fbae1.svg"!==this._link&&this._setEventListeners(),this._isOwner||this._placeRemoveBtn.remove(),this._placeImg.style.backgroundImage="url(".concat(this._link,")"),this._placeImg.alt="a photo of ".concat(this._name),this._cardItem.querySelector(".places__name").textContent="".concat(this._name),this._cardItem}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a{constructor(e){l(this,"_handleEscClose",(e=>{"Escape"==e.key&&this.close()})),l(this,"_handleContextMenu",(e=>{e.preventDefault()})),this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("popup-box_visible"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup-box_visible"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup-box_visible")||e.target.classList.contains("popup-box__close-button"))&&this.close()}))}}class c extends a{constructor(e,t){var n,i;super(e),i=e=>{e.preventDefault(),this._handleSubmitFrom(this._returnInputValObj())},(n="_handleFormSubmit")in this?Object.defineProperty(this,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[n]=i,this._handleSubmitFrom=t,this._formElement=this._popupElement.querySelector(".popup-box__form"),this._formBtn=this._formElement.querySelector(".popup-box__submit-button"),this._inputList=[...this._formElement.querySelectorAll(".popup-box__input")],this._modifyElementText=o}handleLoading(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Saving...",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._formBtn.disabled=!t,this._modifyElementText(this._formBtn,e)}_returnInputValObj(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}close(){super.close(),this._formElement.reset()}setEventListeners(){this._formElement.addEventListener("submit",this._handleFormSubmit),super.setEventListeners()}}var u=n(855);const _={},h=document.querySelector(".profile__edit-btn"),m=document.querySelector(".profile__add-btn"),d=document.querySelector(".profile__avatar-cover"),p="Something went wrong, please try again later ",f=document.querySelector('input[name="name_input"]'),g=document.querySelector('input[name="about_me"]');function v(){_["form_change-profile-pic"].resetValidation(),U.open()}function b(){_["form_add-place"].resetValidation(),w.open()}function E(){_["form_profile-edit"].resetValidation(),q.open(),function(e){let{nameInfo:t,aboutMeInfo:n}=e;f.value=t,g.value=n}(B.getUserInfo())}function L(e,t){P.open(e,t)}function S(e,t){T.open(e,t)}function I(){return B.getUserId()}function k(e,t,n){e?R.removeItemLike(n).then((e=>{t.onUpdateLikes(e.likes)})).catch((e=>console.log("Error: ".concat(e)))):R.addItemLike(n).then((e=>{t.onUpdateLikes(e.likes)})).catch((e=>console.log("Error: ".concat(e))))}function y(e,n,i){e?(B.setUserInfo({name:"Loading...",about:"Loading...",_id:t()}),B.setPictureProfile(u),C.setNewItemlist([{name:"Loading...",link:u,owner:{_id:t()},likes:[]}])):(document.querySelector(".places__grid-container").innerHTML="",B.setUserInfo({name:i.name,about:i.about,_id:i._id}),B.setPictureProfile(i.avatar),C.setNewItemlist(n),h.addEventListener("click",E),m.addEventListener("click",b),d.addEventListener("click",v))}function x(e,t){C.addItem(function(e,t){return new r(e,L,S,k,I,t,"#places-item-template").generateCard()}(e,t))}const C=new class{constructor(e){let{renderer:t,containerSelector:n}=e;this._renderer=t,this._container=document.querySelector(n)}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}setNewItemlist(e){this._items=e,this.renderItems()}}({renderer:e=>{const{owner:t,likes:n}=e,i=I();x(e,{isOwner:t._id===i,likes:n})},containerSelector:".places__grid-container"}),q=new c(".popup-box_type_profile-edit",(function(e){let{name_input:t,about_me:n}=e;_["form_add-place"].resetValidation(),q.handleLoading(),R.setUserInfo({name:t,about:n}).then((e=>{q.handleLoading("Profile edited successfully!"),B.setUserInfo(e),setTimeout((()=>{q.close()}),1e3)})).catch((e=>{q.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{q.handleLoading("Save",!0)}),1800)}))}),"Save"),w=new c(".popup-box_type_add-item",(function(e){let{title_place:t,img_link:n}=e;w.handleLoading(),R.addNewCard({name:t,link:n}).then((e=>{w.handleLoading("Place added successfully!"),x(e,{isOwner:!0,likes:[]}),setTimeout((()=>{w.close()}),1e3)})).catch((e=>{w.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{w.handleLoading("Create",!0)}),1800)}))})),P=new class extends a{constructor(e){let{popupSelector:t,imgSelector:n,imgTitleSelector:i}=e;super(t),this._imgElement=this._popupElement.querySelector(n),this._titleElement=this._popupElement.querySelector(i)}_setPopupImg(){this._titleElement.textContent=this.title,this._imgElement.src=this._link,this._imgElement.alt="a pictrue of ".concat(this.title)}open(e,t){this.title=e,this._link=t,this._setPopupImg(),super.open()}}({popupSelector:".popup-box_type_img",imgSelector:".popup-box__img",imgTitleSelector:".popup-box__img-title"}),T=new class extends a{constructor(e){let{popupSelector:t,handleSubmitRemoveConfirm:n}=e;var i,s;super(t),s=e=>{e.preventDefault(),this._handleSubmitRemoveConfirm(this._id,this._element)},(i="_handleConfirmSubmit")in this?Object.defineProperty(this,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[i]=s,this._handleSubmitRemoveConfirm=n,this._submitBtnElement=this._popupElement.querySelector(".popup-box__submit-button"),this._modifyElementText=o}open(e,t){super.open(),this._element=t,this._id=e}handleLoading(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Saving...",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._submitBtnElement.disabled=!t,this._modifyElementText(this._submitBtnElement,e)}setEventListeners(){this._submitBtnElement.addEventListener("click",this._handleConfirmSubmit),super.setEventListeners()}}({popupSelector:".popup-box_type_confirm",handleSubmitRemoveConfirm:function(e,t){T.handleLoading(),R.onRemoveItem(e).then((()=>{T.handleLoading("Place removed successfully!"),t.remove(),setTimeout((()=>{T.close()}),1e3)})).catch((e=>{T.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{T.handleLoading("Yes",!0)}),1050)}))}}),B=new class{constructor(e){let{nameElm:t,jobElm:n,picElm:i}=e;this._nameElm=document.querySelector(t),this._jobElm=document.querySelector(n),this._picElm=document.querySelector(i)}setUserInfo(e){let{name:t,about:n,_id:i}=e;this._nameElm.textContent=t,this._jobElm.textContent=n,this._userId=i}getUserInfo(){return{nameInfo:this._nameElm.textContent,aboutMeInfo:this._jobElm.textContent}}getUserId(){return this._userId}setPictureProfile(e){this._picElm.style.backgroundImage='url("'.concat(e,'")')}}({nameElm:".profile__name",jobElm:".profile__about-me",picElm:".profile__avatar-cover"}),U=new c(".popup-box_type_change-profile-pic",(function(e){let{img_link:t}=e;U.handleLoading(),R.onUpdateProfilePic({avatar:t}).then((()=>{U.handleLoading("Profile Picture modified successfully!"),B.setPictureProfile(t),setTimeout((()=>{U.close()}),1e3)})).catch((e=>{U.handleLoading(p),console.log("Error: ".concat(e))})).finally((()=>{setTimeout((()=>{U.handleLoading("Save",!0)}),1e3)}))})),R=new class{constructor(e){let{baseUrl:t,headers:n}=e;this.headers=n,this.baseUrl=t}_onHttpRequest(e,t,n){const i="".concat(this.baseUrl).concat(e);return fetch(i,{method:t,headers:this.headers,body:JSON.stringify(n)}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}getInitInfo(){return Promise.all([this._getInitialCards(),this._getUserInfo()])}_getUserInfo(){return this._onHttpRequest("users/me","GET")}_getInitialCards(){return this._onHttpRequest("cards","GET")}setUserInfo(e){let{name:t,about:n}=e;return this._onHttpRequest("users/me","PATCH",{name:t,about:n})}addNewCard(e){let{name:t,link:n}=e;return this._onHttpRequest("cards","POST",{name:t,link:n})}onRemoveItem(e){return this._onHttpRequest("cards/".concat(e),"DELETE")}addItemLike(e){return this._onHttpRequest("cards/likes/".concat(e),"PUT")}removeItemLike(e){return this._onHttpRequest("cards/likes/".concat(e),"DELETE")}onUpdateProfilePic(e){let{avatar:t}=e;return this._onHttpRequest("users/me/avatar","PATCH",{avatar:t})}}({baseUrl:"https://around.nomoreparties.co/v1/group-12/",headers:{authorization:"035a3e80-0d3f-421b-b4fa-7f406e49ad5f","Content-Type":"application/json"}});y(!0),R.getInitInfo().then((t=>{let[n,i]=t;var o;y(!1,n,i),o={formSelector:".popup-box__form",inputSelector:".popup-box__input",submitButtonSelector:".popup-box__submit-button",inactiveButtonClass:"popup-box__submit-button_inactive",inputErrorClass:".popup-box__input_type_error",errorClass:".popup-box__input-error_active"},Array.from(document.querySelectorAll(o.formSelector)).forEach((t=>{const n=new e(o,t),i=t.name;_[i]=n,n.enableValidation()})),q.setEventListeners(),w.setEventListeners(),P.setEventListeners(),T.setEventListeners(),U.setEventListeners()})).catch((e=>console.log("Error: ".concat(e))))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG9CQUNUcUMsRUFBWXJDLG9CQUNadUMsRUFBbUJ2QyxvQkFDbkJ5QixFQUFzQnpCLHVCQVJuQjhDLE9BQU9DLEdBQVF4SyxRQUFRQyxJQUFSLGlCQUFzQnVLLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL2NvbmZpbmcuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiY29uc3QgYXBpQ29uZmluZyA9IHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIwMzVhM2U4MC0wZDNmLTQyMWItYjRmYS03ZjQwNmU0OWFkNWZcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn07XHJcbmV4cG9ydCB7IGFwaUNvbmZpbmcgfTtcclxuY29uc3QgeCA9IDU1O1xyXG5jb25zb2xlLmxvZyh4KTtcclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgfVxyXG4gIF9zZXRGb3JtTGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfZ2V0RWxlbWVudFR4dChpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHR4dCA9XHJcbiAgICAgIGlucHV0RWxlbWVudC50eXBlID09PSBcInVybFwiXHJcbiAgICAgICAgPyBgJHtpbnB1dEVsZW1lbnQudHlwZX0taW5wdXRgXHJcbiAgICAgICAgOiBpbnB1dEVsZW1lbnQuaWQ7XHJcbiAgICByZXR1cm4gdHh0O1xyXG4gIH1cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHt0aGlzLl9nZXRFbGVtZW50VHh0KGlucHV0RWxlbWVudCl9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgX3JlbW92ZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHt0aGlzLl9nZXRFbGVtZW50VHh0KGlucHV0RWxlbWVudCl9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9yZW1vdmVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2UgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbW92ZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEZvcm1MaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICB9XHJcbn1cclxuIiwiZnVuY3Rpb24gZ2V0UmFuZG9tU3RyaW5nKGxlbmd0aCA9IGdldFJhbmRvbUludCgpKSB7XHJcbiAgbGV0IGNoYXJzID1cclxuICAgIFwiMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpa2xtbm9wcXJzdHV2d3h5elwiLnNwbGl0KFwiXCIpO1xyXG5cclxuICBpZiAoIWxlbmd0aCkge1xyXG4gICAgbGVuZ3RoID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKTtcclxuICB9XHJcblxyXG4gIGxldCBzdHIgPSBcIlwiO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgIHN0ciArPSBjaGFyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpXTtcclxuICB9XHJcbiAgc3RyICs9IERhdGUubm93KCk7XHJcbiAgcmV0dXJuIHN0ciArIERhdGUubm93KCk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbiA9IDEwMCwgbWF4ID0gMTUwKSB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcbn1cclxuZnVuY3Rpb24gbW9kaWZ5RWxlbWVudFRleHQoZWxlbWVudCwgdHh0ID0gXCJTYXZpbmcuLi5cIikge1xyXG4gIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0eHQ7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGdldFJhbmRvbVN0cmluZywgbW9kaWZ5RWxlbWVudFRleHQgfTtcclxuIiwiaW1wb3J0IHsgZ2V0UmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcbmV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgbmFtZSwgbGluaywgX2lkLCBvd25lciB9LFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIG9wZW5SZW1vdmVJdGVtUG9wdXAsXHJcbiAgICBoYW5kbGVMaWtlZFRvZ2dsZSxcclxuICAgIGdldFVzZXJJZCxcclxuICAgIHsgbGlrZXMsIGlzT3duZXIgfSxcclxuICAgIGNhcmRTZWxlY3RvclxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5fZ2V0VXNlcklkID0gZ2V0VXNlcklkO1xyXG4gICAgdGhpcy5fb3BlblJlbW92ZUl0ZW1Qb3B1cCA9IG9wZW5SZW1vdmVJdGVtUG9wdXA7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzIHx8IFtdO1xyXG4gICAgdGhpcy5faXNPd25lciA9IGlzT3duZXIgfHwgZmFsc2U7XHJcbiAgICB0aGlzLl9pZCA9IF9pZCB8fCBnZXRSYW5kb21TdHJpbmcoKTtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VkVG9nZ2xlID0gaGFuZGxlTGlrZWRUb2dnbGU7XHJcbiAgICB0aGlzLl9vd25lciA9IG93bmVyO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9ICgpID0+IHtcclxuICAgICAgaWYgKCF0aGlzLl9saWtlcy5sZW5ndGgpIHJldHVybjtcclxuICAgICAgY29uc3QgaWQgPSB0aGlzLl9nZXRVc2VySWQoKTtcclxuICAgICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSBpZCkgfHwgZmFsc2U7XHJcbiAgICB9O1xyXG4gIH1cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBwbGFjZUl0ZW1UZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2NhcmRTZWxlY3RvclxyXG4gICAgKS5jb250ZW50O1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBwbGFjZUl0ZW1UZW1wbGF0ZVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2l0ZW1cIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG4gIF9oYW5kbGVUb2dnbGVMaWtlZEJ0bihlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZWRUb2dnbGUodGhpcy5faXNMaWtlZCgpLCB0aGlzLCB0aGlzLl9pZCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlUmVtb3ZlSXRlbShlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5fb3BlblJlbW92ZUl0ZW1Qb3B1cCh0aGlzLl9pZCwgdGhpcy5fY2FyZEl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fcGxhY2VMaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVUb2dnbGVMaWtlZEJ0bihlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEl0ZW1cclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19yZW1vdmUtYnRuXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVJdGVtKGUpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgX3JlbmRlckxpa2VzID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fcGxhY2VMaWtlQW1vdW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQoKSkge1xyXG4gICAgICB0aGlzLl9wbGFjZUxpa2VCdG4uY2xhc3NMaXN0LmFkZChcInBsYWNlc19fbGlrZS1idG5fX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3BsYWNlTGlrZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwicGxhY2VzX19saWtlLWJ0bl9fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgb25VcGRhdGVMaWtlcyA9IChsaWtlcyA9IFtdKSA9PiB7XHJcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuICB9O1xyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkSXRlbSA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9wbGFjZUltZyA9IHRoaXMuX2NhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19pbWdcIik7XHJcbiAgICB0aGlzLl9wbGFjZUxpa2VCdG4gPSB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fbGlrZS1idG5cIik7XHJcbiAgICB0aGlzLl9wbGFjZUxpa2VBbW91bnQgPSB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wbGFjZXNfX2xpa2UtY291bnRlclwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fcGxhY2VSZW1vdmVCdG4gPSB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fcmVtb3ZlLWJ0blwiKTtcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuX25hbWUgIT09IFwiTG9hZGluZy4uLlwiICYmXHJcbiAgICAgIHRoaXMuX2xpbmsgIT09IFwiaW1hZ2VzL3NwaW5uZXJfc3ZnLmRjNDA4NjM4OGU1NTgyMGZiYWUxLnN2Z1wiXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuICAgIGlmICghdGhpcy5faXNPd25lcikge1xyXG4gICAgICB0aGlzLl9wbGFjZVJlbW92ZUJ0bi5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9wbGFjZUltZy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5fbGlua30pYDtcclxuICAgIHRoaXMuX3BsYWNlSW1nLmFsdCA9IGBhIHBob3RvIG9mICR7dGhpcy5fbmFtZX1gO1xyXG4gICAgdGhpcy5fY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX25hbWVcIikudGV4dENvbnRlbnQgPSBgJHt0aGlzLl9uYW1lfWA7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEl0ZW07XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG4gIF9oYW5kbGVDb250ZXh0TWVudSA9IChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfTtcclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cC1ib3hfdmlzaWJsZVwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cC1ib3hfdmlzaWJsZVwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwLWJveF92aXNpYmxlXCIpIHx8XHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXAtYm94X19jbG9zZS1idXR0b25cIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmltcG9ydCB7IG1vZGlmeUVsZW1lbnRUZXh0IH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdEZyb20pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0RnJvbSA9IGhhbmRsZVN1Ym1pdEZyb207XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWJveF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2Zvcm1CdG4gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cC1ib3hfX3N1Ym1pdC1idXR0b25cIlxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXAtYm94X19pbnB1dFwiKSxcclxuICAgIF07XHJcbiAgICB0aGlzLl9tb2RpZnlFbGVtZW50VGV4dCA9IG1vZGlmeUVsZW1lbnRUZXh0O1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUZvcm1TdWJtaXQgPSAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0RnJvbSh0aGlzLl9yZXR1cm5JbnB1dFZhbE9iaigpKTtcclxuICB9O1xyXG4gIGhhbmRsZUxvYWRpbmcodHh0ID0gXCJTYXZpbmcuLi5cIiwgaXNEb25lID0gZmFsc2UpIHtcclxuICAgIHRoaXMuX2Zvcm1CdG4uZGlzYWJsZWQgPSAhaXNEb25lID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgdGhpcy5fbW9kaWZ5RWxlbWVudFRleHQodGhpcy5fZm9ybUJ0biwgdHh0KTtcclxuICB9XHJcblxyXG4gIF9yZXR1cm5JbnB1dFZhbE9iaigpIHtcclxuICAgIGNvbnN0IHZhbElucHV0T2JqID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB2YWxJbnB1dE9ialtpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHZhbElucHV0T2JqO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQpO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJlZXJzaGViYSBUdXJraXNoIHJhaWx3YXkgc3RhdGlvblwiLFxyXG4gICAgbGluazogXCJodHRwczovL3VwbG9hZC53aWtpbWVkaWEub3JnL3dpa2lwZWRpYS9jb21tb25zL3RodW1iL2QvZGUvJUQ3JTlFJUQ3JUFBJUQ3JTk3JUQ3JTlEXyVENyVBQSVENyU5NyVENyVBMCVENyVBQV8lRDclOTQlRDclQTglRDclOUIlRDclOTElRDclQUFfJUQ3JTk0JUQ3JTk4JUQ3JTk1JUQ3JUE4JUQ3JUE3JUQ3JTk5JUQ3JUFBXyVENyU5MSVENyU5MSVENyU5MCVENyVBOF8lRDclQTklRDclOTElRDclQTIuanBnLzEyODBweC0lRDclOUUlRDclQUElRDclOTclRDclOURfJUQ3JUFBJUQ3JTk3JUQ3JUEwJUQ3JUFBXyVENyU5NCVENyVBOCVENyU5QiVENyU5MSVENyVBQV8lRDclOTQlRDclOTglRDclOTUlRDclQTglRDclQTclRDclOTklRDclQUFfJUQ3JTkxJUQ3JTkxJUQ3JTkwJUQ3JUE4XyVENyVBOSVENyU5MSVENyVBMi5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuY29uc3Qgb3BlbkVkaXRVc2VyUG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xyXG5jb25zdCBvcGVuQWRkUGxhY2VzUG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG5cIik7XHJcbmNvbnN0IG9wZW5DaGFuZ2VQcm9maWxlUG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2F2YXRhci1jb3ZlclwiXHJcbik7XHJcblxyXG5jb25zdCB0eHRFcnIgPSBcIlNvbWV0aGluZyB3ZW50IHdyb25nLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyIFwiO1xyXG5cclxuZXhwb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgb3BlbkVkaXRVc2VyUG9wdXBCdG4sXHJcbiAgb3BlbkFkZFBsYWNlc1BvcHVwQnRuLFxyXG4gIGZvcm1WYWxpZGF0b3JzLFxyXG4gIG9wZW5DaGFuZ2VQcm9maWxlUG9wdXBCdG4sXHJcbiAgdHh0RXJyLFxyXG59O1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBhcGlDb25maW5nIH0gZnJvbSBcIi4uLy4uL2NvbmZpbmcuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XHJcbmltcG9ydCBzcGlubmVyR2lmIGZyb20gXCIuLi9pbWFnZXMvcHJvZmlsZS9zcGlubmVyX3N2Zy5zdmdcIjtcclxuaW1wb3J0IHsgZ2V0UmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcblxyXG5pbXBvcnQge1xyXG4gIG9wZW5DaGFuZ2VQcm9maWxlUG9wdXBCdG4sXHJcbiAgb3BlbkVkaXRVc2VyUG9wdXBCdG4sXHJcbiAgb3BlbkFkZFBsYWNlc1BvcHVwQnRuLFxyXG4gIGZvcm1WYWxpZGF0b3JzLFxyXG4gIHR4dEVycixcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBQb3B1cENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBDb25maXJtXCI7XHJcblxyXG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwibmFtZV9pbnB1dFwiXScpO1xyXG5jb25zdCBhYm91dE1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiYWJvdXRfbWVcIl0nKTtcclxuXHJcbmNvbnN0IGluaXRpYWxCdG5UeHQgPSB7XHJcbiAgZWRpdFBvcHVwOiBcIlNhdmVcIixcclxuICBhZGRQb3B1cDogXCJDcmVhdGVcIixcclxuICBkZWxldGVDb25maXJtUG9wdXA6IFwiWWVzXCIsXHJcbiAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwOiBcIlNhdmVcIixcclxufTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVBsYWNlSXRlbShpdGVtLCBjYXJkSW5mbykge1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcclxuICAgIGl0ZW0sXHJcbiAgICBvcGVuSW1nUG9wdXAsXHJcbiAgICBvcGVuUmVtb3ZlSXRlbVBvcHVwLFxyXG4gICAgaGFuZGxlTGlrZWRUb2dnbGUsXHJcbiAgICBnZXRVc2VySWQsXHJcbiAgICBjYXJkSW5mbyxcclxuICAgIFwiI3BsYWNlcy1pdGVtLXRlbXBsYXRlXCJcclxuICApO1xyXG4gIHJldHVybiBuZXdDYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKSB7XHJcbiAgY29uc3QgZm9ybUl0ZW1zID0gQXJyYXkuZnJvbShcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKVxyXG4gICk7XHJcblxyXG4gIGZvcm1JdGVtcy5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybSk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm0ubmFtZTtcclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtKHsgbmFtZUluZm8sIGFib3V0TWVJbmZvIH0pIHtcclxuICBuYW1lSW5wdXQudmFsdWUgPSBuYW1lSW5mbztcclxuICBhYm91dE1lSW5wdXQudmFsdWUgPSBhYm91dE1lSW5mbztcclxufVxyXG5mdW5jdGlvbiBvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwKCkge1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiZm9ybV9jaGFuZ2UtcHJvZmlsZS1waWNcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLm9wZW4oKTtcclxufVxyXG5mdW5jdGlvbiBvcGVuQWRkUHJvZmlsZVBvcHVwKCkge1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiZm9ybV9hZGQtcGxhY2VcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkUG9wdXAub3BlbigpO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5FZGl0UHJvZmlsZVBvcHVwKCkge1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiZm9ybV9wcm9maWxlLWVkaXRcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZWRpdFBvcHVwLm9wZW4oKTtcclxuICBmaWxsUHJvZmlsZUZvcm0ocHJvZmlsZVVzZXIuZ2V0VXNlckluZm8oKSk7XHJcbn1cclxuZnVuY3Rpb24gb3BlbkltZ1BvcHVwKHRpdGxlLCBsaW5rKSB7XHJcbiAgbmV3SW1nUG9wdXAub3Blbih0aXRsZSwgbGluayk7XHJcbn1cclxuZnVuY3Rpb24gb3BlblJlbW92ZUl0ZW1Qb3B1cChpZCwgY2FyZEl0ZW0pIHtcclxuICBkZWxldGVDb25maXJtUG9wdXAub3BlbihpZCwgY2FyZEl0ZW0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldFVzZXJJZCgpIHtcclxuICByZXR1cm4gcHJvZmlsZVVzZXIuZ2V0VXNlcklkKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEFkZEl0ZW0oeyB0aXRsZV9wbGFjZTogbmFtZSwgaW1nX2xpbms6IGxpbmsgfSkge1xyXG4gIGFkZFBvcHVwLmhhbmRsZUxvYWRpbmcoKTtcclxuICBhcGlcclxuICAgIC5hZGROZXdDYXJkKHtcclxuICAgICAgbmFtZSxcclxuICAgICAgbGluayxcclxuICAgIH0pXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGFkZFBvcHVwLmhhbmRsZUxvYWRpbmcoXCJQbGFjZSBhZGRlZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgICBjb25zdCBjYXJkSW5mbyA9IHtcclxuICAgICAgICBpc093bmVyOiB0cnVlLFxyXG4gICAgICAgIGxpa2VzOiBbXSxcclxuICAgICAgfTtcclxuICAgICAgcmVuZGVyQ2FyZChyZXMsIGNhcmRJbmZvKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgYWRkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgYWRkUG9wdXAuaGFuZGxlTG9hZGluZyh0eHRFcnIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgYWRkUG9wdXAuaGFuZGxlTG9hZGluZyhpbml0aWFsQnRuVHh0LmFkZFBvcHVwLCB0cnVlKTtcclxuICAgICAgfSwgMTgwMCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtKGlkLCBpdGVtKSB7XHJcbiAgZGVsZXRlQ29uZmlybVBvcHVwLmhhbmRsZUxvYWRpbmcoKTtcclxuICBhcGlcclxuICAgIC5vblJlbW92ZUl0ZW0oaWQpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGRlbGV0ZUNvbmZpcm1Qb3B1cC5oYW5kbGVMb2FkaW5nKFwiUGxhY2UgcmVtb3ZlZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgICBpdGVtLnJlbW92ZSgpO1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBkZWxldGVDb25maXJtUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgZGVsZXRlQ29uZmlybVBvcHVwLmhhbmRsZUxvYWRpbmcodHh0RXJyKTtcclxuICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGRlbGV0ZUNvbmZpcm1Qb3B1cC5oYW5kbGVMb2FkaW5nKFxyXG4gICAgICAgICAgaW5pdGlhbEJ0blR4dC5kZWxldGVDb25maXJtUG9wdXAsXHJcbiAgICAgICAgICB0cnVlXHJcbiAgICAgICAgKTtcclxuICAgICAgfSwgMTA1MCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVTdWJtaXRFZGl0UHJvZmlsZSh7IG5hbWVfaW5wdXQsIGFib3V0X21lIH0pIHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImZvcm1fYWRkLXBsYWNlXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGVkaXRQb3B1cC5oYW5kbGVMb2FkaW5nKCk7XHJcblxyXG4gIGFwaVxyXG4gICAgLnNldFVzZXJJbmZvKHsgbmFtZTogbmFtZV9pbnB1dCwgYWJvdXQ6IGFib3V0X21lIH0pXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGVkaXRQb3B1cC5oYW5kbGVMb2FkaW5nKFwiUHJvZmlsZSBlZGl0ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcclxuICAgICAgcHJvZmlsZVVzZXIuc2V0VXNlckluZm8ocmVzKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgZWRpdFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGVkaXRQb3B1cC5oYW5kbGVMb2FkaW5nKHR4dEVycik7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBlZGl0UG9wdXAuaGFuZGxlTG9hZGluZyhpbml0aWFsQnRuVHh0LmVkaXRQb3B1cCwgdHJ1ZSk7XHJcbiAgICAgIH0sIDE4MDApO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlU3VibWl0UHJvZmlsZVBpYyh7IGltZ19saW5rIH0pIHtcclxuICBjaGFuZ2VQcm9maWxlUGljUG9wdXAuaGFuZGxlTG9hZGluZygpO1xyXG4gIGFwaVxyXG4gICAgLm9uVXBkYXRlUHJvZmlsZVBpYyh7IGF2YXRhcjogaW1nX2xpbmsgfSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLmhhbmRsZUxvYWRpbmcoXHJcbiAgICAgICAgXCJQcm9maWxlIFBpY3R1cmUgbW9kaWZpZWQgc3VjY2Vzc2Z1bGx5IVwiXHJcbiAgICAgICk7XHJcbiAgICAgIHByb2ZpbGVVc2VyLnNldFBpY3R1cmVQcm9maWxlKGltZ19saW5rKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5oYW5kbGVMb2FkaW5nKHR4dEVycik7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCk7XHJcbiAgICB9KVxyXG5cclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgY2hhbmdlUHJvZmlsZVBpY1BvcHVwLmhhbmRsZUxvYWRpbmcoXHJcbiAgICAgICAgICBpbml0aWFsQnRuVHh0LmNoYW5nZVByb2ZpbGVQaWNQb3B1cCxcclxuICAgICAgICAgIHRydWVcclxuICAgICAgICApO1xyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZUxpa2VkVG9nZ2xlKGlzTGlrZWQsIGl0ZW0sIGlkKSB7XHJcbiAgaWYgKCFpc0xpa2VkKSB7XHJcbiAgICBhcGlcclxuICAgICAgLmFkZEl0ZW1MaWtlKGlkKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaXRlbS5vblVwZGF0ZUxpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYXBpXHJcbiAgICAgIC5yZW1vdmVJdGVtTGlrZShpZClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGl0ZW0ub25VcGRhdGVMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKSk7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvYWRpbmdJbml0KHN0YXR1cywgY2FyZEl0ZW1zQXJyLCB1c2VySW5mbykge1xyXG4gIGlmIChzdGF0dXMpIHtcclxuICAgIHByb2ZpbGVVc2VyLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogXCJMb2FkaW5nLi4uXCIsXHJcbiAgICAgIGFib3V0OiBcIkxvYWRpbmcuLi5cIixcclxuICAgICAgX2lkOiBnZXRSYW5kb21TdHJpbmcoKSxcclxuICAgIH0pO1xyXG4gICAgcHJvZmlsZVVzZXIuc2V0UGljdHVyZVByb2ZpbGUoc3Bpbm5lckdpZik7XHJcbiAgICBjYXJkc0xpc3Quc2V0TmV3SXRlbWxpc3QoW1xyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogXCJMb2FkaW5nLi4uXCIsXHJcbiAgICAgICAgbGluazogc3Bpbm5lckdpZixcclxuICAgICAgICBvd25lcjogeyBfaWQ6IGdldFJhbmRvbVN0cmluZygpIH0sXHJcbiAgICAgICAgbGlrZXM6IFtdLFxyXG4gICAgICB9LFxyXG4gICAgXSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19ncmlkLWNvbnRhaW5lclwiKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgcHJvZmlsZVVzZXIuc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiB1c2VySW5mby5uYW1lLFxyXG4gICAgICBhYm91dDogdXNlckluZm8uYWJvdXQsXHJcbiAgICAgIF9pZDogdXNlckluZm8uX2lkLFxyXG4gICAgfSk7XHJcbiAgICBwcm9maWxlVXNlci5zZXRQaWN0dXJlUHJvZmlsZSh1c2VySW5mby5hdmF0YXIpO1xyXG4gICAgY2FyZHNMaXN0LnNldE5ld0l0ZW1saXN0KGNhcmRJdGVtc0Fycik7XHJcbiAgICBvcGVuRWRpdFVzZXJQb3B1cEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkVkaXRQcm9maWxlUG9wdXApO1xyXG4gICAgb3BlbkFkZFBsYWNlc1BvcHVwQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuQWRkUHJvZmlsZVBvcHVwKTtcclxuICAgIG9wZW5DaGFuZ2VQcm9maWxlUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5DaGFuZ2VQcm9maWxlUG9wdXApO1xyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBvbkluaXQoKSB7XHJcbiAgc2V0TG9hZGluZ0luaXQodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuZ2V0SW5pdEluZm8oKVxyXG4gICAgLnRoZW4oKFtjYXJkSXRlbXNBcnIsIHVzZXJJbmZvXSkgPT4ge1xyXG4gICAgICBzZXRMb2FkaW5nSW5pdChmYWxzZSwgY2FyZEl0ZW1zQXJyLCB1c2VySW5mbyk7XHJcbiAgICAgIGVuYWJsZVZhbGlkYXRpb24oe1xyXG4gICAgICAgIGZvcm1TZWxlY3RvcjogXCIucG9wdXAtYm94X19mb3JtXCIsXHJcbiAgICAgICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXAtYm94X19pbnB1dFwiLFxyXG4gICAgICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX3N1Ym1pdC1idXR0b25cIixcclxuICAgICAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwLWJveF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gICAgICAgIGlucHV0RXJyb3JDbGFzczogXCIucG9wdXAtYm94X19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICAgICAgZXJyb3JDbGFzczogXCIucG9wdXAtYm94X19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxuICAgICAgfSk7XHJcbiAgICAgIHNldFBvcHVwRXZlbnQoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldFBvcHVwRXZlbnQoKSB7XHJcbiAgZWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgYWRkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBuZXdJbWdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIGRlbGV0ZUNvbmZpcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIGNoYW5nZVByb2ZpbGVQaWNQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG59XHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoaXRlbSwgY2FyZEluZm8pIHtcclxuICBjYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVQbGFjZUl0ZW0oaXRlbSwgY2FyZEluZm8pKTtcclxufVxyXG5cclxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oe1xyXG4gIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgY29uc3QgeyBvd25lciwgbGlrZXMgfSA9IGRhdGE7XHJcbiAgICBjb25zdCBpZCA9IGdldFVzZXJJZCgpO1xyXG4gICAgY29uc3QgY2FyZEluZm8gPSB7XHJcbiAgICAgIGlzT3duZXI6IG93bmVyLl9pZCA9PT0gaWQsXHJcbiAgICAgIGxpa2VzLFxyXG4gICAgfTtcclxuICAgIHJlbmRlckNhcmQoZGF0YSwgY2FyZEluZm8pO1xyXG4gIH0sXHJcbiAgY29udGFpbmVyU2VsZWN0b3I6IFwiLnBsYWNlc19fZ3JpZC1jb250YWluZXJcIixcclxufSk7XHJcbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnBvcHVwLWJveF90eXBlX3Byb2ZpbGUtZWRpdFwiLFxyXG4gIGhhbmRsZVN1Ym1pdEVkaXRQcm9maWxlLFxyXG4gIFwiU2F2ZVwiXHJcbik7XHJcblxyXG5jb25zdCBhZGRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnBvcHVwLWJveF90eXBlX2FkZC1pdGVtXCIsXHJcbiAgaGFuZGxlU3VibWl0QWRkSXRlbVxyXG4pO1xyXG5jb25zdCBuZXdJbWdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXAtYm94X3R5cGVfaW1nXCIsXHJcbiAgaW1nU2VsZWN0b3I6IFwiLnBvcHVwLWJveF9faW1nXCIsXHJcbiAgaW1nVGl0bGVTZWxlY3RvcjogXCIucG9wdXAtYm94X19pbWctdGl0bGVcIixcclxufSk7XHJcblxyXG5jb25zdCBkZWxldGVDb25maXJtUG9wdXAgPSBuZXcgUG9wdXBDb25maXJtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfdHlwZV9jb25maXJtXCIsXHJcbiAgaGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybSxcclxufSk7XHJcbmNvbnN0IHByb2ZpbGVVc2VyID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lRWxtOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgam9iRWxtOiBcIi5wcm9maWxlX19hYm91dC1tZVwiLFxyXG4gIHBpY0VsbTogXCIucHJvZmlsZV9fYXZhdGFyLWNvdmVyXCIsXHJcbn0pO1xyXG5jb25zdCBjaGFuZ2VQcm9maWxlUGljUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIi5wb3B1cC1ib3hfdHlwZV9jaGFuZ2UtcHJvZmlsZS1waWNcIixcclxuICBoYW5kbGVTdWJtaXRQcm9maWxlUGljXHJcbik7XHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpQ29uZmluZyk7XHJcbm9uSW5pdCgpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyLCBjb250YWluZXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWwpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsKTtcclxuICB9XHJcbiAgc2V0TmV3SXRlbWxpc3QoaXRlbXMpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLnJlbmRlckl0ZW1zKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBpbWdTZWxlY3RvciwgaW1nVGl0bGVTZWxlY3RvciB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltZ0VsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihpbWdTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihpbWdUaXRsZVNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zZXRQb3B1cEltZygpIHtcclxuICAgIHRoaXMuX3RpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMudGl0bGU7XHJcbiAgICB0aGlzLl9pbWdFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWdFbGVtZW50LmFsdCA9IGBhIHBpY3RydWUgb2YgJHt0aGlzLnRpdGxlfWA7XHJcbiAgfVxyXG5cclxuICBvcGVuKHRpdGxlLCBsaW5rKSB7XHJcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX3NldFBvcHVwSW1nKCk7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5pbXBvcnQgeyBtb2RpZnlFbGVtZW50VGV4dCB9IGZyb20gXCIuLi91dGlscy91dGlsc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtIH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0UmVtb3ZlQ29uZmlybSA9IGhhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm07XHJcbiAgICB0aGlzLl9zdWJtaXRCdG5FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnBvcHVwLWJveF9fc3VibWl0LWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fbW9kaWZ5RWxlbWVudFRleHQgPSBtb2RpZnlFbGVtZW50VGV4dDtcclxuICB9XHJcbiAgb3BlbihpZCwgZWxlbWVudCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pZCA9IGlkO1xyXG4gIH1cclxuICBoYW5kbGVMb2FkaW5nKHR4dCA9IFwiU2F2aW5nLi4uXCIsIGlzRG9uZSA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG5FbGVtZW50LmRpc2FibGVkID0gIWlzRG9uZSA/IHRydWUgOiBmYWxzZTtcclxuICAgIHRoaXMuX21vZGlmeUVsZW1lbnRUZXh0KHRoaXMuX3N1Ym1pdEJ0bkVsZW1lbnQsIHR4dCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlQ29uZmlybVN1Ym1pdCA9IChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtKHRoaXMuX2lkLCB0aGlzLl9lbGVtZW50KTtcclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNvbmZpcm1TdWJtaXQpO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZUVsbSwgam9iRWxtLCBwaWNFbG0gfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZUVsbSk7XHJcbiAgICB0aGlzLl9qb2JFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYkVsbSk7XHJcbiAgICB0aGlzLl9waWNFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBpY0VsbSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBfaWQgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsbS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbG0udGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgIHRoaXMuX3VzZXJJZCA9IF9pZDtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lSW5mbzogdGhpcy5fbmFtZUVsbS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXRNZUluZm86IHRoaXMuX2pvYkVsbS50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG4gIGdldFVzZXJJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl91c2VySWQ7XHJcbiAgfVxyXG4gIHNldFBpY3R1cmVQcm9maWxlKHBpY1NyYykge1xyXG4gICAgdGhpcy5fcGljRWxtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIke3BpY1NyY31cIilgO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcclxuICB9XHJcbiAgX29uSHR0cFJlcXVlc3QodXJsLCBtZXRob2QsIGRhdGEpIHtcclxuICAgIGNvbnN0IGZ1bGxVcmwgPSBgJHt0aGlzLmJhc2VVcmx9JHt1cmx9YDtcclxuICAgIHJldHVybiBmZXRjaChmdWxsVXJsLCB7XHJcbiAgICAgIG1ldGhvZCxcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZ2V0SW5pdEluZm8oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuX2dldEluaXRpYWxDYXJkcygpLCB0aGlzLl9nZXRVc2VySW5mbygpXSk7XHJcbiAgfVxyXG4gIF9nZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KFwidXNlcnMvbWVcIiwgXCJHRVRcIik7XHJcbiAgfVxyXG4gIF9nZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChcImNhcmRzXCIsIFwiR0VUXCIpO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChcInVzZXJzL21lXCIsIFwiUEFUQ0hcIiwgeyBuYW1lLCBhYm91dCB9KTtcclxuICB9XHJcbiAgYWRkTmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoXCJjYXJkc1wiLCBcIlBPU1RcIiwgeyBuYW1lLCBsaW5rIH0pO1xyXG4gIH1cclxuICBvblJlbW92ZUl0ZW0oaWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KGBjYXJkcy8ke2lkfWAsIFwiREVMRVRFXCIpO1xyXG4gIH1cclxuICBhZGRJdGVtTGlrZShpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uSHR0cFJlcXVlc3QoYGNhcmRzL2xpa2VzLyR7aWR9YCwgXCJQVVRcIik7XHJcbiAgfVxyXG4gIHJlbW92ZUl0ZW1MaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25IdHRwUmVxdWVzdChgY2FyZHMvbGlrZXMvJHtpZH1gLCBcIkRFTEVURVwiKTtcclxuICB9XHJcbiAgb25VcGRhdGVQcm9maWxlUGljKHsgYXZhdGFyIH0pIHtcclxuICAgIHJldHVybiB0aGlzLl9vbkh0dHBSZXF1ZXN0KFwidXNlcnMvbWUvYXZhdGFyXCIsIFwiUEFUQ0hcIiwgeyBhdmF0YXIgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInAiLCJjb25zb2xlIiwibG9nIiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwidGhpcyIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfZm9ybSIsIl9zZXRGb3JtTGlzdGVuZXJzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfZ2V0RWxlbWVudFR4dCIsInR5cGUiLCJpZCIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfcmVtb3ZlSW5wdXRFcnJvciIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJyZXNldFZhbGlkYXRpb24iLCJyZXNldCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsInNvbWUiLCJpbnB1dCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJnZXRSYW5kb21TdHJpbmciLCJsZW5ndGgiLCJnZXRSYW5kb21JbnQiLCJjaGFycyIsInNwbGl0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic3RyIiwiaSIsIkRhdGUiLCJub3ciLCJtaW4iLCJtYXgiLCJtb2RpZnlFbGVtZW50VGV4dCIsImVsZW1lbnQiLCJ0eHQiLCJDYXJkIiwiaGFuZGxlSW1hZ2VDbGljayIsIm9wZW5SZW1vdmVJdGVtUG9wdXAiLCJoYW5kbGVMaWtlZFRvZ2dsZSIsImdldFVzZXJJZCIsImNhcmRTZWxlY3RvciIsIm5hbWUiLCJsaW5rIiwiX2lkIiwib3duZXIiLCJsaWtlcyIsImlzT3duZXIiLCJfcGxhY2VMaWtlQW1vdW50IiwiX2xpa2VzIiwiX2lzTGlrZWQiLCJfcGxhY2VMaWtlQnRuIiwiX3JlbmRlckxpa2VzIiwiX25hbWUiLCJfbGluayIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldFVzZXJJZCIsIl9vcGVuUmVtb3ZlSXRlbVBvcHVwIiwiX2NhcmRTZWxlY3RvciIsIl9pc093bmVyIiwiX2hhbmRsZUxpa2VkVG9nZ2xlIiwiX293bmVyIiwibGlrZSIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9oYW5kbGVUb2dnbGVMaWtlZEJ0biIsInN0b3BQcm9wYWdhdGlvbiIsIl9oYW5kbGVSZW1vdmVJdGVtIiwiX2NhcmRJdGVtIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZ2VuZXJhdGVDYXJkIiwiX3BsYWNlSW1nIiwiX3BsYWNlUmVtb3ZlQnRuIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJhbHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0RnJvbSIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdEZyb20iLCJfcmV0dXJuSW5wdXRWYWxPYmoiLCJfZm9ybUVsZW1lbnQiLCJfZm9ybUJ0biIsIl9tb2RpZnlFbGVtZW50VGV4dCIsImhhbmRsZUxvYWRpbmciLCJpc0RvbmUiLCJ2YWxJbnB1dE9iaiIsIml0ZW0iLCJ2YWx1ZSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiZm9ybVZhbGlkYXRvcnMiLCJvcGVuRWRpdFVzZXJQb3B1cEJ0biIsIm9wZW5BZGRQbGFjZXNQb3B1cEJ0biIsIm9wZW5DaGFuZ2VQcm9maWxlUG9wdXBCdG4iLCJ0eHRFcnIiLCJuYW1lSW5wdXQiLCJhYm91dE1lSW5wdXQiLCJvcGVuQ2hhbmdlUHJvZmlsZVBvcHVwIiwiY2hhbmdlUHJvZmlsZVBpY1BvcHVwIiwib3BlbkFkZFByb2ZpbGVQb3B1cCIsImFkZFBvcHVwIiwib3BlbkVkaXRQcm9maWxlUG9wdXAiLCJlZGl0UG9wdXAiLCJuYW1lSW5mbyIsImFib3V0TWVJbmZvIiwiZmlsbFByb2ZpbGVGb3JtIiwicHJvZmlsZVVzZXIiLCJnZXRVc2VySW5mbyIsIm9wZW5JbWdQb3B1cCIsInRpdGxlIiwibmV3SW1nUG9wdXAiLCJjYXJkSXRlbSIsImRlbGV0ZUNvbmZpcm1Qb3B1cCIsImlzTGlrZWQiLCJhcGkiLCJyZW1vdmVJdGVtTGlrZSIsInRoZW4iLCJyZXMiLCJvblVwZGF0ZUxpa2VzIiwiY2F0Y2giLCJlcnIiLCJhZGRJdGVtTGlrZSIsInNldExvYWRpbmdJbml0Iiwic3RhdHVzIiwiY2FyZEl0ZW1zQXJyIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImFib3V0Iiwic2V0UGljdHVyZVByb2ZpbGUiLCJzcGlubmVyR2lmIiwiY2FyZHNMaXN0Iiwic2V0TmV3SXRlbWxpc3QiLCJpbm5lckhUTUwiLCJhdmF0YXIiLCJyZW5kZXJDYXJkIiwiY2FyZEluZm8iLCJhZGRJdGVtIiwiY3JlYXRlUGxhY2VJdGVtIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIl9pdGVtcyIsImVsIiwicHJlcGVuZCIsIml0ZW1zIiwiZGF0YSIsIm5hbWVfaW5wdXQiLCJhYm91dF9tZSIsInNldFRpbWVvdXQiLCJmaW5hbGx5IiwidGl0bGVfcGxhY2UiLCJpbWdfbGluayIsImFkZE5ld0NhcmQiLCJpbWdTZWxlY3RvciIsImltZ1RpdGxlU2VsZWN0b3IiLCJfaW1nRWxlbWVudCIsIl90aXRsZUVsZW1lbnQiLCJfc2V0UG9wdXBJbWciLCJzcmMiLCJoYW5kbGVTdWJtaXRSZW1vdmVDb25maXJtIiwiX2hhbmRsZVN1Ym1pdFJlbW92ZUNvbmZpcm0iLCJfZWxlbWVudCIsIl9zdWJtaXRCdG5FbGVtZW50IiwiX2hhbmRsZUNvbmZpcm1TdWJtaXQiLCJvblJlbW92ZUl0ZW0iLCJuYW1lRWxtIiwiam9iRWxtIiwicGljRWxtIiwiX25hbWVFbG0iLCJfam9iRWxtIiwiX3BpY0VsbSIsIl91c2VySWQiLCJwaWNTcmMiLCJvblVwZGF0ZVByb2ZpbGVQaWMiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9vbkh0dHBSZXF1ZXN0IiwidXJsIiwibWV0aG9kIiwiZnVsbFVybCIsImZldGNoIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiZ2V0SW5pdEluZm8iLCJhbGwiLCJfZ2V0SW5pdGlhbENhcmRzIiwiX2dldFVzZXJJbmZvIiwiYXV0aG9yaXphdGlvbiIsInZhbGlkYXRvciIsImZvcm1OYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==